<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Linux From Scratch Version 8.4-Systemd</title>
        
        <meta name="robots" content="noindex" />
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li><a href="00-preface/index.html"><strong aria-hidden="true">1.</strong> Preface</a></li><li><ol class="section"><li><a href="00-preface/01-Foreword.html"><strong aria-hidden="true">1.1.</strong> Foreword</a></li><li><a href="00-preface/02-Audience.html"><strong aria-hidden="true">1.2.</strong> Audience</a></li><li><a href="00-preface/03-LFS-Target-Architectures.html"><strong aria-hidden="true">1.3.</strong> LFS Target Architectures</a></li><li><a href="00-preface/04-LFS-and-Standards.html"><strong aria-hidden="true">1.4.</strong> LFS and Standards</a></li><li><a href="00-preface/05-Rationale-for-Packages-in-the-Book.html"><strong aria-hidden="true">1.5.</strong> Rationale for Packages in the Book</a></li><li><a href="00-preface/06-Prerequisites.html"><strong aria-hidden="true">1.6.</strong> Prerequisites</a></li><li><a href="00-preface/07-Typography.html"><strong aria-hidden="true">1.7.</strong> Typography</a></li><li><a href="00-preface/08-Structure.html"><strong aria-hidden="true">1.8.</strong> Structure</a></li><li><a href="00-preface/09-Errata.html"><strong aria-hidden="true">1.9.</strong> Errata</a></li></ol></li><li><a href="01-introduction/index.html"><strong aria-hidden="true">2.</strong> Introduction</a></li><li><ol class="section"><li><a href="01-introduction/01-How-to-Build-an-LFS-System.html"><strong aria-hidden="true">2.1.</strong> How to Build an LFS System</a></li><li><a href="01-introduction/02-Whats-new-since-the-last-release.html"><strong aria-hidden="true">2.2.</strong> What's new since the last release</a></li><li><a href="01-introduction/03-Changelog.html"><strong aria-hidden="true">2.3.</strong> Changelog</a></li><li><a href="01-introduction/04-Resources.html"><strong aria-hidden="true">2.4.</strong> Resources</a></li><li><a href="01-introduction/05-Help.html"><strong aria-hidden="true">2.5.</strong> Help</a></li></ol></li><li><a href="02-Preparing-the-Host-System/index.html"><strong aria-hidden="true">3.</strong> Preparing the Host System</a></li><li><ol class="section"><li><a href="02-Preparing-the-Host-System/01-Introduction.html"><strong aria-hidden="true">3.1.</strong> Introduction</a></li><li><a href="02-Preparing-the-Host-System/02-Host-System-Requirements.html"><strong aria-hidden="true">3.2.</strong> Host System Requirements</a></li><li><a href="02-Preparing-the-Host-System/03-Building-LFS-in-Stages.html"><strong aria-hidden="true">3.3.</strong> Building LFS in Stages</a></li><li><a href="02-Preparing-the-Host-System/04-Creating-a-New-Partition.html"><strong aria-hidden="true">3.4.</strong> Creating a New Partition</a></li><li><a href="02-Preparing-the-Host-System/05-Creating-a-File-System-on-the-Partition.html"><strong aria-hidden="true">3.5.</strong> Creating a File System on the Partition</a></li><li><a href="02-Preparing-the-Host-System/06-Setting-The-$LFS-Variable.html"><strong aria-hidden="true">3.6.</strong> Setting The $LFS Variable</a></li><li><a href="02-Preparing-the-Host-System/07-Mounting-the-New-Partition.html"><strong aria-hidden="true">3.7.</strong> Mounting the New Partition</a></li></ol></li><li><a href="03-Packages-and-Patches/index.html"><strong aria-hidden="true">4.</strong> Packages and Patches</a></li><li><ol class="section"><li><a href="03-Packages-and-Patches/01-Introduction.html"><strong aria-hidden="true">4.1.</strong> Introduction</a></li><li><a href="03-Packages-and-Patches/02-All-Packages.html"><strong aria-hidden="true">4.2.</strong> All Packages</a></li><li><a href="03-Packages-and-Patches/03-Needed-Patches.html"><strong aria-hidden="true">4.3.</strong> Needed Patches</a></li></ol></li><li><a href="04-Final-Preparations/index.html"><strong aria-hidden="true">5.</strong> Final Preparations</a></li><li><ol class="section"><li><a href="04-Final-Preparations/01-Introduction.html"><strong aria-hidden="true">5.1.</strong> Introduction</a></li><li><a href="04-Final-Preparations/02-Creating-the-$LFS-tools-Directory.html"><strong aria-hidden="true">5.2.</strong> Creating the $LFS/tools Directory</a></li><li><a href="04-Final-Preparations/03-Adding-the-LFS-User.html"><strong aria-hidden="true">5.3.</strong> Adding the LFS User</a></li><li><a href="04-Final-Preparations/04-Setting-Up-the-Environment.html"><strong aria-hidden="true">5.4.</strong> Setting Up the Environment</a></li><li><a href="04-Final-Preparations/05-About-SBUs.html"><strong aria-hidden="true">5.5.</strong> About SBUs</a></li><li><a href="04-Final-Preparations/06-About-the-Test-Suites.html"><strong aria-hidden="true">5.6.</strong> About the Test Suites</a></li></ol></li><li><a href="05-Constructing-a-Temporary-System/index.html"><strong aria-hidden="true">6.</strong> Constructing a Temporary System</a></li><li><ol class="section"><li><a href="05-Constructing-a-Temporary-System/01-Introduction.html"><strong aria-hidden="true">6.1.</strong> Introduction</a></li><li><a href="05-Constructing-a-Temporary-System/02-Toolchain-Technical-Notes.html"><strong aria-hidden="true">6.2.</strong> Toolchain Technical Notes</a></li><li><a href="05-Constructing-a-Temporary-System/03-General-Compilation-Instructions.html"><strong aria-hidden="true">6.3.</strong> General Compilation Instructions</a></li><li><a href="05-Constructing-a-Temporary-System/04-Binutils-2.32-Pass-1.html"><strong aria-hidden="true">6.4.</strong> Binutils-2.32 - Pass 1</a></li><li><a href="05-Constructing-a-Temporary-System/05-GCC-8.2.0-Pass-1.html"><strong aria-hidden="true">6.5.</strong> GCC-8.2.0 - Pass 1</a></li><li><a href="05-Constructing-a-Temporary-System/06-Linux-4.20.12-API-Headers.html"><strong aria-hidden="true">6.6.</strong> Linux-4.20.12 API Headers</a></li><li><a href="05-Constructing-a-Temporary-System/07-Glibc-2.29.html"><strong aria-hidden="true">6.7.</strong> Glibc-2.29</a></li><li><a href="05-Constructing-a-Temporary-System/08-Libstdc++-from-GCC-8.2.0.html"><strong aria-hidden="true">6.8.</strong> Libstdc++ from GCC-8.2.0</a></li><li><a href="05-Constructing-a-Temporary-System/09-Binutils-2.32-Pass-2.html"><strong aria-hidden="true">6.9.</strong> Binutils-2.32 - Pass 2</a></li><li><a href="05-Constructing-a-Temporary-System/10-GCC-8.2.0-Pass-2.html"><strong aria-hidden="true">6.10.</strong> GCC-8.2.0 - Pass 2</a></li><li><a href="05-Constructing-a-Temporary-System/11-Tcl-8.6.9.html"><strong aria-hidden="true">6.11.</strong> Tcl-8.6.9</a></li><li><a href="05-Constructing-a-Temporary-System/12-Expect-5.45.4.html"><strong aria-hidden="true">6.12.</strong> Expect-5.45.4</a></li><li><a href="05-Constructing-a-Temporary-System/13-DejaGNU-1.6.2.html"><strong aria-hidden="true">6.13.</strong> DejaGNU-1.6.2</a></li><li><a href="05-Constructing-a-Temporary-System/14-M4-1.4.18.html"><strong aria-hidden="true">6.14.</strong> M4-1.4.18</a></li><li><a href="05-Constructing-a-Temporary-System/15-Ncurses-6.1.html"><strong aria-hidden="true">6.15.</strong> Ncurses-6.1</a></li><li><a href="05-Constructing-a-Temporary-System/16-Bash-5.0.html"><strong aria-hidden="true">6.16.</strong> Bash-5.0</a></li><li><a href="05-Constructing-a-Temporary-System/17-Bison-3.3.2.html"><strong aria-hidden="true">6.17.</strong> Bison-3.3.2</a></li><li><a href="05-Constructing-a-Temporary-System/18-Bzip2-1.0.6.html"><strong aria-hidden="true">6.18.</strong> Bzip2-1.0.6</a></li><li><a href="05-Constructing-a-Temporary-System/19-Coreutils-8.30.html"><strong aria-hidden="true">6.19.</strong> Coreutils-8.30</a></li><li><a href="05-Constructing-a-Temporary-System/20-Diffutils-3.7.html"><strong aria-hidden="true">6.20.</strong> Diffutils-3.7</a></li><li><a href="05-Constructing-a-Temporary-System/21-File-5.36.html"><strong aria-hidden="true">6.21.</strong> File-5.36</a></li><li><a href="05-Constructing-a-Temporary-System/22-Findutils-4.6.0.html"><strong aria-hidden="true">6.22.</strong> Findutils-4.6.0</a></li><li><a href="05-Constructing-a-Temporary-System/23-Gawk-4.2.1.html"><strong aria-hidden="true">6.23.</strong> Gawk-4.2.1</a></li><li><a href="05-Constructing-a-Temporary-System/24-Gettext-0.19.8.1.html"><strong aria-hidden="true">6.24.</strong> Gettext-0.19.8.1</a></li><li><a href="05-Constructing-a-Temporary-System/25-Grep-3.3.html"><strong aria-hidden="true">6.25.</strong> Grep-3.3</a></li><li><a href="05-Constructing-a-Temporary-System/26-Gzip-1.10.html"><strong aria-hidden="true">6.26.</strong> Gzip-1.10</a></li><li><a href="05-Constructing-a-Temporary-System/27-Make-4.2.1.html"><strong aria-hidden="true">6.27.</strong> Make-4.2.1</a></li><li><a href="05-Constructing-a-Temporary-System/28-Patch-2.7.6.html"><strong aria-hidden="true">6.28.</strong> Patch-2.7.6</a></li><li><a href="05-Constructing-a-Temporary-System/29-Perl-5.28.1.html"><strong aria-hidden="true">6.29.</strong> Perl-5.28.1</a></li><li><a href="05-Constructing-a-Temporary-System/30-Python-3.7.2.html"><strong aria-hidden="true">6.30.</strong> Python-3.7.2</a></li><li><a href="05-Constructing-a-Temporary-System/31-Sed-4.7.html"><strong aria-hidden="true">6.31.</strong> Sed-4.7</a></li><li><a href="05-Constructing-a-Temporary-System/32-Tar-1.31.html"><strong aria-hidden="true">6.32.</strong> Tar-1.31</a></li><li><a href="05-Constructing-a-Temporary-System/33-Texinfo-6.5.html"><strong aria-hidden="true">6.33.</strong> Texinfo-6.5</a></li><li><a href="05-Constructing-a-Temporary-System/34-Util-linux-2.33.1.html"><strong aria-hidden="true">6.34.</strong> Util-linux-2.33.1</a></li><li><a href="05-Constructing-a-Temporary-System/35-Xz-5.2.4.html"><strong aria-hidden="true">6.35.</strong> Xz-5.2.4</a></li><li><a href="05-Constructing-a-Temporary-System/36-Stripping.html"><strong aria-hidden="true">6.36.</strong> Stripping</a></li><li><a href="05-Constructing-a-Temporary-System/37-Changing-Ownership.html"><strong aria-hidden="true">6.37.</strong> Changing Ownership</a></li></ol></li><li><a href="06-Installing-Basic-System-Software/index.html"><strong aria-hidden="true">7.</strong> Installing Basic System Software</a></li><li><ol class="section"><li><a href="06-Installing-Basic-System-Software/01-Introduction.html"><strong aria-hidden="true">7.1.</strong> Introduction</a></li><li><a href="06-Installing-Basic-System-Software/02-Preparing-Virtual-Kernel-File-Systems.html"><strong aria-hidden="true">7.2.</strong> Preparing Virtual Kernel File Systems</a></li><li><a href="06-Installing-Basic-System-Software/03-Package-Management.html"><strong aria-hidden="true">7.3.</strong> Package Management</a></li><li><a href="06-Installing-Basic-System-Software/04-Entering-the-Chroot-Environment.html"><strong aria-hidden="true">7.4.</strong> Entering the Chroot Environment</a></li><li><a href="06-Installing-Basic-System-Software/05-Creating-Directories.html"><strong aria-hidden="true">7.5.</strong> Creating Directories</a></li><li><a href="06-Installing-Basic-System-Software/06-Creating-Essential-Files-and-Symlinks.html"><strong aria-hidden="true">7.6.</strong> Creating Essential Files and Symlinks</a></li><li><a href="06-Installing-Basic-System-Software/07-Linux-4.20.12-API-Headers.html"><strong aria-hidden="true">7.7.</strong> Linux-4.20.12 API Headers</a></li><li><a href="06-Installing-Basic-System-Software/08-Man-pages-4.16.html"><strong aria-hidden="true">7.8.</strong> Man-pages-4.16</a></li><li><a href="06-Installing-Basic-System-Software/09-Glibc-2.29.html"><strong aria-hidden="true">7.9.</strong> Glibc-2.29</a></li><li><a href="06-Installing-Basic-System-Software/10-Adjusting-the-Toolchain.html"><strong aria-hidden="true">7.10.</strong> Adjusting the Toolchain</a></li><li><a href="06-Installing-Basic-System-Software/11-Zlib-1.2.11.html"><strong aria-hidden="true">7.11.</strong> Zlib-1.2.11</a></li><li><a href="06-Installing-Basic-System-Software/12-File-5.36.html"><strong aria-hidden="true">7.12.</strong> File-5.36</a></li><li><a href="06-Installing-Basic-System-Software/13-Readline-8.0.html"><strong aria-hidden="true">7.13.</strong> Readline-8.0</a></li><li><a href="06-Installing-Basic-System-Software/14-M4-1.4.18.html"><strong aria-hidden="true">7.14.</strong> M4-1.4.18</a></li><li><a href="06-Installing-Basic-System-Software/15-Bc-1.07.1.html"><strong aria-hidden="true">7.15.</strong> Bc-1.07.1</a></li><li><a href="06-Installing-Basic-System-Software/16-Binutils-2.32.html"><strong aria-hidden="true">7.16.</strong> Binutils-2.32</a></li><li><a href="06-Installing-Basic-System-Software/17-GMP-6.1.2.html"><strong aria-hidden="true">7.17.</strong> GMP-6.1.2</a></li><li><a href="06-Installing-Basic-System-Software/18-MPFR-4.0.2.html"><strong aria-hidden="true">7.18.</strong> MPFR-4.0.2</a></li><li><a href="06-Installing-Basic-System-Software/19-MPC-1.1.0.html"><strong aria-hidden="true">7.19.</strong> MPC-1.1.0</a></li><li><a href="06-Installing-Basic-System-Software/20-Shadow-4.6.html"><strong aria-hidden="true">7.20.</strong> Shadow-4.6</a></li><li><a href="06-Installing-Basic-System-Software/21-GCC-8.2.0.html"><strong aria-hidden="true">7.21.</strong> GCC-8.2.0</a></li><li><a href="06-Installing-Basic-System-Software/22-Bzip2-1.0.6.html"><strong aria-hidden="true">7.22.</strong> Bzip2-1.0.6</a></li><li><a href="06-Installing-Basic-System-Software/23-Pkg-config-0.29.2.html"><strong aria-hidden="true">7.23.</strong> Pkg-config-0.29.2</a></li><li><a href="06-Installing-Basic-System-Software/24-Ncurses-6.1.html"><strong aria-hidden="true">7.24.</strong> Ncurses-6.1</a></li><li><a href="06-Installing-Basic-System-Software/25-Attr-2.4.48.html"><strong aria-hidden="true">7.25.</strong> Attr-2.4.48</a></li><li><a href="06-Installing-Basic-System-Software/26-Acl-2.2.53.html"><strong aria-hidden="true">7.26.</strong> Acl-2.2.53</a></li><li><a href="06-Installing-Basic-System-Software/27-Libcap-2.26.html"><strong aria-hidden="true">7.27.</strong> Libcap-2.26</a></li><li><a href="06-Installing-Basic-System-Software/28-Sed-4.7.html"><strong aria-hidden="true">7.28.</strong> Sed-4.7</a></li><li><a href="06-Installing-Basic-System-Software/29-Psmisc-23.2.html"><strong aria-hidden="true">7.29.</strong> Psmisc-23.2</a></li><li><a href="06-Installing-Basic-System-Software/30-Iana-Etc-2.30.html"><strong aria-hidden="true">7.30.</strong> Iana-Etc-2.30</a></li><li><a href="06-Installing-Basic-System-Software/31-Bison-3.3.2.html"><strong aria-hidden="true">7.31.</strong> Bison-3.3.2</a></li><li><a href="06-Installing-Basic-System-Software/32-Flex-2.6.4.html"><strong aria-hidden="true">7.32.</strong> Flex-2.6.4</a></li><li><a href="06-Installing-Basic-System-Software/33-Grep-3.3.html"><strong aria-hidden="true">7.33.</strong> Grep-3.3</a></li><li><a href="06-Installing-Basic-System-Software/34-Bash-5.0.html"><strong aria-hidden="true">7.34.</strong> Bash-5.0</a></li><li><a href="06-Installing-Basic-System-Software/35-Libtool-2.4.6.html"><strong aria-hidden="true">7.35.</strong> Libtool-2.4.6</a></li><li><a href="06-Installing-Basic-System-Software/36-GDBM-1.18.1.html"><strong aria-hidden="true">7.36.</strong> GDBM-1.18.1</a></li><li><a href="06-Installing-Basic-System-Software/37-Gperf-3.1.html"><strong aria-hidden="true">7.37.</strong> Gperf-3.1</a></li><li><a href="06-Installing-Basic-System-Software/38-Expat-2.2.6.html"><strong aria-hidden="true">7.38.</strong> Expat-2.2.6</a></li><li><a href="06-Installing-Basic-System-Software/39-Inetutils-1.9.4.html"><strong aria-hidden="true">7.39.</strong> Inetutils-1.9.4</a></li><li><a href="06-Installing-Basic-System-Software/40-Perl-5.28.1.html"><strong aria-hidden="true">7.40.</strong> Perl-5.28.1</a></li><li><a href="06-Installing-Basic-System-Software/41-XML::Parser-2.44.html"><strong aria-hidden="true">7.41.</strong> XML::Parser-2.44</a></li><li><a href="06-Installing-Basic-System-Software/42-Intltool-0.51.0.html"><strong aria-hidden="true">7.42.</strong> Intltool-0.51.0</a></li><li><a href="06-Installing-Basic-System-Software/43-Autoconf-2.69.html"><strong aria-hidden="true">7.43.</strong> Autoconf-2.69</a></li><li><a href="06-Installing-Basic-System-Software/44-Automake-1.16.1.html"><strong aria-hidden="true">7.44.</strong> Automake-1.16.1</a></li><li><a href="06-Installing-Basic-System-Software/45-Xz-5.2.4.html"><strong aria-hidden="true">7.45.</strong> Xz-5.2.4</a></li><li><a href="06-Installing-Basic-System-Software/46-Kmod-26-26tion.html"><strong aria-hidden="true">7.46.</strong> Kmod-26</a></li><li><a href="06-Installing-Basic-System-Software/47-Gettext-0.19.8.1.html"><strong aria-hidden="true">7.47.</strong> Gettext-0.19.8.1</a></li><li><a href="06-Installing-Basic-System-Software/48-Libelf-from-Elfutils-0.176.html"><strong aria-hidden="true">7.48.</strong> Libelf from Elfutils-0.176</a></li><li><a href="06-Installing-Basic-System-Software/49-Libffi-3.2.1.html"><strong aria-hidden="true">7.49.</strong> Libffi-3.2.1</a></li><li><a href="06-Installing-Basic-System-Software/50-OpenSSL-1.1.1a-3.2.1.html"><strong aria-hidden="true">7.50.</strong> OpenSSL-1.1.1a</a></li><li><a href="06-Installing-Basic-System-Software/51-Python-3.7.2.html"><strong aria-hidden="true">7.51.</strong> Python-3.7.2</a></li><li><a href="06-Installing-Basic-System-Software/52-Ninja-1.9.0.html"><strong aria-hidden="true">7.52.</strong> Ninja-1.9.0</a></li><li><a href="06-Installing-Basic-System-Software/53-Meson-0.49.2.html"><strong aria-hidden="true">7.53.</strong> Meson-0.49.2</a></li><li><a href="06-Installing-Basic-System-Software/54-Coreutils-8.30.html"><strong aria-hidden="true">7.54.</strong> Coreutils-8.30</a></li><li><a href="06-Installing-Basic-System-Software/55-Check-0.12.0.html"><strong aria-hidden="true">7.55.</strong> Check-0.12.0</a></li><li><a href="06-Installing-Basic-System-Software/56-Diffutils-3.7.html"><strong aria-hidden="true">7.56.</strong> Diffutils-3.7</a></li><li><a href="06-Installing-Basic-System-Software/57-Gawk-4.2.1.html"><strong aria-hidden="true">7.57.</strong> Gawk-4.2.1</a></li><li><a href="06-Installing-Basic-System-Software/58-Findutils-4.6.0.html"><strong aria-hidden="true">7.58.</strong> Findutils-4.6.0</a></li><li><a href="06-Installing-Basic-System-Software/59-Groff-1.22.4.html"><strong aria-hidden="true">7.59.</strong> Groff-1.22.4</a></li><li><a href="06-Installing-Basic-System-Software/60-GRUB-2.02.html"><strong aria-hidden="true">7.60.</strong> GRUB-2.02</a></li><li><a href="06-Installing-Basic-System-Software/61-Less-530.html"><strong aria-hidden="true">7.61.</strong> Less-530</a></li><li><a href="06-Installing-Basic-System-Software/62-Gzip-1.10.html"><strong aria-hidden="true">7.62.</strong> Gzip-1.10</a></li><li><a href="06-Installing-Basic-System-Software/63-IPRoute2-4.20.0.html"><strong aria-hidden="true">7.63.</strong> IPRoute2-4.20.0</a></li><li><a href="06-Installing-Basic-System-Software/64-Kbd-2.0.4.html"><strong aria-hidden="true">7.64.</strong> Kbd-2.0.4</a></li><li><a href="06-Installing-Basic-System-Software/65-Libpipeline-1.5.1.html"><strong aria-hidden="true">7.65.</strong> Libpipeline-1.5.1</a></li><li><a href="06-Installing-Basic-System-Software/66-Make-4.2.1.html"><strong aria-hidden="true">7.66.</strong> Make-4.2.1</a></li><li><a href="06-Installing-Basic-System-Software/67-Patch-2.7.6.html"><strong aria-hidden="true">7.67.</strong> Patch-2.7.6</a></li><li><a href="06-Installing-Basic-System-Software/68-Man-DB-2.8.5.html"><strong aria-hidden="true">7.68.</strong> Man-DB-2.8.5</a></li><li><a href="06-Installing-Basic-System-Software/69-Tar-1.31.html"><strong aria-hidden="true">7.69.</strong> Tar-1.31</a></li><li><a href="06-Installing-Basic-System-Software/70-Texinfo-6.5.html"><strong aria-hidden="true">7.70.</strong> Texinfo-6.5</a></li><li><a href="06-Installing-Basic-System-Software/71-Vim-8.1.html"><strong aria-hidden="true">7.71.</strong> Vim-8.1</a></li><li><a href="06-Installing-Basic-System-Software/72-Systemd-240.html"><strong aria-hidden="true">7.72.</strong> Systemd-240</a></li><li><a href="06-Installing-Basic-System-Software/73-D-Bus-1.12.12.html"><strong aria-hidden="true">7.73.</strong> D-Bus-1.12.12</a></li><li><a href="06-Installing-Basic-System-Software/74-Procps-ng-3.3.15.html"><strong aria-hidden="true">7.74.</strong> Procps-ng-3.3.15</a></li><li><a href="06-Installing-Basic-System-Software/75-Util-linux-2.33.1.html"><strong aria-hidden="true">7.75.</strong> Util-linux-2.33.1</a></li><li><a href="06-Installing-Basic-System-Software/76-E2fsprogs-1.44.5.html"><strong aria-hidden="true">7.76.</strong> E2fsprogs-1.44.5</a></li><li><a href="06-Installing-Basic-System-Software/77-About-Debugging-Symbols.html"><strong aria-hidden="true">7.77.</strong> About Debugging Symbols</a></li><li><a href="06-Installing-Basic-System-Software/78-Stripping-Again.html"><strong aria-hidden="true">7.78.</strong> Stripping Again</a></li><li><a href="06-Installing-Basic-System-Software/79-Cleaning-Up.html"><strong aria-hidden="true">7.79.</strong> Cleaning Up</a></li></ol></li><li><a href="07-System-Configuration/index.html"><strong aria-hidden="true">8.</strong> System Configuration</a></li><li><ol class="section"><li><a href="07-System-Configuration/01-Introduction.html"><strong aria-hidden="true">8.1.</strong> Introduction</a></li><li><a href="07-System-Configuration/02-General-Network-Configuration.html"><strong aria-hidden="true">8.2.</strong> General Network Configuration</a></li><li><a href="07-System-Configuration/03-Overview-of-Device-and-Module-Handling.html"><strong aria-hidden="true">8.3.</strong> Overview of Device and Module Handling</a></li><li><a href="07-System-Configuration/04-Managing-Devices.html"><strong aria-hidden="true">8.4.</strong> Managing Devices</a></li><li><a href="07-System-Configuration/05-Configuring-the-system-clock.html"><strong aria-hidden="true">8.5.</strong> Configuring the system clock</a></li><li><a href="07-System-Configuration/06-Configuring-the-Linux-Console.html"><strong aria-hidden="true">8.6.</strong> Configuring the Linux Console</a></li><li><a href="07-System-Configuration/07-Configuring-the-System-Locale.html"><strong aria-hidden="true">8.7.</strong> Configuring the System Locale</a></li><li><a href="07-System-Configuration/08-Creating-the-slash-etc-slash-inputrc-File.html"><strong aria-hidden="true">8.8.</strong> Creating the /etc/inputrc File</a></li><li><a href="07-System-Configuration/09-Creating-the-slash-etc-slash-shells-File.html"><strong aria-hidden="true">8.9.</strong> Creating the /etc/shells File</a></li><li><a href="07-System-Configuration/10-Systemd-Usage-and-Configuration.html"><strong aria-hidden="true">8.10.</strong> Systemd Usage and Configuration</a></li></ol></li><li><a href="08-Making-the-LFS-System-Bootable/index.html"><strong aria-hidden="true">9.</strong> Making the LFS System Bootable</a></li><li><ol class="section"><li><a href="08-Making-the-LFS-System-Bootable/01-Introduction.html"><strong aria-hidden="true">9.1.</strong> Introduction</a></li><li><a href="08-Making-the-LFS-System-Bootable/02-Creating-the-slash-etc-slash-fstab-File.html"><strong aria-hidden="true">9.2.</strong> Creating the /etc/fstab File </a></li><li><a href="08-Making-the-LFS-System-Bootable/03-Linux-4.20.12.html"><strong aria-hidden="true">9.3.</strong> Linux-4.20.12</a></li><li><a href="08-Making-the-LFS-System-Bootable/04-Using-GRUB-to-Set-Up-the-Boot-Process.html"><strong aria-hidden="true">9.4.</strong> Using GRUB to Set Up the Boot Process</a></li></ol></li><li><a href="09-The-End/index.html"><strong aria-hidden="true">10.</strong> The End</a></li><li><ol class="section"><li><a href="09-The-End/01-The-End.html"><strong aria-hidden="true">10.1.</strong> The End</a></li><li><a href="09-The-End/02-Get-Counted.html"><strong aria-hidden="true">10.2.</strong> Get Counted</a></li><li><a href="09-The-End/03-Rebooting-the-System.html"><strong aria-hidden="true">10.3.</strong> Rebooting the System</a></li><li><a href="09-The-End/04-What-Now.html"><strong aria-hidden="true">10.4.</strong> What Now?</a></li></ol></li><li><a href="10-Appendices/index.html"><strong aria-hidden="true">11.</strong> Appendices</a></li><li><ol class="section"><li><a href="10-Appendices/01-Acronyms-and-Terms.html"><strong aria-hidden="true">11.1.</strong> Acronyms and Terms</a></li><li><a href="10-Appendices/02-Acknowledgments.html"><strong aria-hidden="true">11.2.</strong> Acknowledgments</a></li><li><a href="10-Appendices/03-Dependencies.html"><strong aria-hidden="true">11.3.</strong> Dependencies</a></li><li><a href="10-Appendices/04-LFS-Licenses.html"><strong aria-hidden="true">11.4.</strong> LFS Licenses</a></li></ol></li><li><a href="10-Appendices/CCL.html">Creative Commons License</a></li><li class="affix"><a href="10-Appendices/MITL.html">The MIT License</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Linux From Scratch Version 8.4-Systemd</h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#table-of-contents" id="table-of-contents">Table of Contents</a></h1>
<h3><a class="header" href="#preface" id="preface">Preface</a></h3>
<ul>
<li>Foreword</li>
<li>Audience</li>
<li>LFS Target Architectures</li>
<li>LFS and Standards</li>
<li>Rationale for Packages in the Book</li>
<li>Prerequisites</li>
<li>Typography</li>
<li>Structure</li>
<li>Errata</li>
</ul>
<h2><a class="header" href="#i-introduction" id="i-introduction">I. Introduction</a></h2>
<ul>
<li>
<h3><a class="header" href="#1-introduction" id="1-introduction">1. Introduction</a></h3>
<ul>
<li>How to Build an LFS System</li>
<li>What's new since the last release</li>
<li>Changelog</li>
<li>Resources</li>
<li>Help</li>
</ul>
</li>
</ul>
<h2><a class="header" href="#ii-preparing-for-the-build" id="ii-preparing-for-the-build">II. Preparing for the Build</a></h2>
<ul>
<li>
<h3><a class="header" href="#2-preparing-the-host-system" id="2-preparing-the-host-system">2. Preparing the Host System</a></h3>
<ul>
<li>Introduction</li>
<li>Host System Requirements</li>
<li>Building LFS in Stages</li>
<li>Creating a New Partition</li>
<li>Creating a File System on the Partition</li>
<li>Setting The $LFS Variable</li>
<li>Mounting the New Partition</li>
</ul>
</li>
<li>
<h3><a class="header" href="#3-packages-and-patches" id="3-packages-and-patches">3. Packages and Patches</a></h3>
<ul>
<li>Introduction</li>
<li>All Packages</li>
<li>Needed Patches</li>
</ul>
</li>
<li>
<h3><a class="header" href="#4-final-preparations" id="4-final-preparations">4. Final Preparations</a></h3>
<ul>
<li>Introduction</li>
<li>Creating the $LFS/tools Directory</li>
<li>Adding the LFS User</li>
<li>Setting Up the Environment</li>
<li>About SBUs</li>
<li>About the Test Suites</li>
</ul>
</li>
<li>
<h3><a class="header" href="#5-constructing-a-temporary-system" id="5-constructing-a-temporary-system">5. Constructing a Temporary System</a></h3>
<ul>
<li>Introduction</li>
<li>Toolchain Technical Notes</li>
<li>General Compilation Instructions</li>
<li>Binutils-2.32 - Pass 1</li>
<li>GCC-8.2.0 - Pass 1</li>
<li>Linux-4.20.12 API Headers</li>
<li>Glibc-2.29</li>
<li>Libstdc++ from GCC-8.2.0</li>
<li>Binutils-2.32 - Pass 2</li>
<li>GCC-8.2.0 - Pass 2</li>
<li>Tcl-8.6.9</li>
<li>Expect-5.45.4</li>
<li>DejaGNU-1.6.2</li>
<li>M4-1.4.18</li>
<li>Ncurses-6.1</li>
<li>Bash-5.0</li>
<li>Bison-3.3.2</li>
<li>Bzip2-1.0.6</li>
<li>Coreutils-8.30</li>
<li>Diffutils-3.7</li>
<li>File-5.36</li>
<li>Findutils-4.6.0</li>
<li>Gawk-4.2.1</li>
<li>Gettext-0.19.8.1</li>
<li>Grep-3.3</li>
<li>Gzip-1.10</li>
<li>Make-4.2.1</li>
<li>Patch-2.7.6</li>
<li>Perl-5.28.1</li>
<li>Python-3.7.2</li>
<li>Sed-4.7</li>
<li>Tar-1.31</li>
<li>Texinfo-6.5</li>
<li>Util-linux-2.33.1</li>
<li>Xz-5.2.4</li>
<li>Stripping</li>
<li>Changing Ownership</li>
</ul>
</li>
</ul>
<h2><a class="header" href="#iii-building-the-lfs-system" id="iii-building-the-lfs-system">III. Building the LFS System</a></h2>
<ul>
<li>
<h3><a class="header" href="#6-installing-basic-system-software" id="6-installing-basic-system-software">6. Installing Basic System Software</a></h3>
<ul>
<li>Introduction</li>
<li>Preparing Virtual Kernel File Systems</li>
<li>Package Management</li>
<li>Entering the Chroot Environment</li>
<li>Creating Directories</li>
<li>Creating Essential Files and Symlinks</li>
<li>Linux-4.20.12 API Headers</li>
<li>Man-pages-4.16</li>
<li>Glibc-2.29</li>
<li>Adjusting the Toolchain</li>
<li>Zlib-1.2.11</li>
<li>File-5.36</li>
<li>Readline-8.0</li>
<li>M4-1.4.18</li>
<li>Bc-1.07.1</li>
<li>Binutils-2.32</li>
<li>GMP-6.1.2</li>
<li>MPFR-4.0.2</li>
<li>MPC-1.1.0</li>
<li>Shadow-4.6</li>
<li>GCC-8.2.0</li>
<li>Bzip2-1.0.6</li>
<li>Pkg-config-0.29.2</li>
<li>Ncurses-6.1</li>
<li>Attr-2.4.48</li>
<li>Acl-2.2.53</li>
<li>Libcap-2.26</li>
<li>Sed-4.7</li>
<li>Psmisc-23.2</li>
<li>Iana-Etc-2.30</li>
<li>Bison-3.3.2</li>
<li>Flex-2.6.4</li>
<li>Grep-3.3</li>
<li>Bash-5.0</li>
<li>Libtool-2.4.6</li>
<li>GDBM-1.18.1</li>
<li>Gperf-3.1</li>
<li>Expat-2.2.6</li>
<li>Inetutils-1.9.4</li>
<li>Perl-5.28.1</li>
<li>XML::Parser-2.44</li>
<li>Intltool-0.51.0</li>
<li>Autoconf-2.69</li>
<li>Automake-1.16.1</li>
<li>Xz-5.2.4</li>
<li>Kmod-26</li>
<li>Gettext-0.19.8.1</li>
<li>Libelf from Elfutils-0.176</li>
<li>Libffi-3.2.1</li>
<li>OpenSSL-1.1.1a</li>
<li>Python-3.7.2</li>
<li>Ninja-1.9.0</li>
<li>Meson-0.49.2</li>
<li>Coreutils-8.30</li>
<li>Check-0.12.0</li>
<li>Diffutils-3.7</li>
<li>Gawk-4.2.1</li>
<li>Findutils-4.6.0</li>
<li>Groff-1.22.4</li>
<li>GRUB-2.02</li>
<li>Less-530</li>
<li>Gzip-1.10</li>
<li>IPRoute2-4.20.0</li>
<li>Kbd-2.0.4</li>
<li>Libpipeline-1.5.1</li>
<li>Make-4.2.1</li>
<li>Patch-2.7.6</li>
<li>Man-DB-2.8.5</li>
<li>Tar-1.31</li>
<li>Texinfo-6.5</li>
<li>Vim-8.1</li>
<li>Systemd-240</li>
<li>D-Bus-1.12.12</li>
<li>Procps-ng-3.3.15</li>
<li>Util-linux-2.33.1</li>
<li>E2fsprogs-1.44.5</li>
<li>About Debugging Symbols</li>
<li>Stripping Again</li>
<li>Cleaning Up</li>
</ul>
</li>
<li>
<h3><a class="header" href="#7-system-configuration" id="7-system-configuration">7. System Configuration</a></h3>
<ul>
<li>Introduction</li>
<li>General Network Configuration</li>
<li>Overview of Device and Module Handling</li>
<li>Managing Devices</li>
<li>Configuring the system clock</li>
<li>Configuring the Linux Console</li>
<li>Configuring the System Locale</li>
<li>Creating the /etc/inputrc File</li>
<li>Creating the /etc/shells File</li>
<li>Systemd Usage and Configuration</li>
</ul>
</li>
<li>
<h3><a class="header" href="#8-making-the-lfs-system-bootable" id="8-making-the-lfs-system-bootable">8. Making the LFS System Bootable</a></h3>
<ul>
<li>Introduction</li>
<li>Creating the /etc/fstab File</li>
<li>Linux-4.20.12</li>
<li>Using GRUB to Set Up the Boot Process</li>
</ul>
</li>
<li>
<h3><a class="header" href="#9-the-end" id="9-the-end">9. The End</a></h3>
<ul>
<li>The End</li>
<li>Get Counted</li>
<li>Rebooting the System</li>
<li>What Now?</li>
</ul>
</li>
</ul>
<h2><a class="header" href="#iv-appendices" id="iv-appendices">IV. Appendices</a></h2>
<ul>
<li>
<h3><a class="header" href="#a-acronyms-and-terms" id="a-acronyms-and-terms">A. Acronyms and Terms</a></h3>
</li>
<li>
<h3><a class="header" href="#b-acknowledgments" id="b-acknowledgments">B. Acknowledgments</a></h3>
</li>
<li>
<h3><a class="header" href="#c-dependencies" id="c-dependencies">C. Dependencies</a></h3>
</li>
<li>
<h3><a class="header" href="#d-lfs-licenses" id="d-lfs-licenses">D. LFS Licenses</a></h3>
<ul>
<li>Creative Commons License</li>
<li>The MIT License</li>
</ul>
</li>
</ul>
<h1><a class="header" href="#foreword" id="foreword">Foreword</a></h1>
<p>My journey to learn and better understand Linux began back in 1998. I had just installed my first Linux distribution and had quickly become intrigued with the whole concept and philosophy behind Linux.</p>
<p>There are always many ways to accomplish a single task. The same can be said about Linux distributions. A great many have existed over the years. Some still exist, some have morphed into something else, yet others have been relegated to our memories. They all do things differently to suit the needs of their target audience. Because so many different ways to accomplish the same end goal exist, I began to realize I no longer had to be limited by any one implementation. Prior to discovering Linux, we simply put up with issues in other Operating Systems as you had no choice. It was what it was, whether you liked it or not. With Linux, the concept of choice began to emerge. If you didn't like something, you were free, even encouraged, to change it.</p>
<p>I tried a number of distributions and could not decide on any one. They were great systems in their own right. It wasn't a matter of right and wrong anymore. It had become a matter of personal taste. With all that choice available, it became apparent that there would not be a single system that would be perfect for me. So I set out to create my own Linux system that would fully conform to my personal preferences.</p>
<p>To truly make it my own system, I resolved to compile everything from source code instead of using pre-compiled binary packages. This “perfect” Linux system would have the strengths of various systems without their perceived weaknesses. At first, the idea was rather daunting. I remained committed to the idea that such a system could be built.</p>
<p>After sorting through issues such as circular dependencies and compile-time errors, I finally built a custom-built Linux system. It was fully operational and perfectly usable like any of the other Linux systems out there at the time. But it was my own creation. It was very satisfying to have put together such a system myself. The only thing better would have been to create each piece of software myself. This was the next best thing.</p>
<p>As I shared my goals and experiences with other members of the Linux community, it became apparent that there was a sustained interest in these ideas. It quickly became plain that such custom-built Linux systems serve not only to meet user specific requirements, but also serve as an ideal learning opportunity for programmers and system administrators to enhance their (existing) Linux skills. Out of this broadened interest, the Linux From Scratch Project was born.</p>
<p>This Linux From Scratch book is the central core around that project. It provides the background and instructions necessary for you to design and build your own system. While this book provides a template that will result in a correctly working system, you are free to alter the instructions to suit yourself, which is, in part, an important part of this project. You remain in control; we just lend a helping hand to get you started on your own journey.</p>
<p>I sincerely hope you will have a great time working on your own Linux From Scratch system and enjoy the numerous benefits of having a system that is truly your own.</p>
<p>--
Gerard Beekmans
gerard@linuxfromscratch.org</p>
<h1><a class="header" href="#audience" id="audience">Audience</a></h1>
<p>There are many reasons why you would want to read this book. One of the questions many people raise is, “why go through all the hassle of manually building a Linux system from scratch when you can just download and install an existing one?”</p>
<p>One important reason for this project's existence is to help you learn how a Linux system works from the inside out. Building an LFS system helps demonstrate what makes Linux tick, and how things work together and depend on each other. One of the best things that this learning experience can provide is the ability to customize a Linux system to suit your own unique needs.</p>
<p>Another key benefit of LFS is that it allows you to have more control over the system without relying on someone else's Linux implementation. With LFS, you are in the driver's seat and dictate every aspect of the system.</p>
<p>LFS allows you to create very compact Linux systems. When installing regular distributions, you are often forced to install a great many programs which are probably never used or understood. These programs waste resources. You may argue that with today's hard drive and CPUs, such resources are no longer a consideration. Sometimes, however, you are still constrained by size considerations if nothing else. Think about bootable CDs, USB sticks, and embedded systems. Those are areas where LFS can be beneficial.</p>
<p>Another advantage of a custom built Linux system is security. By compiling the entire system from source code, you are empowered to audit everything and apply all the security patches desired. It is no longer necessary to wait for somebody else to compile binary packages that fix a security hole. Unless you examine the patch and implement it yourself, you have no guarantee that the new binary package was built correctly and adequately fixes the problem.</p>
<p>The goal of Linux From Scratch is to build a complete and usable foundation-level system. If you do not wish to build your own Linux system from scratch, you may nevertheless benefit from the information in this book.</p>
<p>There are too many other good reasons to build your own LFS system to list them all here. In the end, education is by far the most powerful of reasons. As you continue in your LFS experience, you will discover the power that information and knowledge truly bring.</p>
<h1><a class="header" href="#lfs-target-architectures" id="lfs-target-architectures">LFS Target Architectures</a></h1>
<p>The primary target architectures of LFS are the AMD/Intel x86 (32-bit) and x86_64 (64-bit) CPUs. On the other hand, the instructions in this book are also known to work, with some modifications, with the Power PC and ARM CPUs. To build a system that utilizes one of these CPUs, the main prerequisite, in addition to those on the next few pages, is an existing Linux system such as an earlier LFS installation, Ubuntu, Red Hat/Fedora, SuSE, or other distribution that targets the architecture that you have. Also note that a 32-bit distribution can be installed and used as a host system on a 64-bit AMD/Intel computer.</p>
<p>Some other facts about 64-bit systems need to be added here. When compared to a 32-bit system, the sizes of executable programs are slightly larger and the execution speeds of arbitrary programs are only slightly faster. For example, in a test build of LFS-6.5 on a Core2Duo CPU based system, the following statistics were measured:</p>
<pre><code class="language-text">Architecture Build Time     Build Size
32-bit       198.5 minutes  648 MB
64-bit       190.6 minutes  709 MB
</code></pre>
<p>As you can see, the 64-bit build is only 4% faster and is 9% larger than the 32-bit build. The gain from going to a 64-bit system is relatively minimal. Of course, if you have more than 4GB of RAM or want to manipulate data that exceeds 4GB, the advantages of a 64-bit system are substantial.</p>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>The above discussion is only appropriate when comparing builds on the same hardware. Modern 64-bit systems are considerably faster than older 64-bit systems and the LFS authors recommend building on a 64-bit system when given a choice.</p>
</blockquote>
</blockquote>
<p>The default 64-bit build that results from LFS is considered a &quot;pure&quot; 64-bit system. That is, it supports 64-bit executables only. Building a &quot;multi-lib&quot; system requires compiling many applications twice, once for a 32-bit system and once for a 64-bit system. This is not directly supported in LFS because it would interfere with the educational objective of providing the instructions needed for a straightforward base Linux system. You can refer to the <a href="http://trac.clfs.org/">Cross Linux From Scratch</a> project for this advanced topic.</p>
<h1><a class="header" href="#lfs-and-standards" id="lfs-and-standards">LFS and Standards</a></h1>
<p>The structure of LFS follows Linux standards as closely as possible. The primary standards are:</p>
<ul>
<li><a href="http://pubs.opengroup.org/onlinepubs/9699919799/">POSIX.1-2008</a></li>
<li><a href="http://refspecs.linuxfoundation.org/FHS_3.0/fhs/index.html">Filesystem Hierarchy Standard (FHS) Version 3.0</a></li>
<li><a href="http://refspecs.linuxfoundation.org/lsb.shtml">Linux Standard Base (LSB) Version 5.0 (2015)</a></li>
</ul>
<p>The LSB has four separate standards: Core, Desktop, Runtime Languages, and Imaging. In addition to generic requirements there are also architecture specific requirements. There are also two areas for trial use: Gtk3 and Graphics. LFS attempts to conform to the architectures discussed in the previous section.</p>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>Many people do not agree with the requirements of the LSB. The main purpose of defining it is to ensure that proprietary software will be able to be installed and run properly on a compliant system. Since LFS is source based, the user has complete control over what packages are desired and many choose not to install some packages that are specified by the LSB.</p>
</blockquote>
</blockquote>
<h3><a class="header" href="#packages-supplied-by-lfs-needed-to-satisfy-the-lsb-requirements" id="packages-supplied-by-lfs-needed-to-satisfy-the-lsb-requirements">Packages supplied by LFS needed to satisfy the LSB Requirements</a></h3>
<table border="0" class="variablelist">
    <colgroup>
    <col align="left" valign="top" />
    <col />
    </colgroup>
    <tbody>
    <tr>
        <td>
        <p>
            <span class="term"><span class="emphasis"><em>LSB
            Core:</em></span></span>
        </p>
        </td>
        <td>
        <p>
            Bash, Bc, Binutils, Coreutils, Diffutils, File, Findutils,
            Gawk, Grep, Gzip, M4, Man-DB, Ncurses, Procps, Psmisc, Sed,
            Shadow, Tar, Util-linux, Zlib
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class="emphasis"><em>LSB
            Desktop:</em></span></span>
        </p>
        </td>
        <td>
        <p>
            None
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class="emphasis"><em>LSB Runtime
            Languages:</em></span></span>
        </p>
        </td>
        <td>
        <p>
            Perl
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class="emphasis"><em>LSB
            Imaging:</em></span></span>
        </p>
        </td>
        <td>
        <p>
            None
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class="emphasis"><em>LSB Gtk3 and
            LSB Graphics (Trial Use):</em></span></span>
        </p>
        </td>
        <td>
        <p>
            None
        </p>
        </td>
    </tr>
    </tbody>
</table>
<h3><a class="header" href="#packages-supplied-by-blfs-needed-to-satisfy-the-lsb-requirements" id="packages-supplied-by-blfs-needed-to-satisfy-the-lsb-requirements">Packages supplied by BLFS needed to satisfy the LSB Requirements</a></h3>
<table border="0" class="variablelist">
    <colgroup>
    <col align="left" valign="top" />
    <col />
    </colgroup>
    <tbody>
    <tr>
        <td>
        <p>
            <span class="term"><span class="emphasis"><em>LSB
            Core:</em></span></span>
        </p>
        </td>
        <td>
        <p>
            At, Batch (a part of At), Cpio, Ed, Fcrontab, Initd-tools,
            Lsb_release, NSPR, NSS, PAM, Pax, Sendmail (or Postfix or
            Exim), time
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class="emphasis"><em>LSB
            Desktop:</em></span></span>
        </p>
        </td>
        <td>
        <p>
            Alsa, ATK, Cairo, Desktop-file-utils, Freetype, Fontconfig,
            Gdk-pixbuf, Glib2, GTK+2, Icon-naming-utils, Libjpeg-turbo,
            Libpng, Libtiff, Libxml2, MesaLib, Pango, Xdg-utils, Xorg
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class="emphasis"><em>LSB Runtime
            Languages:</em></span></span>
        </p>
        </td>
        <td>
        <p>
            Python, Libxml2, Libxslt
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class="emphasis"><em>LSB
            Imaging:</em></span></span>
        </p>
        </td>
        <td>
        <p>
            CUPS, Cups-filters, Ghostscript, SANE
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class="emphasis"><em>LSB Gtk3 and
            LSB Graphics (Trial Use):</em></span></span>
        </p>
        </td>
        <td>
        <p>
            GTK+3
        </p>
        </td>
    </tr>
    </tbody>
</table>
<h3><a class="header" href="#packages-not-supplied-by-lfs-or-blfs-needed-to-satisfy-the-lsb-requirements" id="packages-not-supplied-by-lfs-or-blfs-needed-to-satisfy-the-lsb-requirements">Packages not supplied by LFS or BLFS needed to satisfy the LSB Requirements</a></h3>
<table border="0" class="variablelist">
    <colgroup>
    <col align="left" valign="top" />
    <col />
    </colgroup>
    <tbody>
    <tr>
        <td>
        <p>
            <span class="term"><span class="emphasis"><em>LSB
            Core:</em></span></span>
        </p>
        </td>
        <td>
        <p>
            None
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class="emphasis"><em>LSB
            Desktop:</em></span></span>
        </p>
        </td>
        <td>
        <p>
            Qt4 (but Qt5 is provided)
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class="emphasis"><em>LSB Runtime
            Languages:</em></span></span>
        </p>
        </td>
        <td>
        <p>
            None
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class="emphasis"><em>LSB
            Imaging:</em></span></span>
        </p>
        </td>
        <td>
        <p>
            None
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class="emphasis"><em>LSB Gtk3 and
            LSB Graphics (Trial Use):</em></span></span>
        </p>
        </td>
        <td>
        <p>
            None
        </p>
        </td>
    </tr>
    </tbody>
</table>
<h1><a class="header" href="#rationale-for-packages-in-the-book" id="rationale-for-packages-in-the-book">Rationale for Packages in the Book</a></h1>
<p>As stated earlier, the goal of LFS is to build a complete and usable foundation-level system. This includes all packages needed to replicate itself while providing a relatively minimal base from which to customize a more complete system based on the choices of the user. This does not mean that LFS is the smallest system possible. Several important packages are included that are not strictly required. The lists below document the rationale for each package in the book.</p>
<ul>
<li><strong>Acl</strong></li>
</ul>
<p>This package contains utilities to administer Access Control Lists, which are used to define more fine-grained discretionary access rights for files and directories.</p>
<ul>
<li><strong>Attr</strong></li>
</ul>
<p>This package contains programs for administering extended attributes on filesystem objects.</p>
<ul>
<li><strong>Autoconf</strong></li>
</ul>
<p>This package contains programs for producing shell scripts that can automatically configure source code from a developer's template. It is often needed to rebuild a package after updates to the build procedures.</p>
<ul>
<li><strong>Automake</strong></li>
</ul>
<p>This package contains programs for generating Make files from a template. It is often needed to rebuild a package after updates to the build procedures.</p>
<ul>
<li><strong>Bash</strong></li>
</ul>
<p>This package satisfies an LSB core requirement to provide a Bourne Shell interface to the system. It was chosen over other shell packages because of its common usage and extensive capabilities beyond basic shell functions.</p>
<ul>
<li><strong>Bc</strong></li>
</ul>
<p>This package provides an arbitrary precision numeric processing language. It satisfies a requirement needed when building the Linux kernel.</p>
<ul>
<li><strong>Binutils</strong></li>
</ul>
<p>This package contains a linker, an assembler, and other tools for handling object files. The programs in this package are needed to compile most of the packages in an LFS system and beyond.</p>
<ul>
<li><strong>Bison</strong></li>
</ul>
<p>This package contains the GNU version of yacc (Yet Another Compiler Compiler) needed to build several other LFS programs.</p>
<ul>
<li><strong>Bzip2</strong></li>
</ul>
<p>This package contains programs for compressing and decompressing files. It is required to decompress many LFS packages.</p>
<ul>
<li><strong>Check</strong></li>
</ul>
<p>This package contains a test harness for other programs. It is only installed in the temporary toolchain.</p>
<ul>
<li><strong>Coreutils</strong></li>
</ul>
<p>This package contains a number of essential programs for viewing and manipulating files and directories. These programs are needed for command line file management, and are necessary for the installation procedures of every package in LFS.</p>
<ul>
<li><strong>D-Bus</strong></li>
</ul>
<p>This package contains programs to implement a message bus system, which a simple way for applications to talk to one another.</p>
<ul>
<li><strong>DejaGNU</strong></li>
</ul>
<p>This package contains a framework for testing other programs. It is only installed in the temporary toolchain.</p>
<ul>
<li><strong>Diffutils</strong></li>
</ul>
<p>This package contains programs that show the differences between files or directories. These programs can be used to create patches, and are also used in many packages' build procedures.</p>
<ul>
<li><strong>E2fsprogs</strong></li>
</ul>
<p>This package contains the utilities for handling the ext2, ext3 and ext4 file systems. These are the most common and thoroughly tested file systems that Linux supports.</p>
<ul>
<li><strong>Expat</strong></li>
</ul>
<p>This package contains a relatively small XML parsing library. It is required by the XML::Parser Perl module.</p>
<ul>
<li><strong>Expect</strong></li>
</ul>
<p>This package contains a program for carrying out scripted dialogues with other interactive programs. It is commonly used for testing other packages. It is only installed in the temporary toolchain.</p>
<ul>
<li><strong>File</strong></li>
</ul>
<p>This package contains a utility for determining the type of a given file or files. A few packages need it to build.</p>
<ul>
<li><strong>Findutils</strong></li>
</ul>
<p>This package contains programs to find files in a file system. It is used in many packages' build scripts.</p>
<ul>
<li><strong>Flex</strong></li>
</ul>
<p>This package contains a utility for generating programs that recognize patterns in text. It is the GNU version of the lex (lexical analyzer) program. It is required to build several LFS packages.</p>
<ul>
<li><strong>Gawk</strong></li>
</ul>
<p>This package contains programs for manipulating text files. It is the GNU version of awk (Aho-Weinberg-Kernighan). It is used in many other packages' build scripts.</p>
<ul>
<li><strong>Gcc</strong></li>
</ul>
<p>This package is the Gnu Compiler Collection. It contains the C and C++ compilers as well as several others not built by LFS.</p>
<ul>
<li><strong>GDBM</strong></li>
</ul>
<p>This package contains the GNU Database Manager library. It is used by one other LFS package, Man-DB.</p>
<ul>
<li><strong>Gettext</strong></li>
</ul>
<p>This package contains utilities and libraries for internationalization and localization of numerous packages.</p>
<ul>
<li>*<em>Glibc</em></li>
</ul>
<p>This package contains the main C library. Linux programs would not run without it.</p>
<ul>
<li><strong>GMP</strong></li>
</ul>
<p>This package contains math libraries that provide useful functions for arbitrary precision arithmetic. It is required to build Gcc.</p>
<ul>
<li><strong>Gperf</strong></li>
</ul>
<p>This package contains a program that generates a perfect hash function from a key set. It is required for Eudev.</p>
<ul>
<li><strong>Grep</strong></li>
</ul>
<p>This package contains programs for searching through files. These programs are used by most packages' build scripts.</p>
<ul>
<li><strong>Groff</strong></li>
</ul>
<p>This package contains programs for processing and formatting text. One important function of these programs is to format man pages.</p>
<ul>
<li><strong>GRUB</strong></li>
</ul>
<p>This package is the Grand Unified Boot Loader. It is one of several boot loaders available, but is the most flexible.</p>
<ul>
<li><strong>Gzip</strong></li>
</ul>
<p>This package contains programs for compressing and decompressing files. It is needed to decompress many packages in LFS and beyond.</p>
<ul>
<li><strong>Iana-etc</strong></li>
</ul>
<p>This package provides data for network services and protocols. It is needed to enable proper networking capabilities.</p>
<ul>
<li><strong>Inetutils</strong></li>
</ul>
<p>This package contains programs for basic network administration.</p>
<ul>
<li><strong>Intltool</strong></li>
</ul>
<p>This package contains tools for extracting translatable strings from source files.</p>
<ul>
<li><strong>IProute2</strong></li>
</ul>
<p>This package contains programs for basic and advanced IPv4 and IPv6 networking. It was chosen over the other common network tools package (net-tools) for its IPv6 capabilities.</p>
<ul>
<li><strong>Kbd</strong></li>
</ul>
<p>This package contains key-table files, keyboard utilities for non-US keyboards, and a number of console fonts.</p>
<ul>
<li><strong>Kmod</strong></li>
</ul>
<p>This package contains programs needed to administer Linux kernel modules.</p>
<ul>
<li><strong>Less</strong></li>
</ul>
<p>This package contains a very nice text file viewer that allows scrolling up or down when viewing a file. It is also used by Man-DB for viewing manpages.</p>
<ul>
<li><strong>Libcap</strong></li>
</ul>
<p>This package implements the user-space interfaces to the POSIX 1003.1e capabilities available in Linux kernels.</p>
<ul>
<li><strong>Libelf</strong></li>
</ul>
<p>The elfutils project provides libraries and tools for ELF files and DWARF data. Most utilities in this package are available in other packages, but the library is needed to build the Linux kernel using the default (and most efficient) configuration.</p>
<ul>
<li><strong>Libffi</strong></li>
</ul>
<p>This package implements a portable, high level programming interface to various calling conventions. Some programs may not know at the time of compilation what arguments are to be passed to a function. For instance, an interpreter may be told at run-time about the number and types of arguments used to call a given function. Libffi can be used in such programs to provide a bridge from the interpreter program to compiled code.</p>
<ul>
<li><strong>Libpipeline</strong></li>
</ul>
<p>The Libpipeline package contains a library for manipulating pipelines of subprocesses in a flexible and convenient way. It is required by the Man-DB package.</p>
<ul>
<li><strong>Libtool</strong></li>
</ul>
<p>This package contains the GNU generic library support script. It wraps the complexity of using shared libraries in a consistent, portable interface. It is needed by the test suites in other LFS packages.</p>
<ul>
<li><strong>Linux Kernel</strong></li>
</ul>
<p>This package is the Operating System. It is the Linux in the GNU/Linux environment.</p>
<ul>
<li><strong>M4</strong></li>
</ul>
<p>This package contains a general text macro processor useful as a build tool for other programs.</p>
<ul>
<li><strong>Make</strong></li>
</ul>
<p>This package contains a program for directing the building of packages. It is required by almost every package in LFS.</p>
<ul>
<li><strong>Man-DB</strong></li>
</ul>
<p>This package contains programs for finding and viewing man pages. It was chosen instead of the man package due to superior internationalization capabilities. It supplies the man program.</p>
<ul>
<li><strong>Man-pages</strong></li>
</ul>
<p>This package contains the actual contents of the basic Linux man pages.</p>
<ul>
<li><strong>Meson</strong></li>
</ul>
<p>This package provides a software tool for automating the building of software. The main goal for Meson is to minimize the amount of time that software developers need to spend configuring their build system.</p>
<ul>
<li><strong>MPC</strong></li>
</ul>
<p>This package contains functions for the arithmetic of complex numbers. It is required by Gcc.</p>
<ul>
<li><strong>MPFR</strong></li>
</ul>
<p>This package contains functions for multiple precision arithmetic. It is required by Gcc.</p>
<ul>
<li><strong>Ninja</strong></li>
</ul>
<p>This package contains a small build system with a focus on speed. It is designed to have its input files generated by a higher-level build system, and to run builds as fast as possible.</p>
<ul>
<li><strong>Ncurses</strong></li>
</ul>
<p>This package contains libraries for terminal-independent handling of character screens. It is often used to provide cursor control for a menuing system. It is needed by a number of packages in LFS.</p>
<ul>
<li><strong>Openssl</strong></li>
</ul>
<p>This package provides management tools and libraries relating to cryptography. These are useful for providing cryptographic functions to other packages, including the Linux kernel.</p>
<ul>
<li><strong>Patch</strong></li>
</ul>
<p>This package contains a program for modifying or creating files by applying a patch file typically created by the diff program. It is needed by the build procedure for several LFS packages.</p>
<ul>
<li><strong>Perl</strong></li>
</ul>
<p>This package is an interpreter for the runtime language PERL. It is needed for the installation and test suites of several LFS packages.</p>
<ul>
<li><strong>Pkg-config</strong></li>
</ul>
<p>This package provides a program to return meta-data about an installed library or package.</p>
<ul>
<li><strong>Procps-NG</strong></li>
</ul>
<p>This package contains programs for monitoring processes. These programs are useful for system administration, and are also used by the LFS Bootscripts.</p>
<ul>
<li><strong>Psmisc</strong></li>
</ul>
<p>This package contains programs for displaying information about running processes. These programs are useful for system administration.</p>
<ul>
<li><strong>Python 3</strong></li>
</ul>
<p>This package provides an interpreted language that has a design philosophy that emphasizes code readability.</p>
<ul>
<li><strong>Readline</strong></li>
</ul>
<p>This package is a set of libraries that offers command-line editing and history capabilities. It is used by Bash.</p>
<ul>
<li><strong>Sed</strong></li>
</ul>
<p>This package allows editing of text without opening it in a text editor. It is also needed by most LFS packages' configure scripts.</p>
<ul>
<li><strong>Shadow</strong></li>
</ul>
<p>This package contains programs for handling passwords in a secure way.</p>
<ul>
<li><strong>Systemd</strong></li>
</ul>
<p>This package provides an init program and several additional boot and system control capabilities as an alternative to Sysvinit. It is used by many commercial distributions.</p>
<ul>
<li><strong>Tar</strong></li>
</ul>
<p>This package provides archiving and extraction capabilities of virtually all packages used in LFS.</p>
<ul>
<li><strong>Tcl</strong></li>
</ul>
<p>This package contains the Tool Command Language used in many test suites in LFS packages. It is only installed in the temporary toolchain.</p>
<ul>
<li><strong>Texinfo</strong></li>
</ul>
<p>This package contains programs for reading, writing, and converting info pages. It is used in the installation procedures of many LFS packages.</p>
<ul>
<li><strong>Util-linux</strong></li>
</ul>
<p>This package contains miscellaneous utility programs. Among them are utilities for handling file systems, consoles, partitions, and messages.</p>
<ul>
<li><strong>Vim</strong></li>
</ul>
<p>This package contains an editor. It was chosen because of its compatibility with the classic vi editor and its huge number of powerful capabilities. An editor is a very personal choice for many users and any other editor could be substituted if desired.</p>
<ul>
<li><strong>XML::Parser</strong></li>
</ul>
<p>This package is a Perl module that interfaces with Expat.</p>
<ul>
<li><strong>XZ Utils</strong></li>
</ul>
<p>This package contains programs for compressing and decompressing files. It provides the highest compression generally available and is useful for decompressing packages in XZ or LZMA format.</p>
<ul>
<li><strong>Zlib</strong></li>
</ul>
<p>This package contains compression and decompression routines used by some programs.</p>
<h1><a class="header" href="#prerequisites" id="prerequisites">Prerequisites</a></h1>
<p>Building an LFS system is not a simple task. It requires a certain level of existing knowledge of Unix system administration in order to resolve problems and correctly execute the commands listed. In particular, as an absolute minimum, you should already have the ability to use the command line (shell) to copy or move files and directories, list directory and file contents, and change the current directory. It is also expected that you have a reasonable knowledge of using and installing Linux software.</p>
<p>Because the LFS book assumes at least this basic level of skill, the various LFS support forums are unlikely to be able to provide you with much assistance in these areas. You will find that your questions regarding such basic knowledge will likely go unanswered or you will simply be referred to the LFS essential pre-reading list.</p>
<p>Before building an LFS system, we recommend reading the following:</p>
<ul>
    <li class="listitem">
    <p>
        Software-Building-HOWTO <a class="ulink" href=
        "Software Building HOWTO">http://www.tldp.org/HOWTO/Software-Building-HOWTO.html</a>
    </p>
    <p>
        This is a comprehensive guide to building and installing
        <span class="quote">&ldquo;<span class=
        "quote">generic</span>&rdquo;</span> Unix software packages
        under Linux. Although it was written some time ago, it still
        provides a good summary of the basic techniques needed to build
        and install software.
    </p>
    </li>
    <li class="listitem">
    <p>
        Beginner's Guide to Installing from Source <a class="ulink"
        href=
        "Beginners Installing from Source">http://moi.vonos.net/linux/beginners-installing-from-source/</a>
    </p>
    <p>
        This guide provides a good summary of basic skills and
        techniques needed to build software from source code.
    </p>
    </li>
</ul>
<h1><a class="header" href="#typography" id="typography">Typography</a></h1>
<p>To make things easier to follow, there are a few typographical conventions used throughout this book. This section contains some examples of the typographical format found throughout Linux From Scratch.</p>
<pre><code class="language-sh">./configure --prefix=/usr
</code></pre>
<p>This form of text is designed to be typed exactly as seen unless otherwise noted in the surrounding text. It is also used in the explanation sections to identify which of the commands is being referenced.</p>
<p>In some cases, a logical line is extended to two or more physical lines with a backslash at the end of the line.</p>
<pre><code class="language-sh">CC=&quot;gcc -B/usr/bin/&quot; ../binutils-2.18/configure \
  --prefix=/tools --disable-nls --disable-werror
</code></pre>
<p>Note that the backslash must be followed by an immediate return. Other whitespace characters like spaces or tab characters will create incorrect results.</p>
<pre><code class="language-sh">install-info: unknown option '--dir-file=/mnt/lfs/usr/info/dir'
</code></pre>
<p>This form of text (fixed-width text) shows screen output, usually as the result of commands issued. This format is also used to show filenames, such as <code>/etc/ld.so.conf</code>.</p>
<p><em>Emphasis</em></p>
<p>This form of text is used for several purposes in the book. Its main purpose is to emphasize important points or items.</p>
<p><a href="http://www.linuxfromscratch.org/">linuxfromscratch.org</a></p>
<p>This format is used for hyperlinks both within the LFS community and to external pages. It includes HOWTOs, download locations, and websites.</p>
<pre><code class="language-sh">cat &gt; $LFS/etc/group &lt;&lt; &quot;EOF&quot;
root:x:0:
bin:x:1:
......
EOF
</code></pre>
<p>This format is used when creating configuration files. The first command tells the system to create the file $LFS/etc/group from whatever is typed on the following lines until the sequence End Of File (EOF) is encountered. Therefore, this entire section is generally typed as seen.</p>
<p><code>&lt;REPLACED TEXT&gt;</code></p>
<p>This format is used to encapsulate text that is not to be typed as seen or for copy-and-paste operations.</p>
<p><code>[OPTIONAL TEXT]</code></p>
<p>This format is used to encapsulate text that is optional.</p>
<p><code>passwd(5)</code>
This format is used to refer to a specific manual (man) page. The number inside parentheses indicates a specific section inside the manuals. For example, <strong>passwd</strong> has two man pages. Per LFS installation instructions, those two man pages will be located at <code>/usr/share/man/man1/passwd.1</code> and <code>/usr/share/man/man5/passwd.5</code>. When the book uses passwd(5) it is specifically referring to <code>/usr/share/man/man5/passwd.5</code>. <strong>man passwd</strong> will print the first man page it finds that matches “passwd”, which will be <code>/usr/share/man/man1/passwd.1</code>. For this example, you will need to run <strong>man 5 passwd</strong> in order to read the specific page being referred to. It should be noted that most man pages do not have duplicate page names in different sections. Therefore, <strong>man <em>program name</em></strong> is generally sufficient.</p>
<h1><a class="header" href="#structure" id="structure">Structure</a></h1>
<p>This book is divided into the following parts.</p>
<h1><a class="header" href="#part-i---introduction" id="part-i---introduction">Part I - Introduction</a></h1>
<p>Part I explains a few important notes on how to proceed with the LFS installation. This section also provides meta-information about the book.</p>
<pre><code class="language-text">1. Introduction
    How to Build an LFS System
    What's new since the last release
    Changelog
    Resources
    Help
</code></pre>
<h1><a class="header" href="#part-ii---preparing-for-the-build" id="part-ii---preparing-for-the-build">Part II - Preparing for the Build</a></h1>
<p>Part II describes how to prepare for the building process—making a partition, downloading the packages, and compiling temporary tools.</p>
<pre><code class="language-text">2. Preparing the Host System
3. Packages and Patches
4. Final Preparations
5. Constructing a Temporary System
</code></pre>
<h1><a class="header" href="#part-iii---building-the-lfs-system" id="part-iii---building-the-lfs-system">Part III - Building the LFS System</a></h1>
<p>Part III guides the reader through the building of the LFS system—compiling and installing all the packages one by one, setting up the boot scripts, and installing the kernel. The resulting Linux system is the foundation on which other software can be built to expand the system as desired. At the end of this book, there is an easy to use reference listing all of the programs, libraries, and important files that have been installed.</p>
<pre><code class="language-text">6. Installing Basic System Software
7. System Configuration
8. Making the LFS System Bootable
9. The End
</code></pre>
<h1><a class="header" href="#errata" id="errata">Errata</a></h1>
<p>The software used to create an LFS system is constantly being updated and enhanced. Security warnings and bug fixes may become available after the LFS book has been released. To check whether the package versions or instructions in this release of LFS need any modifications to accommodate security vulnerabilities or other bug fixes, please visit <a href="http://www.linuxfromscratch.org/lfs/errata/stable-systemd/"><strong>lfs systemd</strong></a> before proceeding with your build. You should note any changes shown and apply them to the relevant section of the book as you progress with building the LFS system.</p>
<h1><a class="header" href="#introduction" id="introduction">Introduction</a></h1>
<h3><a class="header" href="#table-of-contents-1" id="table-of-contents-1">Table of Contents</a></h3>
<ul>
<li>
<p><a href="01-introduction/./01-How-to-Build-an-LFS-System.html">How to Build an LFS System</a></p>
</li>
<li>
<p><a href="01-introduction/./02-Whats-new-since-the-last-release.html">What's new since the last release</a></p>
</li>
<li>
<p><a href="01-introduction/./03-Changelog.html">Changelog</a></p>
</li>
<li>
<p><a href="01-introduction/./04-Resources.html">Resources</a></p>
</li>
<li>
<p><a href="01-introduction/./05-Help.html">Help</a></p>
</li>
</ul>
<h1><a class="header" href="#how-to-build-an-lfs-system" id="how-to-build-an-lfs-system">How to Build an LFS System</a></h1>
<p>The LFS system will be built by using an already installed Linux distribution (such as Debian, OpenMandriva, Fedora, or openSUSE). This existing Linux system (the host) will be used as a starting point to provide necessary programs, including a compiler, linker, and shell, to build the new system. Select the “development” option during the distribution installation to be able to access these tools.</p>
<p>As an alternative to installing a separate distribution onto your machine, you may wish to use a LiveCD from a commercial distribution.</p>
<p><a href="01-introduction/.././02-Preparing-the-Host-System/index.html">Chapter 2</a> of this book describes how to create a new Linux native partition and file system. This is the place where the new LFS system will be compiled and installed. <a href="01-introduction/.././03-Packages-and-Patches/index.html">Chapter 3</a> explains which packages and patches need to be downloaded to build an LFS system and how to store them on the new file system. <a href="01-introduction/.././04-Final-Preparations/index.html">Chapter 4</a> discusses the setup of an appropriate working environment. Please read <a href="01-introduction/.././04-Final-Preparations/index.html">Chapter 4</a> carefully as it explains several important issues you need be aware of before beginning to work your way through <a href="01-introduction/.././05-Constructing-a-Temporary-System/index.html">Chapter 5</a> and beyond.</p>
<p><a href="01-introduction/.././05-Constructing-a-Temporary-System/index.html">Chapter 5</a> explains the installation of a number of packages that will form the basic development suite (or toolchain) which is used to build the actual system in <a href="01-introduction/.././06-Installing-Basic-System-Software/index.html">Chapter 6.</a> Some of these packages are needed to resolve circular dependencies—for example, to compile a compiler, you need a compiler.</p>
<p><a href="01-introduction/.././05-Constructing-a-Temporary-System/index.html">Chapter 5</a> also shows you how to build a first pass of the toolchain, including Binutils and GCC (first pass basically means these two core packages will be reinstalled). The next step is to build Glibc, the C library. Glibc will be compiled by the toolchain programs built in the first pass. Then, a second pass of the toolchain will be built. This time, the toolchain will be dynamically linked against the newly built Glibc. The remaining <a href="01-introduction/.././05-Constructing-a-Temporary-System/index.html">Chapter 5</a> packages are built using this second pass toolchain. When this is done, the LFS installation process will no longer depend on the host distribution, with the exception of the running kernel.</p>
<p>This effort to isolate the new system from the host distribution may seem excessive. A full technical explanation as to why this is done is provided in <a href="01-introduction/.././05-Constructing-a-Temporary-System/02-Toolchain-Technical-Notes.html">Section 5.2, “Toolchain Technical Notes”</a>.</p>
<p>In <a href="01-introduction/.././06-Installing-Basic-System-Software/index.html">Chapter 6.</a>, the full LFS system is built. The chroot (change root) program is used to enter a virtual environment and start a new shell whose root directory will be set to the LFS partition. This is very similar to rebooting and instructing the kernel to mount the LFS partition as the root partition. The system does not actually reboot, but instead uses chroot because creating a bootable system requires additional work which is not necessary just yet. The major advantage is that “chrooting” allows you to continue using the host system while LFS is being built. While waiting for package compilations to complete, you can continue using your computer as normal.</p>
<p>To finish the installation, the basic system configuration is set up in <a href="01-introduction/.././07-System-Configuration/index.html">Chapter 7</a>, and the kernel and boot loader are set up in <a href="01-introduction/.././08-Making-the-LFS-System-Bootable/index.html">Chapter 8</a>. <a href="01-introduction/.././09-The-End/index.html">Chapter 9</a> contains information on continuing the LFS experience beyond this book. After the steps in this book have been implemented, the computer will be ready to reboot into the new LFS system.</p>
<p>This is the process in a nutshell. Detailed information on each step is discussed in the following chapters and package descriptions. Items that may seem complicated will be clarified, and everything will fall into place as you embark on the LFS adventure.</p>
<h1><a class="header" href="#whats-new-since-the-last-release" id="whats-new-since-the-last-release">What's new since the last release</a></h1>
<p>Below is a list of package updates made since the previous release of the book.</p>
<p><strong>Upgraded to:</strong></p>
<ul>
<li>Bash 5.0</li>
<li>Binutils-2.32</li>
<li>Bison-3.3.2</li>
<li>DejaGNU-1.6.2</li>
<li>D-Bus-1.12.12</li>
<li>Diffutils-3.7</li>
<li>E2fsprogs-1.44.5</li>
<li>File-5.36</li>
<li>GDBM-1.18.1</li>
<li>Glibc-2.29</li>
<li>Grep-3.3</li>
<li>Groff-1.22.4</li>
<li>Gzip-1.10</li>
<li>IPRoute2-4.20.0</li>
<li>Kmod-26</li>
<li>Libcap-2.26</li>
<li>Libelf-0.176 (from elfutils)</li>
<li>Libpipeline-1.5.1</li>
<li>Linux-4.20.12</li>
<li>Man-DB-2.8.5</li>
<li>Meson-0.49.2</li>
<li>MPFR-4.0.2</li>
<li>Ninja-1.9.0</li>
<li>Openssl-1.1.1a</li>
<li>Perl-5.28.1</li>
<li>Psmisc-23.2</li>
<li>Python-3.7.2</li>
<li>Readline-8.0</li>
<li>Sed-4.7</li>
<li>Systemd-240</li>
<li>Tar-1.31</li>
<li>Tcl-8.6.9</li>
<li>Tzdata-2018i</li>
<li>Util-Linux-2.33.1</li>
</ul>
<p><strong>Added:</strong></p>
<p><strong>Removed:</strong></p>
<h1><a class="header" href="#changelog" id="changelog">Changelog</a></h1>
<p>This is version 8.4-systemd of the Linux From Scratch book, dated Maarch 1, 2019. If this book is more than six months old, a newer and better version is probably already available. To find out, please check one of the <a href="http://www.linuxfromscratch.org/mirrors.html">mirrors</a>.</p>
<p>Below is a list of changes made since the previous release of the book.</p>
<p><strong>Changelog Entries:</strong></p>
<ul>
<li>
<p>2019-03-01</p>
<ul>
<li>[bdubbs] - LFS-8.4 released.</li>
</ul>
</li>
<li>
<p>2019-02-25</p>
<ul>
<li>[bdubbs] - Update to linux-4.20.12. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4425">#4425</a>.</li>
<li>[bdubbs] - Update to elfutils-0.176. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4426">#4426</a>.</li>
<li>[bdubbs] - Update to file-5.36. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4429">#4429</a>.</li>
<li>[renodr] - Add a security patch for systemd-240 to fix a PID1 crash over D-Bus. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4428">#4428</a>.</li>
</ul>
</li>
<li>
<p>2019-02-19</p>
<ul>
<li>[bdubbs] - Add an optional modification to the build procedure for ninja to allow use the the environment variable NINJAJOBS.</li>
</ul>
</li>
<li>
<p>2019-02-14</p>
<ul>
<li>[bdubbs] - Update to linux-4.20.8. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4423">#4423</a>.</li>
<li>[bdubbs] - Fix a problem when building Python in Chapter 5 where some hosts may use host dependent headers.</li>
</ul>
</li>
<li>
<p>2019-02-11</p>
<ul>
<li>
<p>[bdubbs] - Update to linux-4.20.7. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4421">#4421</a>.</p>
</li>
<li>
<p>Update to kmod-26. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4422">#4422</a>.</p>
</li>
<li>
<p>2019-02-08</p>
</li>
<li>
<ul>
<li>[renodr] - Update host system requirements.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>2019-02-06</p>
<ul>
<li>[bdubbs] - Simlify instructions for glibc in Chapter 5. Thanks to Romain Geissler for the report.</li>
</ul>
</li>
<li>
<p>2019-02-05</p>
<ul>
<li>[bdubbs] - Update to bison-3.3.2. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4418">#4419</a>.</li>
<li>[bdubbs] - Update to meson-0.49.2. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4418">#4420.</a></li>
</ul>
</li>
<li>
<p>2019-02-02</p>
</li>
</ul>
<ul>
<li>[bdubbs] - Fix psmisc URL. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4418">#4418</a>.</li>
<li>[bdubbs] - Update to binutils-2.32. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4417">#4417</a>.</li>
</ul>
<ul>
<li>
<p>2019-02-01</p>
<ul>
<li>[bdubbs] - Update to bison-3.3.1. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4412">#4412</a>.</li>
<li>[bdubbs] - Update to glibc-2.29. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4452">#4415</a>.</li>
<li>[bdubbs] - Update to libpipeline-1.5.1. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4413">#4413</a>.</li>
<li>[bdubbs] - Update to linux-4.20.6. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4409">#4409</a>.</li>
<li>[bdubbs] - Update to meson-0.49.1. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4410">#4410</a>.</li>
<li>[bdubbs] - Update to mpfr-4.0.2. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4416">#4416</a>.</li>
<li>[bdubbs] - Update to ninja-1.9.0. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4414">#4414</a>.</li>
</ul>
</li>
<li>
<p>2019-01-27</p>
<ul>
<li>[pierre] - Fix a bug introduced in tar-1.31, by adding a sed to the build instructions. Also remove an obsolete comment about a failing test.</li>
</ul>
</li>
<li>
<p>2019-01-20</p>
<ul>
<li>[renodr] - Regenerate the systemd man pages tarball with the Non-namespaced versions of the Docbook XSL Stylesheets.</li>
</ul>
</li>
<li>
<p>2019-01-27</p>
<ul>
<li>[renodr] - Add a security patch for systemd-240. This fixes CVE-2018-16865 and CVE-2018-16864 (memory corruption in journald leading to stack overflows / arbitrary code execution). Apply this as soon as you can. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4408">#4408</a>.</li>
</ul>
</li>
<li>
<p>2019-01-10</p>
<ul>
<li>[bdubbs] - Update to linux-4.20.1. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4398">#4398</a>.</li>
<li>[bdubbs] - Update to diffutils-3.7. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4401">#4401</a>.</li>
<li>[bdubbs] - Update to tar-1.31. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4402">#4402</a>.</li>
<li>[bdubbs] - Update to man-db-2.8.5. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4403">#4403</a>.</li>
<li>[bdubbs] - Update to bash-5.0. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4410">#4404</a>.</li>
<li>[bdubbs] - Update to readline-8.0. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4405">#4405</a>.</li>
<li>[bdubbs] - Update to iproute2-4.20.0. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4406">#4406</a>.</li>
<li>[bdubbs] - Update to util-linux-2.33.1. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4407">#4407</a>.</li>
</ul>
</li>
<li>
<p>2019-01-01</p>
<ul>
<li>[bdubbs] - Update to gzip-1.10. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4400">#4400</a>.</li>
<li>[bdubbs] - Update to tzdata-2018i. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4399">#4399</a>.</li>
</ul>
</li>
<li>
<p>2018-12-27</p>
<ul>
<li>[bdubbs] - Update to linux-4.19.12. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4389">#4389</a>.</li>
<li>[bdubbs] - Update to e2fsprogs-1.44.5. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4390">#4390</a>.</li>
<li>[bdubbs] - Update to bison-3.2.4. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4391">#4391</a>.</li>
<li>[bdubbs] - Update to sed-4.7. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4392">#4392</a>.</li>
<li>[bdubbs] - Update to grep-3.3. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4393">#4393</a>.</li>
<li>[bdubbs] - Update to systemd-240. Contains a critical fix for systemd-tmpfiles (privilege escalation). Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4394">#4394</a>.</li>
<li>[bdubbs] - Update to Python-3.7.2. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4395">#4395</a>.</li>
<li>[bdubbs] - Update to groff-1.22.4. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4396">#4396</a>.</li>
</ul>
</li>
<li>
<p>2018-12-12</p>
<ul>
<li>[renodr] - Add a note to libffi about optimizing for the specific CPU in use at compile time. Similar to GMP, this causes Illegal Operation errors if the installation is moved to another system.</li>
</ul>
</li>
<li>
<p>2018-12-01</p>
<ul>
<li>[bdubbs] - Move <code>/etc/bash_completions.d/grub</code> to a better location. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4385">#4385</a>.</li>
<li>[bdubbs] - Update to dejagnu-1.6.2. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4382">#4382</a>.</li>
<li>[bdubbs] - Update to linux-4.19.6. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4383">#4383</a>.</li>
<li>[bdubbs] - Update to perl-5.28.1. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4384">#4384</a>.</li>
</ul>
</li>
<li>
<p>2018-11-25</p>
<ul>
<li>[renodr] - Update to bison-3.2.2. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4380">#4380</a>.</li>
</ul>
</li>
<li>
<p>2018-11-24</p>
<ul>
<li>[dj] - Update to linux-4.19.4. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4381">#4381</a>.</li>
<li>[dj] - Update to systemd-239-6b4878d.</li>
<li>[dj] - Add &quot;wheel&quot; group to systemd groups.</li>
<li>[dj] - Add touch to the list of moved coreutils programs, and clarify necessity of the moves to meet FHS compliance.</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>2018-11-21</p>
<ul>
<li>[renodr] - Add &quot;wheel&quot; group to satisfy systemd requirements. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4376">#4376</a>.</li>
<li>[renodr] - Add a sed to fix a bug in autoconf's test suite. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4372">#4372</a>.</li>
<li>[renodr] - Update to tcl-8.6.9. Security update. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4375">#4375</a>.</li>
<li>[renodr] - Update to openssl-1.1.1a. This is a security update. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4379">#4379</a>.</li>
<li>[renodr] - Update to systemd-239-25d1ba1. This fixes three security problems in systemd. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4376">#4377</a>.</li>
<li>[renodr] - Update to linux-4.19.3. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4373">#4373</a>.</li>
<li>[renodr] - Update to elfutils-0.175. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4374">#4374</a>.</li>
</ul>
</li>
<li>
<p>2018-11-19</p>
<ul>
<li>[bdubbs] - Update to libcap-2.26. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4378">#4378</a>.</li>
</ul>
</li>
<li>
<p>2018-11-09</p>
<ul>
<li>[bdubbs] - Update to meson-0.48.2. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4371">#4371</a>.</li>
<li>[bdubbs] - Update to bison-3.2.1. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4370">#4370</a>.</li>
</ul>
</li>
<li>
<p>2018-11-06</p>
<ul>
<li>[bdubbs] - Update to bison-3.2. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4367">#4367</a>.</li>
<li>[bdubbs] - Update to linux-4.19.1. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4368">#4368</a>.</li>
<li>[bdubbs] - Update to tzdata-2018g. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4366">#4366</a>.</li>
<li>[bdubbs] - Update to util-linux-v2.33. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4353">#4353</a>.</li>
</ul>
</li>
<li>
<p>2018-10-29</p>
<ul>
<li>[dj] - Update to gdbm-1.18.1. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4364">#4364</a>.</li>
<li>[dj] - Update to Python-3.7.1. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4361">#4361</a>.</li>
</ul>
</li>
<li>
<p>2018-10-27</p>
<ul>
<li>[dj] - Update to iproute2-4.19.0. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4363">#4363</a>.</li>
<li>[dj] - Update to file-5.35. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4359">#4359</a>.</li>
<li>[dj] - Update to tzdata-2018f. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4358">#4358</a>.</li>
<li>[dj] - Update to meson-0.48.1. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4357">#4357</a>.</li>
<li>[dj] - Update to linux-4.19. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4356">#4356</a>.</li>
</ul>
</li>
<li>
<p>2018-10-10</p>
<ul>
<li>[dj] - Removed incorrect link to /toold/lib64 in systemd instructions. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4355">#4355</a>.</li>
<li>[dj] - Added systemd-239-meson-0.48.0_fixes-1.patch to resolve build errors with meson.</li>
<li>[dj] - Update to meson-0.48.0. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4351">#4351</a>.</li>
<li>[dj] - Update to linux-4.18.12. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4351">#4352</a>.</li>
</ul>
</li>
<li>
<p>2018-09-30</p>
<ul>
<li>[dj] - Restore build of Util-Linux in chapter5 to avoid reciprocal dependency for Systemd.</li>
<li>[dj] - Moved installation of Util-Linux and E2fsprogs after Procps to satisfy build order in the Systemd book. This has no effect on the SysV book.</li>
</ul>
</li>
<li>
<p>2018-09-20</p>
<ul>
<li>[bdubbs] - Clean up of unneeded symbolic links. Reordered packages so version specific packages are built as late as possible in Chapter 6. Now building util-linux in Chapter 5 is unneeded and has been removed. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4345">#4345</a> and <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4349">#4349</a>.</li>
<li>[bdubbs] - Update to elfutils-0.174 (libelf). Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4348">#4348</a>.</li>
<li>[bdubbs] - Update to psmisc-23.2. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4347">#4347</a>.</li>
<li>[bdubbs] - Update to openssl-1.1.1. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4346">#4346</a>.</li>
<li>[bdubbs] - Update to linux-4.18.9. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4344">#4344</a>.</li>
</ul>
</li>
<li>
<p>2018-09-02</p>
<ul>
<li>[bdubbs] - Update to bison-3.1. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4342">#4342</a>.</li>
<li>[bdubbs] - Update to meson-0.47.2. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4341">#4341</a>.</li>
<li>[bdubbs] - Update to gdbm-1.18. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4340">#4340</a>.</li>
<li>[bdubbs] - Update to e2fsprogs-1.44.4. Fixes <a href="http://wiki.linuxfromscratch.org/lfs/ticket/4338">#4338</a>.</li>
</ul>
</li>
<li>
<p>2018-09-01</p>
<ul>
<li>[bdubbs] - LFS-8.3 released.</li>
</ul>
</li>
</ul>
<h1><a class="header" href="#resources" id="resources">Resources</a></h1>
<h3><a class="header" href="#141-faq" id="141-faq">1.4.1. FAQ</a></h3>
<p>If during the building of the LFS system you encounter any errors, have any questions, or think there is a typo in the book, please start by consulting the <a href="http://www.linuxfromscratch.org/faq/">Frequently Asked Questions</a>.</p>
<h3><a class="header" href="#142-mailing-lists" id="142-mailing-lists">1.4.2. Mailing Lists</a></h3>
<p>The linuxfromscratch.org server hosts a number of mailing lists used for the development of the LFS project. These lists include the main development and support lists, among others. If the FAQ does not solve the problem you are having, the next step would be to search the <a href="http://www.linuxfromscratch.org/search.html">mailing lists</a>.</p>
<p>For information on the different lists, how to subscribe, archive locations, and additional information, visit <a href="http://www.linuxfromscratch.org/mail.html">LFS Mail</a>.</p>
<h3><a class="header" href="#143-irc" id="143-irc">1.4.3. IRC</a></h3>
<p>Several members of the LFS community offer assistance on Internet Relay Chat (IRC). Before using this support, please make sure that your question is not already answered in the LFS FAQ or the mailing list archives. You can find the IRC network at <code>irc.freenode.net</code>. The support channel is named #LFS-support.</p>
<h3><a class="header" href="#144-mirror-sites" id="144-mirror-sites">1.4.4. Mirror Sites</a></h3>
<p>The LFS project has a number of world-wide mirrors to make accessing the website and downloading the required packages more convenient. Please visit the <a href="http://www.linuxfromscratch.org/mirrors.html">LFS mirrors</a> for a list of current mirrors.</p>
<h3><a class="header" href="#145-contact-information" id="145-contact-information">1.4.5. Contact Information</a></h3>
<p>Please direct all your questions and comments to one of the LFS mailing lists (see above).</p>
<h1><a class="header" href="#help" id="help">Help</a></h1>
<p>If an issue or a question is encountered while working through this book, please check the <a href="http://www.linuxfromscratch.org/faq/#generalfaq.">FAQ</a>. Questions are often already answered there. If your question is not answered on this page, try to find the source of the problem. This <a href="http://www.linuxfromscratch.org/hints/downloads/files/errors.txt">hint</a> will give you some guidance for troubleshooting.</p>
<p>If you cannot find your problem listed in the FAQ, search the <a href="http://www.linuxfromscratch.org/search.html">mailing lists</a>.</p>
<p>We also have a wonderful LFS community that is willing to offer assistance through the mailing lists and IRC (see the <a href="01-introduction/./04-Resources.html">Section 1.4, “Resources”</a> section of this book). However, we get several support questions every day and many of them can be easily answered by going to the FAQ and by searching the mailing lists first. So, for us to offer the best assistance possible, you need to do some research on your own first. That allows us to focus on the more unusual support needs. If your searches do not produce a solution, please include all relevant information (mentioned below) in your request for help.</p>
<h3><a class="header" href="#151-things-to-mention" id="151-things-to-mention">1.5.1. Things to Mention</a></h3>
<p>Apart from a brief explanation of the problem being experienced, the essential things to include in any request for help are:</p>
<ul>
<li>The version of the book being used (in this case 8.4-systemd)</li>
<li>The host distribution and version being used to create LFS</li>
<li>The output from the Host System Requirements script</li>
<li>The package or section the problem was encountered in</li>
<li>The exact error message or symptom being received</li>
<li>Note whether you have deviated from the book at all</li>
</ul>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>Deviating from this book does <em>not</em> mean that we will not help you. After all, LFS is about personal preference. Being upfront about any changes to the established procedure helps us evaluate and determine possible causes of your problem.</p>
</blockquote>
</blockquote>
<h3><a class="header" href="#152-configure-script-problems" id="152-configure-script-problems">1.5.2. Configure Script Problems</a></h3>
<p>If something goes wrong while running the <strong>configure</strong> script, review the <code>config.log</code> file. This file may contain errors encountered during <strong>configure</strong> which were not printed to the screen. Include the <em>relevant</em> lines if you need to ask for help.</p>
<h3><a class="header" href="#153-compilation-problems" id="153-compilation-problems">1.5.3. Compilation Problems</a></h3>
<p>Both the screen output and the contents of various files are useful in determining the cause of compilation problems. The screen output from the <strong>configure</strong> script and the <strong>make</strong> run can be helpful. It is not necessary to include the entire output, but do include enough of the relevant information. Below is an example of the type of information to include from the screen output from <strong>make</strong>:</p>
<pre><code class="language-sh">gcc -DALIASPATH=\&quot;/mnt/lfs/usr/share/locale:.\&quot;
-DLOCALEDIR=\&quot;/mnt/lfs/usr/share/locale\&quot;
-DLIBDIR=\&quot;/mnt/lfs/usr/lib\&quot;
-DINCLUDEDIR=\&quot;/mnt/lfs/usr/include\&quot; -DHAVE_CONFIG_H -I. -I.
-g -O2 -c getopt1.c
gcc -g -O2 -static -o make ar.o arscan.o commands.o dir.o
expand.o file.o function.o getopt.o implicit.o job.o main.o
misc.o read.o remake.o rule.o signame.o variable.o vpath.o
default.o remote-stub.o version.o opt1.o
-lutil job.o: In function `load_too_high':
/lfs/tmp/make-3.79.1/job.c:1565: undefined reference
to `getloadavg'
collect2: ld returned 1 exit status
make[2]: *** [make] Error 1
make[2]: Leaving directory `/lfs/tmp/make-3.79.1'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/lfs/tmp/make-3.79.1'
make: *** [all-recursive-am] Error 2
</code></pre>
<p>In this case, many people would just include the bottom section:</p>
<pre><code class="language-sh">make [2]: *** [make] Error 1
</code></pre>
<p>This is not enough information to properly diagnose the problem because it only notes that something went wrong, not <em>what</em> went wrong. The entire section, as in the example above, is what should be saved because it includes the command that was executed and the associated error message(s).</p>
<p>An excellent article about asking for help on the Internet is available online at <a href="http://catb.org/%7Eesr/faqs/smart-questions.html">smart questions</a>. Read and follow the hints in this document to increase the likelihood of getting the help you need.</p>
<h1><a class="header" href="#preparing-the-host-system" id="preparing-the-host-system">Preparing the Host System</a></h1>
<h3><a class="header" href="#table-of-contents-2" id="table-of-contents-2">Table of Contents</a></h3>
<ul>
<li>
<p><a href="02-Preparing-the-Host-System/./01-Introduction.html">Introduction</a></p>
</li>
<li>
<p><a href="02-Preparing-the-Host-System/./02-Host-System-Requirements.html">Host System Requirements</a></p>
</li>
<li>
<p><a href="02-Preparing-the-Host-System/./03-Building-LFS-in-Stages.html">Building LFS in Stages</a></p>
</li>
<li>
<p><a href="02-Preparing-the-Host-System/./04-Creating-a-New-Partition.html">Creating a New Partition</a></p>
</li>
<li>
<p><a href="02-Preparing-the-Host-System/./05-Creating-a-File-System-on-the-Partition.html">Creating a File System on the Partition</a></p>
</li>
<li>
<p><a href="02-Preparing-the-Host-System/./06-Setting-The-$LFS-Variable.html">Setting The $LFS Variable</a></p>
</li>
<li>
<p><a href="02-Preparing-the-Host-System/./07-Mounting-the-New-Partition.html">Mounting the New Partition</a></p>
</li>
</ul>
<h1><a class="header" href="#introduction-1" id="introduction-1">Introduction</a></h1>
<p>In this chapter, the host tools needed for building LFS are checked and, if necessary, installed. Then a partition which will host the LFS system is prepared. We will create the partition itself, create a file system on it, and mount it.</p>
<h1><a class="header" href="#host-system-requirements" id="host-system-requirements">Host System Requirements</a></h1>
<p>Your host system should have the following software with the minimum versions indicated. This should not be an issue for most modern Linux distributions. Also note that many distributions will place software headers into separate packages, often in the form of “<package-name>-devel” or “<package-name>-dev”. Be sure to install those if your distribution provides them.</p>
<p>Earlier versions of the listed software packages may work, but have not been tested.</p>
<ul class="compact">
    <li class="listitem">
    <p>
        <span class="strong"><strong>Bash-3.2</strong></span> (/bin/sh
        should be a symbolic or hard link to bash)
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>Binutils-2.25</strong></span>
        (Versions greater than 2.32 are not recommended as they have
        not been tested)
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>Bison-2.7</strong></span>
        (/usr/bin/yacc should be a link to bison or small script that
        executes bison)
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>Bzip2-1.0.4</strong></span>
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>Coreutils-6.9</strong></span>
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>Diffutils-2.8.1</strong></span>
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>Findutils-4.2.31</strong></span>
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>Gawk-4.0.1</strong></span>
        (/usr/bin/awk should be a link to gawk)
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>GCC-5.2</strong></span> including
        the C++ compiler, <span class=
        "command"><strong>g++</strong></span> (Versions greater than
        8.2.0 are not recommended as they have not been tested)
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>Glibc-2.11</strong></span>
        (Versions greater than 2.29 are not recommended as they have
        not been tested)
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>Grep-2.5.1a</strong></span>
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>Gzip-1.3.12</strong></span>
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>Linux Kernel-3.2</strong></span>
    </p>
    <p>
        The reason for the kernel version requirement is that we
        specify that version when building <span class=
        "application">glibc</span> in Chapter&nbsp;6 at the
        recommendation of the developers. It is also required by udev.
    </p>
    <p>
        If the host kernel is earlier than 3.2 you will need to replace
        the kernel with a more up to date version. There are two ways
        you can go about this. First, see if your Linux vendor provides
        a 3.2 or later kernel package. If so, you may wish to install
        it. If your vendor doesn't offer an acceptable kernel package,
        or you would prefer not to install it, you can compile a kernel
        yourself. Instructions for compiling the kernel and configuring
        the boot loader (assuming the host uses GRUB) are located in
        <a class="xref" href="02-Preparing-the-Host-System/../chapter08/chapter08.html" title=
        "Chapter&nbsp;8.&nbsp;Making the LFS System Bootable">Chapter&nbsp;8</a>.
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>M4-1.4.10</strong></span>
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>Make-4.0</strong></span>
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>Patch-2.5.4</strong></span>
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>Perl-5.8.8</strong></span>
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>Python-3.4</strong></span>
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>Sed-4.1.5</strong></span>
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>Tar-1.22</strong></span>
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>Texinfo-4.7</strong></span>
    </p>
    </li>
    <li class="listitem">
    <p>
        <span class="strong"><strong>Xz-5.0.0</strong></span>
    </p>
    </li>
</ul>
<blockquote>
<p><strong>Important</strong></p>
<blockquote>
<p>Note that the symlinks mentioned above are required to build an LFS system using the instructions contained within this book. Symlinks that point to other software (such as dash, mawk, etc.) may work, but are not tested or supported by the LFS development team, and may require either deviation from the instructions or additional patches to some packages.</p>
</blockquote>
</blockquote>
<p>To see whether your host system has all the appropriate versions, and the ability to compile programs, run the following:</p>
<pre><code class="language-sh">cat &gt; version-check.sh &lt;&lt; &quot;EOF&quot;
#!/bin/bash
# Simple script to list version numbers of critical development tools
export LC_ALL=C
bash --version | head -n1 | cut -d&quot; &quot; -f2-4
MYSH=$(readlink -f /bin/sh)
echo &quot;/bin/sh -&gt; $MYSH&quot;
echo $MYSH | grep -q bash || echo &quot;ERROR: /bin/sh does not point to bash&quot;
unset MYSH

echo -n &quot;Binutils: &quot;; ld --version | head -n1 | cut -d&quot; &quot; -f3-
bison --version | head -n1

if [ -h /usr/bin/yacc ]; then
  echo &quot;/usr/bin/yacc -&gt; `readlink -f /usr/bin/yacc`&quot;;
elif [ -x /usr/bin/yacc ]; then
  echo yacc is `/usr/bin/yacc --version | head -n1`
else
  echo &quot;yacc not found&quot;
fi

bzip2 --version 2&gt;&amp;1 &lt; /dev/null | head -n1 | cut -d&quot; &quot; -f1,6-
echo -n &quot;Coreutils: &quot;; chown --version | head -n1 | cut -d&quot;)&quot; -f2
diff --version | head -n1
find --version | head -n1
gawk --version | head -n1

if [ -h /usr/bin/awk ]; then
  echo &quot;/usr/bin/awk -&gt; `readlink -f /usr/bin/awk`&quot;;
elif [ -x /usr/bin/awk ]; then
  echo awk is `/usr/bin/awk --version | head -n1`
else
  echo &quot;awk not found&quot;
fi

gcc --version | head -n1
g++ --version | head -n1
ldd --version | head -n1 | cut -d&quot; &quot; -f2-  # glibc version
grep --version | head -n1
gzip --version | head -n1
cat /proc/version
m4 --version | head -n1
make --version | head -n1
patch --version | head -n1
echo Perl `perl -V:version`
python3 --version
sed --version | head -n1
tar --version | head -n1
makeinfo --version | head -n1  # texinfo version
xz --version | head -n1

echo 'int main(){}' &gt; dummy.c &amp;&amp; g++ -o dummy dummy.c
if [ -x dummy ]
  then echo &quot;g++ compilation OK&quot;;
  else echo &quot;g++ compilation failed&quot;; fi
rm -f dummy.c dummy
EOF

bash version-check.sh
</code></pre>
<h1><a class="header" href="#building-lfs-in-stages" id="building-lfs-in-stages">Building LFS in Stages</a></h1>
<p>LFS is designed to be built in one session. That is, the instructions assume that the system will not be shut down during the process. That does not mean that the system has to be done in one sitting. The issue is that certain procedures have to be re-accomplished after a reboot if resuming LFS at different points.</p>
<h3><a class="header" href="#231-chapters-14" id="231-chapters-14">2.3.1. Chapters 1–4</a></h3>
<p>These chapters are accomplished on the host system. When restarting, be careful of the following:</p>
<ul>
<li>Procedures done as the root user after Section 2.4 need to have the LFS environment variable set FOR THE ROOT USER.</li>
</ul>
<h3><a class="header" href="#232-chapter-5" id="232-chapter-5">2.3.2. Chapter 5</a></h3>
<ul>
<li>
<p>The /mnt/lfs partition must be mounted.</p>
</li>
<li>
<p>ALL instructions in Chapter 5 must be done by user lfs. A su - lfs needs to be done before any task in Chapter 5.</p>
</li>
<li>
<p>The procedures in <a href="02-Preparing-the-Host-System/../05-Constructing-a-Temporary-System/03-General-Compilation-Instructions.html">Section 5.3, “General Compilation Instructions”</a> are critical. If there is any doubt about installing a package, ensure any previously expanded tarballs are removed, re-extract the package files, and complete all instructions in that section.</p>
</li>
</ul>
<h3><a class="header" href="#233-chapters-68" id="233-chapters-68">2.3.3. Chapters 6–8</a></h3>
<ul>
<li>
<p>The <code>/mnt/lfs</code> partition must be mounted.</p>
</li>
<li>
<p>When entering chroot, the LFS environment variable must be set for root. The LFS variable is not used otherwise.</p>
</li>
<li>
<p>The virtual file systems must be mounted. This can be done before or after entering chroot by changing to a host virtual terminal and, as root, running the commands in <a href="02-Preparing-the-Host-System/../06-Installing-Basic-System-Software/02-Preparing-Virtual-Kernel-File-Systems.html">Section 6.2.2, “Mounting and Populating /dev”</a> and<a href="02-Preparing-the-Host-System/../06-Installing-Basic-System-Software/02-Preparing-Virtual-Kernel-File-Systems.html"> Section 6.2.3, “Mounting Virtual Kernel File Systems”</a>.</p>
</li>
</ul>
<h1><a class="header" href="#creating-a-new-partition" id="creating-a-new-partition">Creating a New Partition</a></h1>
<p>Like most other operating systems, LFS is usually installed on a dedicated partition. The recommended approach to building an LFS system is to use an available empty partition or, if you have enough unpartitioned space, to create one.</p>
<p>A minimal system requires a partition of around 6 gigabytes (GB). This is enough to store all the source tarballs and compile the packages. However, if the LFS system is intended to be the primary Linux system, additional software will probably be installed which will require additional space. A 20 GB partition is a reasonable size to provide for growth. The LFS system itself will not take up this much room. A large portion of this requirement is to provide sufficient free temporary storage as well as for adding additional capabilities after LFS is complete. Additionally, compiling packages can require a lot of disk space which will be reclaimed after the package is installed.</p>
<p>Because there is not always enough Random Access Memory (RAM) available for compilation processes, it is a good idea to use a small disk partition as <em>swap</em> space. This is used by the kernel to store seldom-used data and leave more memory available for active processes. The <em>swap</em> partition for an LFS system can be the same as the one used by the host system, in which case it is not necessary to create another one.</p>
<p>Start a disk partitioning program such as <strong>cfdisk</strong> or <strong>fdisk</strong> with a command line option naming the hard disk on which the new partition will be created—for example <code>/dev/sda</code> for the primary Integrated Drive Electronics (IDE) disk. Create a Linux native partition and a <em>swap</em> partition, if needed. Please refer to <code>cfdisk(8)</code> or <code>fdisk(8)</code> if you do not yet know how to use the programs.</p>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>For experienced users, other partitioning schemes are possible. The new LFS system can be on a software <a href="http://www.linuxfromscratch.org/blfs/view/8.4/postlfs/raid.html">RAID</a> array or an <a href="http://www.linuxfromscratch.org/blfs/view/8.4/postlfs/aboutlvm.html">LVM</a> logical volume. However, some of these options require an <a href="http://www.linuxfromscratch.org/blfs/view/8.4/postlfs/initramfs.html">initramfs</a>, which is an advanced topic. These partitioning methodologies are not recommended for first time LFS users.</p>
</blockquote>
</blockquote>
<p>Remember the designation of the new partition (e.g., <code>sda5</code>). This book will refer to this as the LFS partition. Also remember the designation of the <em>swap</em> partition. These names will be needed later for the <code>/etc/fstab</code> file.</p>
<h3><a class="header" href="#241-other-partition-issues" id="241-other-partition-issues">2.4.1. Other Partition Issues</a></h3>
<p>Requests for advice on system partitioning are often posted on the LFS mailing lists. This is a highly subjective topic. The default for most distributions is to use the entire drive with the exception of one small swap partition. This is not optimal for LFS for several reasons. It reduces flexibility, makes sharing of data across multiple distributions or LFS builds more difficult, makes backups more time consuming, and can waste disk space through inefficient allocation of file system structures.</p>
<h3><a class="header" href="#2411-the-root-partition" id="2411-the-root-partition">2.4.1.1. The Root Partition</a></h3>
<p>A root LFS partition (not to be confused with the<code>/root</code> directory) of ten gigabytes is a good compromise for most systems. It provides enough space to build LFS and most of BLFS, but is small enough so that multiple partitions can be easily created for experimentation.</p>
<h3><a class="header" href="#2412-the-swap-partition" id="2412-the-swap-partition">2.4.1.2. The Swap Partition</a></h3>
<p>Most distributions automatically create a swap partition. Generally the recommended size of the swap partition is about twice the amount of physical RAM, however this is rarely needed. If disk space is limited, hold the swap partition to two gigabytes and monitor the amount of disk swapping.</p>
<p>Swapping is never good. Generally you can tell if a system is swapping by just listening to disk activity and observing how the system reacts to commands. The first reaction to swapping should be to check for an unreasonable command such as trying to edit a five gigabyte file. If swapping becomes a normal occurrence, the best solution is to purchase more RAM for your system.</p>
<h3><a class="header" href="#2413-the-grub-bios-partition" id="2413-the-grub-bios-partition">2.4.1.3. The Grub Bios Partition</a></h3>
<p>If the <em>boot disk</em> has been partitioned with a GUID Partition Table (GPT), then a small, typically 1 MB, partition must be created if it does not already exist. This partition is not formatted, but must be available for GRUB to use during installation of the boot loader. This partition will normally be labeled 'BIOS Boot' if using <strong>fdisk</strong> or have a code of <em>EF02</em> if using <strong>gdisk</strong>.</p>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>The Grub Bios partition must be on the drive that the BIOS uses to boot the system. This is not necessarily the same drive where the LFS root partition is located. Disks on a system may use different partition table types. The requirement for this partition depends only on the partition table type of the boot disk.</p>
</blockquote>
</blockquote>
<h3><a class="header" href="#2414-convenience-partitions" id="2414-convenience-partitions">2.4.1.4. Convenience Partitions</a></h3>
<p>There are several other partitions that are not required, but should be considered when designing a disk layout. The following list is not comprehensive, but is meant as a guide.</p>
<ul>
<li>
<p><code>/boot</code> – Highly recommended. Use this partition to store kernels and other booting information. To minimize potential boot problems with larger disks, make this the first physical partition on your first disk drive. A partition size of 100 megabytes is quite adequate.</p>
</li>
<li>
<p><code>/home</code> – Highly recommended. Share your home directory and user customization across multiple distributions or LFS builds. The size is generally fairly large and depends on available disk space.</p>
</li>
<li>
<p><code>/usr</code>– A separate <code>/usr</code> partition is generally used if providing a server for a thin client or diskless workstation. It is normally not needed for LFS. A size of five gigabytes will handle most installations.</p>
</li>
<li>
<p><code>/opt</code> – This directory is most useful for BLFS where multiple installations of large packages like Gnome or KDE can be installed without embedding the files in the <code>/usr</code> hierarchy. If used, 5 to 10 gigabytes is generally adequate.</p>
</li>
<li>
<p><code>/tmp</code> – A separate <code>/tmp</code> directory is rare, but useful if configuring a thin client. This partition, if used, will usually not need to exceed a couple of gigabytes.</p>
</li>
<li>
<p><code>/usr/src</code> – This partition is very useful for providing a location to store BLFS source files and share them across LFS builds. It can also be used as a location for building BLFS packages. A reasonably large partition of 30-50 gigabytes allows plenty of room.</p>
</li>
</ul>
<p>Any separate partition that you want automatically mounted upon boot needs to be specified in the <code>/etc/fstab</code>. Details about how to specify partitions will be discussed in <a href="02-Preparing-the-Host-System/../08-Making-the-LFS-System-Bootable/02-Creating-the-slash-etc-slash-fstab-File.html">Section 8.2, “Creating the <code>/etc/fstab</code> File”</a>.</p>
<h1><a class="header" href="#creating-a-file-system-on-the-partition" id="creating-a-file-system-on-the-partition">Creating a File System on the Partition</a></h1>
<p>Now that a blank partition has been set up, the file system can be created. LFS can use any file system recognized by the Linux kernel, but the most common types are ext3 and ext4. The choice of file system can be complex and depends on the characteristics of the files and the size of the partition. For example:</p>
<p><strong>ext2</strong></p>
<p>is suitable for small partitions that are updated infrequently such as <code>/boot</code>.</p>
<p><strong>ext3</strong></p>
<p>is an upgrade to ext2 that includes a journal to help recover the partition's status in the case of an unclean shutdown. It is commonly used as a general purpose file system.</p>
<p><strong>ext4</strong></p>
<p>is the latest version of the ext file system family of partition types. It provides several new capabilities including nano-second timestamps, creation and use of very large files (16 TB), and speed improvements.</p>
<p>Other file systems, including FAT32, NTFS, ReiserFS, JFS, and XFS are useful for specialized purposes. More information about these file systems can be found at <a href="http://en.wikipedia.org/wiki/Comparison_of_file_systems">here</a>.</p>
<p>LFS assumes that the root file system (/) is of type ext4. To create an ext4 file system on the LFS partition, run the following:</p>
<pre><code class="language-sh">mkfs -v -t ext4 /dev/&lt;xxx&gt;
</code></pre>
<p>If you are using an existing <em>swap</em> partition, there is no need to format it. If a new <em>swap</em> partition was created, it will need to be initialized with this command:</p>
<pre><code class="language-sh">mkswap /dev/&lt;yyy&gt;
</code></pre>
<p>Replace <strong>&lt;yyy&gt;</strong> with the name of the <em>swap</em> partition.</p>
<h1><a class="header" href="#setting-the-lfs-variable" id="setting-the-lfs-variable">Setting The $LFS Variable</a></h1>
<p>Throughout this book, the environment variable LFS will be used several times. You should ensure that this variable is always defined throughout the LFS build process. It should be set to the name of the directory where you will be building your LFS system - we will use <code>/mnt/lfs</code> as an example, but the directory choice is up to you. If you are building LFS on a separate partition, this directory will be the mount point for the partition. Choose a directory location and set the variable with the following command:</p>
<pre><code class="language-sh">export LFS=/mnt/lfs
</code></pre>
<p>Having this variable set is beneficial in that commands such as <strong>mkdir -v $LFS/tools</strong> can be typed literally. The shell will automatically replace “$LFS” with “/mnt/lfs” (or whatever the variable was set to) when it processes the command line.</p>
<blockquote>
<p><strong>Caution</strong></p>
<blockquote>
<p>Do not forget to check that LFS is set whenever you leave and reenter the current working environment (such as when doing a <strong>su</strong> to <em>root</em> or another user). Check that the LFS variable is set up properly with:</p>
</blockquote>
<pre><code class="language-sh">echo $LFS
</code></pre>
<blockquote>
<p>Make sure the output shows the path to your LFS system's build location, which is <code>/mnt/lfs</code> if the provided example was followed. If the output is incorrect, use the command given earlier on this page to set $LFS to the correct directory name.</p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>One way to ensure that the LFS variable is always set is to edit the <code>.bash_profile</code> file in both your personal home directory and in <code>/root/.bash_profile</code> and enter the export command above. In addition, the shell specified in the <code>/etc/passwd</code>file for all users that need the LFS variable needs to be bash to ensure that the <code>/root/.bash_profile</code>file is incorporated as a part of the login process.</p>
</blockquote>
<blockquote>
<p>Another consideration is the method that is used to log into the host system. If logging in through a graphical display manager, the user's <code>.bash_profile</code>is not normally used when a virtual terminal is started. In this case, add the export command to the <code>.bashrc</code> file for the user and root. In addition, some distributions have instructions to not run the <code>.bashrc</code> instructions in a non-interactive bash invocation. Be sure to add the export command before the test for non-interactive use.</p>
</blockquote>
</blockquote>
<h1><a class="header" href="#mounting-the-new-partition" id="mounting-the-new-partition">Mounting the New Partition</a></h1>
<p>Now that a file system has been created, the partition needs to be made accessible. In order to do this, the partition needs to be mounted at a chosen mount point. For the purposes of this book, it is assumed that the file system is mounted under the directory specified by the LFS environment variable as described in the previous section.</p>
<p>Create the mount point and mount the LFS file system by running:</p>
<pre><code class="language-sh">mkdir -pv $LFS
mount -v -t ext4 /dev/&lt;xxx&gt; $LFS
</code></pre>
<p>Replace _<xxx>\_ with the designation of the LFS partition.</p>
<p>If using multiple partitions for LFS (e.g., one for <code>/</code>and another for <code>/usr</code>), mount them using:</p>
<p>Replace _<xxx>_ and _<yyy>_ with the appropriate partition names.</p>
<p>Ensure that this new partition is not mounted with permissions that are too restrictive (such as the <code>nosuid</code> or <code>nodev</code> options). Run the <strong>mount</strong> command without any parameters to see what options are set for the mounted LFS partition. If <code>nosuid</code> and/or <code>nodev</code> are set, the partition will need to be remounted.</p>
<blockquote>
<p><strong>Warning</strong></p>
<blockquote>
<p>The above instructions assume that you will not be restarting your computer throughout the LFS process. If you shut down your system, you will either need to remount the LFS partition each time you restart the build process or modify your host system's <code>/etc/fstab</code> file to automatically remount it upon boot. For example:</p>
</blockquote>
<pre><code class="language-sh">/dev/&lt;xxx&gt;  /mnt/lfs ext4   defaults      1     1
</code></pre>
<blockquote>
<p>If you use additional optional partitions, be sure to add them also.</p>
</blockquote>
</blockquote>
<p>If you are using a <em>swap</em> partition, ensure that it is enabled using the <strong>swapon</strong> command:</p>
<pre><code class="language-sh">/sbin/swapon -v /dev/&lt;zzz&gt;
</code></pre>
<p>Replace <em>&lt;zzz&gt;</em> with the name of the _swap_ partition.</p>
<p>Now that there is an established place to work, it is time to download the packages.</p>
<h1><a class="header" href="#packages-and-patches" id="packages-and-patches">Packages and Patches</a></h1>
<h3><a class="header" href="#table-of-contents-3" id="table-of-contents-3">Table of Contents</a></h3>
<ul>
<li><a href="03-Packages-and-Patches/./01-Introduction.html">Introduction</a></li>
<li><a href="03-Packages-and-Patches/./02-All-Packages.html">All Packages</a></li>
<li><a href="03-Packages-and-Patches/./03-Needed-Patches.html">Needed Patches</a></li>
</ul>
<h1><a class="header" href="#introduction-2" id="introduction-2">Introduction</a></h1>
<p>his chapter includes a list of packages that need to be downloaded in order to build a basic Linux system. The listed version numbers correspond to versions of the software that are known to work, and this book is based on their use. We highly recommend against using newer versions because the build commands for one version may not work with a newer version. The newest package versions may also have problems that require work-arounds. These work-arounds will be developed and stabilized in the development version of the book.</p>
<p>Download locations may not always be accessible. If a download location has changed since this book was published, <a href="http://www.google.com/">Google</a> provides a useful search engine for most packages. If this search is unsuccessful, try one of the alternative means of downloading discussed at [here(http://www.linuxfromscratch.org/lfs/packages.html#packages).</p>
<p>Downloaded packages and patches will need to be stored somewhere that is conveniently available throughout the entire build. A working directory is also required to unpack the sources and build them. <code>$LFS/sources</code> can be used both as the place to store the tarballs and patches and as a working directory. By using this directory, the required elements will be located on the LFS partition and will be available during all stages of the building process.</p>
<p>To create this directory, execute the following command, as user <em>root</em>, before starting the download session:</p>
<pre><code class="language-sh">mkdir -v $LFS/sources
</code></pre>
<p>Make this directory writable and sticky. “Sticky” means that even if multiple users have write permission on a directory, only the owner of a file can delete the file within a sticky directory. The following command will enable the write and sticky modes:</p>
<pre><code class="language-sh">chmod -v a+wt $LFS/sources
</code></pre>
<p>An easy way to download all of the packages and patches is by using <a href="http://www.linuxfromscratch.org/lfs/view/stable-systemd/wget-list">wget-list</a> as an input to <strong>wget</strong>. For example:</p>
<pre><code class="language-sh">wget --input-file=wget-list --continue --directory-prefix=$LFS/sources
</code></pre>
<p>Additionally, starting with LFS-7.0, there is a separate file, <a href="http://www.linuxfromscratch.org/lfs/view/stable-systemd/md5sums">md5sums</a>, which can be used to verify that all the correct packages are available before proceeding. Place that file in <code>$LFS/sources</code> and run:</p>
<pre><code class="language-sh">pushd $LFS/sources
md5sum -c md5sums
popd
</code></pre>
<h1><a class="header" href="#all-packages" id="all-packages">All Packages</a></h1>
<dt><b>
    <span class="term">Acl (2.2.53) - <span class="token">513
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Download: <a class="ulink" href=
    "http://download.savannah.gnu.org/releases/acl/acl-2.2.53.tar.gz">
    http://download.savannah.gnu.org/releases/acl/acl-2.2.53.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">007aabf1dbb550bcddde52a244cd1070</code>
    </p>
</dd>
<dt><b>
    <span class="term">Attr (2.4.48) - <span class="token">457
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://savannah.nongnu.org/projects/attr">https://savannah.nongnu.org/projects/attr</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://download.savannah.gnu.org/releases/attr/attr-2.4.48.tar.gz">
    http://download.savannah.gnu.org/releases/attr/attr-2.4.48.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">bc1e5cb5c96d99b24886f1f527d3bb3d</code>
    </p>
</dd>
<dt><b>
    <span class="term">Autoconf (2.69) - <span class="token">1,186
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/autoconf/">http://www.gnu.org/software/autoconf/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/autoconf/autoconf-2.69.tar.xz">http://ftp.gnu.org/gnu/autoconf/autoconf-2.69.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">50f97f4159805e374639a73e2636f22e</code>
    </p>
</dd>
<dt><b>
    <span class="term">Automake (1.16.1) - <span class=
    "token">1,499 KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/automake/">http://www.gnu.org/software/automake/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/automake/automake-1.16.1.tar.xz">http://ftp.gnu.org/gnu/automake/automake-1.16.1.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">53f38e7591fa57c3d2cee682be668e5b</code>
    </p>
</dd>
<dt><b>
    <span class="term">Bash (5.0) - <span class="token">9,898
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/bash/">http://www.gnu.org/software/bash/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/bash/bash-5.0.tar.gz">http://ftp.gnu.org/gnu/bash/bash-5.0.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">2b44b47b905be16f45709648f671820b</code>
    </p>
</dd>
<dt><b>
    <span class="term">Bc (1.07.1) - <span class="token">411
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/bc/">http://www.gnu.org/software/bc/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/bc/bc-1.07.1.tar.gz">http://ftp.gnu.org/gnu/bc/bc-1.07.1.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">cda93857418655ea43590736fc3ca9fc</code>
    </p>
</dd>
<dt><b>
    <span class="term">Binutils (2.32) - <span class="token">20,288
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/binutils/">http://www.gnu.org/software/binutils/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/binutils/binutils-2.32.tar.xz">http://ftp.gnu.org/gnu/binutils/binutils-2.32.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">0d174cdaf85721c5723bf52355be41e6</code>
    </p>
</dd>
<dt><b>
    <span class="term">Bison (3.3.2) - <span class="token">2,060
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/bison/">http://www.gnu.org/software/bison/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/bison/bison-3.3.2.tar.xz">http://ftp.gnu.org/gnu/bison/bison-3.3.2.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">c9b552dee234b2f6b66e56b27e5234c9</code>
    </p>
</dd>
<dt><b>
    <span class="term">Bzip2 (1.0.6) - <span class="token">764
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Download: <a class="ulink" href=
    "http://anduin.linuxfromscratch.org/LFS/bzip2-1.0.6.tar.gz">http://anduin.linuxfromscratch.org/LFS/bzip2-1.0.6.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">00b516f4704d4a7cb50a1d97e6e8e15b</code>
    </p>
</dd>
<dt><b>
    <span class="term">Check (0.12.0) - <span class="token">747
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://libcheck.github.io/check">https://libcheck.github.io/check</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://github.com/libcheck/check/releases/download/0.12.0/check-0.12.0.tar.gz">
    https://github.com/libcheck/check/releases/download/0.12.0/check-0.12.0.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">31b17c6075820a434119592941186f70</code>
    </p>
</dd>
<dt><b>
    <span class="term">Coreutils (8.30) - <span class="token">5,234
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/coreutils/">http://www.gnu.org/software/coreutils/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/coreutils/coreutils-8.30.tar.xz">http://ftp.gnu.org/gnu/coreutils/coreutils-8.30.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">ab06d68949758971fe744db66b572816</code>
    </p>
</dd>
<dt><b>
    <span class="term">D-Bus (1.12.12) - <span class="token">2,029
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://www.freedesktop.org/wiki/Software/dbus">https://www.freedesktop.org/wiki/Software/dbus</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://dbus.freedesktop.org/releases/dbus/dbus-1.12.12.tar.gz">
    https://dbus.freedesktop.org/releases/dbus/dbus-1.12.12.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">ea11069521beeee4e47f0086596a43c8</code>
    </p>
</dd>
<dt><b>
    <span class="term">DejaGNU (1.6.2) - <span class="token">514
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/dejagnu/">http://www.gnu.org/software/dejagnu/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/dejagnu/dejagnu-1.6.2.tar.gz">http://ftp.gnu.org/gnu/dejagnu/dejagnu-1.6.2.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">e1b07516533f351b3aba3423fafeffd6</code>
    </p>
</dd>
<dt><b>
    <span class="term">Diffutils (3.7) - <span class="token">1,415
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/diffutils/">http://www.gnu.org/software/diffutils/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/diffutils/diffutils-3.7.tar.xz">http://ftp.gnu.org/gnu/diffutils/diffutils-3.7.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">4824adc0e95dbbf11dfbdfaad6a1e461</code>
    </p>
</dd>
<dt><b>
    <span class="term">E2fsprogs (1.44.5) - <span class=
    "token">7,448 KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://e2fsprogs.sourceforge.net/">http://e2fsprogs.sourceforge.net/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://downloads.sourceforge.net/project/e2fsprogs/e2fsprogs/v1.44.5/e2fsprogs-1.44.5.tar.gz">
    https://downloads.sourceforge.net/project/e2fsprogs/e2fsprogs/v1.44.5/e2fsprogs-1.44.5.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">8d78b11d04d26c0b2dd149529441fa80</code>
    </p>
</dd>
<dt><b>
    <span class="term">Elfutils (0.176) - <span class="token">8,444
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://sourceware.org/ftp/elfutils/">https://sourceware.org/ftp/elfutils/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://sourceware.org/ftp/elfutils/0.176/elfutils-0.176.tar.bz2">
    https://sourceware.org/ftp/elfutils/0.176/elfutils-0.176.tar.bz2</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">077e4f49320cad82bf17a997068b1db9</code>
    </p>
</dd>
<dt><b>
    <span class="term">Expat (2.2.6) - <span class="token">502
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://libexpat.github.io/">https://libexpat.github.io/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://prdownloads.sourceforge.net/expat/expat-2.2.6.tar.bz2">
    https://prdownloads.sourceforge.net/expat/expat-2.2.6.tar.bz2</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">ca047ae951b40020ac831c28859161b2</code>
    </p>
</dd>
<dt><b>
    <span class="term">Expect (5.45.4) - <span class="token">618
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://core.tcl.tk/expect/">https://core.tcl.tk/expect/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://prdownloads.sourceforge.net/expect/expect5.45.4.tar.gz">
    https://prdownloads.sourceforge.net/expect/expect5.45.4.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">00fce8de158422f5ccd2666512329bd2</code>
    </p>
</dd>
<dt><b>
    <span class="term">File (5.36) - <span class="token">856
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://www.darwinsys.com/file/">https://www.darwinsys.com/file/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "ftp://ftp.astron.com/pub/file/file-5.36.tar.gz">ftp://ftp.astron.com/pub/file/file-5.36.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">9af0eb3f5db4ae00fffc37f7b861575c</code>
    </p>
</dd>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>File (5.36) may no longer be available at the listed location. The site administrators of the master download location occasionally remove older versions when new ones are released. An alternative download location that may have the correct version available can also be found <a href="http://www.linuxfromscratch.org/lfs/download.html#ftp">here</a>.</p>
</blockquote>
</blockquote>
<dt><b>
    <span class="term">Findutils (4.6.0) - <span class=
    "token">3,692 KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/findutils/">http://www.gnu.org/software/findutils/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/findutils/findutils-4.6.0.tar.gz">http://ftp.gnu.org/gnu/findutils/findutils-4.6.0.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">9936aa8009438ce185bea2694a997fc1</code>
    </p>
</dd>
<dt><b>
    <span class="term">Flex (2.6.4) - <span class="token">1,386
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://github.com/westes/flex">https://github.com/westes/flex</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://github.com/westes/flex/releases/download/v2.6.4/flex-2.6.4.tar.gz">
    https://github.com/westes/flex/releases/download/v2.6.4/flex-2.6.4.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">2882e3179748cc9f9c23ec593d6adc8d</code>
    </p>
</dd>
<dt><b>
    <span class="term">Gawk (4.2.1) - <span class="token">2,916
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/gawk/">http://www.gnu.org/software/gawk/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/gawk/gawk-4.2.1.tar.xz">http://ftp.gnu.org/gnu/gawk/gawk-4.2.1.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">95cf553f50ec9f386b5dfcd67f30180a</code>
    </p>
</dd>
<dt><b>
    <span class="term">GCC (8.2.0) - <span class="token">61,974
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://gcc.gnu.org/">https://gcc.gnu.org/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/gcc/gcc-8.2.0/gcc-8.2.0.tar.xz">http://ftp.gnu.org/gnu/gcc/gcc-8.2.0/gcc-8.2.0.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">4ab282f414676496483b3e1793d07862</code>
    </p>
</dd>
<dt><b>
    <span class="term">GDBM (1.18.1) - <span class="token">920
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/gdbm/">http://www.gnu.org/software/gdbm/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/gdbm/gdbm-1.18.1.tar.gz">http://ftp.gnu.org/gnu/gdbm/gdbm-1.18.1.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">988dc82182121c7570e0cb8b4fcd5415</code>
    </p>
</dd>
<dt><b>
    <span class="term">Gettext (0.19.8.1) - <span class=
    "token">7,041 KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/gettext/">http://www.gnu.org/software/gettext/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/gettext/gettext-0.19.8.1.tar.xz">http://ftp.gnu.org/gnu/gettext/gettext-0.19.8.1.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">df3f5690eaa30fd228537b00cb7b7590</code>
    </p>
</dd>
<dt><b>
    <span class="term">Glibc (2.29) - <span class="token">16,129
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/libc/">http://www.gnu.org/software/libc/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/glibc/glibc-2.29.tar.xz">http://ftp.gnu.org/gnu/glibc/glibc-2.29.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">e6c279d5b2f0736f740216f152acf974</code>
    </p>
</dd>
<dt><b>
    <span class="term">GMP (6.1.2) - <span class="token">1,901
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/gmp/">http://www.gnu.org/software/gmp/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/gmp/gmp-6.1.2.tar.xz">http://ftp.gnu.org/gnu/gmp/gmp-6.1.2.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">f58fa8001d60c4c77595fbbb62b63c1d</code>
    </p>
</dd>
<dt><b>
    <span class="term">Gperf (3.1) - <span class="token">1,188
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/gperf/">http://www.gnu.org/software/gperf/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/gperf/gperf-3.1.tar.gz">http://ftp.gnu.org/gnu/gperf/gperf-3.1.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">9e251c0a618ad0824b51117d5d9db87e</code>
    </p>
</dd>
<dt><b>
    <span class="term">Grep (3.3) - <span class="token">1,440
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/grep/">http://www.gnu.org/software/grep/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/grep/grep-3.3.tar.xz">http://ftp.gnu.org/gnu/grep/grep-3.3.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">05d0718a1b7cc706a4bdf8115363f1ed</code>
    </p>
</dd>
<dt><b>
    <span class="term">Groff (1.22.4) - <span class="token">4,044
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/groff/">http://www.gnu.org/software/groff/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/groff/groff-1.22.4.tar.gz">http://ftp.gnu.org/gnu/groff/groff-1.22.4.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">08fb04335e2f5e73f23ea4c3adbf0c5f</code>
    </p>
</dd>
<dt><b>
    <span class="term">GRUB (2.02) - <span class="token">5,970
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/grub/">http://www.gnu.org/software/grub/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://ftp.gnu.org/gnu/grub/grub-2.02.tar.xz">https://ftp.gnu.org/gnu/grub/grub-2.02.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">8a4a2a95aac551fb0fba860ceabfa1d3</code>
    </p>
</dd>
<dt><b>
    <span class="term">Gzip (1.10) - <span class="token">757
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/gzip/">http://www.gnu.org/software/gzip/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/gzip/gzip-1.10.tar.xz">http://ftp.gnu.org/gnu/gzip/gzip-1.10.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">691b1221694c3394f1c537df4eee39d3</code>
    </p>
</dd>
<dt><b>
    <span class="term">Iana-Etc (2.30) - <span class="token">201
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://freecode.com/projects/iana-etc">http://freecode.com/projects/iana-etc</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://anduin.linuxfromscratch.org/LFS/iana-etc-2.30.tar.bz2">
    http://anduin.linuxfromscratch.org/LFS/iana-etc-2.30.tar.bz2</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">3ba3afb1d1b261383d247f46cb135ee8</code>
    </p>
</dd>
<dt><b>
    <span class="term">Inetutils (1.9.4) - <span class=
    "token">1,333 KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/inetutils/">http://www.gnu.org/software/inetutils/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/inetutils/inetutils-1.9.4.tar.xz">http://ftp.gnu.org/gnu/inetutils/inetutils-1.9.4.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">87fef1fa3f603aef11c41dcc097af75e</code>
    </p>
</dd>
<dt><b>
    <span class="term">Intltool (0.51.0) - <span class="token">159
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://freedesktop.org/wiki/Software/intltool">https://freedesktop.org/wiki/Software/intltool</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://launchpad.net/intltool/trunk/0.51.0/+download/intltool-0.51.0.tar.gz">
    https://launchpad.net/intltool/trunk/0.51.0/+download/intltool-0.51.0.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">12e517cac2b57a0121cda351570f1e63</code>
    </p>
</dd>
<dt><b>
    <span class="term">IPRoute2 (4.20.0) - <span class="token">691
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://www.kernel.org/pub/linux/utils/net/iproute2/">https://www.kernel.org/pub/linux/utils/net/iproute2/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://www.kernel.org/pub/linux/utils/net/iproute2/iproute2-4.20.0.tar.xz">
    https://www.kernel.org/pub/linux/utils/net/iproute2/iproute2-4.20.0.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">f3dab4c812812bbb5873cb90f471bcbf</code>
    </p>
</dd>
<dt><b>
    <span class="term">Kbd (2.0.4) - <span class="token">1,008
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://ftp.altlinux.org/pub/people/legion/kbd">http://ftp.altlinux.org/pub/people/legion/kbd</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://www.kernel.org/pub/linux/utils/kbd/kbd-2.0.4.tar.xz">
    https://www.kernel.org/pub/linux/utils/kbd/kbd-2.0.4.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">c1635a5a83b63aca7f97a3eab39ebaa6</code>
    </p>
</dd>
<dt><b>
    <span class="term">Kmod (26) - <span class="token">540
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Download: <a class="ulink" href=
    "https://www.kernel.org/pub/linux/utils/kernel/kmod/kmod-26.tar.xz">
    https://www.kernel.org/pub/linux/utils/kernel/kmod/kmod-26.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">1129c243199bdd7db01b55a61aa19601</code>
    </p>
</dd>
<dt><b>
    <span class="term">Less (530) - <span class="token">332
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.greenwoodsoftware.com/less/">http://www.greenwoodsoftware.com/less/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://www.greenwoodsoftware.com/less/less-530.tar.gz">http://www.greenwoodsoftware.com/less/less-530.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">6a39bccf420c946b0fd7ffc64961315b</code>
    </p>
</dd>
<dt><b>
    <span class="term">Libcap (2.26) - <span class="token">66
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://sites.google.com/site/fullycapable/">https://sites.google.com/site/fullycapable/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://www.kernel.org/pub/linux/libs/security/linux-privs/libcap2/libcap-2.26.tar.xz">
    https://www.kernel.org/pub/linux/libs/security/linux-privs/libcap2/libcap-2.26.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">968ac4d42a1a71754313527be2ab5df3</code>
    </p>
</dd>
<dt><b>
    <span class="term">Libffi (3.2.1) - <span class="token">920
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://sourceware.org/libffi/">https://sourceware.org/libffi/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "ftp://sourceware.org/pub/libffi/libffi-3.2.1.tar.gz">ftp://sourceware.org/pub/libffi/libffi-3.2.1.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">83b89587607e3eb65c70d361f13bab43</code>
    </p>
</dd>
<dt><b>
    <span class="term">Libpipeline (1.5.1) - <span class=
    "token">965 KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://libpipeline.nongnu.org/">http://libpipeline.nongnu.org/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://download.savannah.gnu.org/releases/libpipeline/libpipeline-1.5.1.tar.gz">
    http://download.savannah.gnu.org/releases/libpipeline/libpipeline-1.5.1.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">4c8fe6cd85422baafd6e060f896c61bc</code>
    </p>
</dd>
<dt><b>
    <span class="term">Libtool (2.4.6) - <span class="token">951
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/libtool/">http://www.gnu.org/software/libtool/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/libtool/libtool-2.4.6.tar.xz">http://ftp.gnu.org/gnu/libtool/libtool-2.4.6.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">1bfb9b923f2c1339b4d2ce1807064aa5</code>
    </p>
</dd>
<dt><b>
    <span class="term">Linux (4.20.12) - <span class=
    "token">101,841 KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://www.kernel.org/">https://www.kernel.org/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://www.kernel.org/pub/linux/kernel/v4.x/linux-4.20.12.tar.xz">
    https://www.kernel.org/pub/linux/kernel/v4.x/linux-4.20.12.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">edd3015435d60598b99cf6aaf223710e</code>
    </p>
</dd>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>The Linux kernel is updated relatively often, many times due to discoveries of security vulnerabilities. The latest available 4.20.x kernel version should be used, unless the errata page says otherwise..</p>
</blockquote>
<blockquote>
<p>For users with limited speed or expensive bandwidth who wish to update the Linux kernel, a baseline version of the package and patches can be downloaded separately. This may save some time or cost for a subsequent patch level upgrade within a minor release.</p>
</blockquote>
</blockquote>
<dt><b>
    <span class="term">M4 (1.4.18) - <span class="token">1,180
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/m4/">http://www.gnu.org/software/m4/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/m4/m4-1.4.18.tar.xz">http://ftp.gnu.org/gnu/m4/m4-1.4.18.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">730bb15d96fffe47e148d1e09235af82</code>
    </p>
</dd>
<dt><b>
    <span class="term">Make (4.2.1) - <span class="token">1,375
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/make/">http://www.gnu.org/software/make/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/make/make-4.2.1.tar.bz2">http://ftp.gnu.org/gnu/make/make-4.2.1.tar.bz2</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">15b012617e7c44c0ed482721629577ac</code>
    </p>
</dd>
<dt><b>
    <span class="term">Man-DB (2.8.5) - <span class="token">1,746
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://www.nongnu.org/man-db/">https://www.nongnu.org/man-db/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://download.savannah.gnu.org/releases/man-db/man-db-2.8.5.tar.xz">
    http://download.savannah.gnu.org/releases/man-db/man-db-2.8.5.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">c5c6c3434be14a5527d43b5ad0f09a13</code>
    </p>
</dd>
<dt><b>
    <span class="term">Man-pages (4.16) - <span class="token">1,592
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://www.kernel.org/doc/man-pages/">https://www.kernel.org/doc/man-pages/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://www.kernel.org/pub/linux/docs/man-pages/man-pages-4.16.tar.xz">
    https://www.kernel.org/pub/linux/docs/man-pages/man-pages-4.16.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">ad9f1ff81276fe8d90d077484d6d4b5e</code>
    </p>
</dd>
<dt><b>
    <span class="term">Meson (0.49.2) - <span class="token">1,310
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://mesonbuild.com">https://mesonbuild.com</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://github.com/mesonbuild/meson/releases/download/0.49.2/meson-0.49.2.tar.gz">
    https://github.com/mesonbuild/meson/releases/download/0.49.2/meson-0.49.2.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">0267b0871266056184c484792572c682</code>
    </p>
</dd>
<dt><b>
    <span class="term">MPC (1.1.0) - <span class="token">685
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.multiprecision.org/">http://www.multiprecision.org/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://ftp.gnu.org/gnu/mpc/mpc-1.1.0.tar.gz">https://ftp.gnu.org/gnu/mpc/mpc-1.1.0.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">4125404e41e482ec68282a2e687f6c73</code>
    </p>
</dd>
<dt><b>
    <span class="term">MPFR (4.0.2) - <span class="token">1,409
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://www.mpfr.org/">https://www.mpfr.org/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://www.mpfr.org/mpfr-4.0.2/mpfr-4.0.2.tar.xz">http://www.mpfr.org/mpfr-4.0.2/mpfr-4.0.2.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">320fbc4463d4c8cb1e566929d8adc4f8</code>
    </p>
</dd>
<dt><b>
    <span class="term">Ninja (1.9.0) - <span class="token">187
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://ninja-build.org/">https://ninja-build.org/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://github.com/ninja-build/ninja/archive/v1.9.0/ninja-1.9.0.tar.gz">
    https://github.com/ninja-build/ninja/archive/v1.9.0/ninja-1.9.0.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">f340be768a76724b83e6daab69009902</code>
    </p>
</dd>
<dt><b>
    <span class="term">Ncurses (6.1) - <span class="token">3,288
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/ncurses/">http://www.gnu.org/software/ncurses/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/ncurses/ncurses-6.1.tar.gz">http://ftp.gnu.org/gnu/ncurses/ncurses-6.1.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">98c889aaf8d23910d2b92d65be2e737a</code>
    </p>
</dd>
<dt><b>
    <span class="term">OpenSSL (1.1.1a) - <span class="token">8,160
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://www.openssl.org/">https://www.openssl.org/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://openssl.org/source/openssl-1.1.1a.tar.gz">https://openssl.org/source/openssl-1.1.1a.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">963deb2272d6be7d4c2458afd2517b73</code>
    </p>
</dd>
<dt><b>
    <span class="term">Patch (2.7.6) - <span class="token">766
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://savannah.gnu.org/projects/patch/">https://savannah.gnu.org/projects/patch/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/patch/patch-2.7.6.tar.xz">http://ftp.gnu.org/gnu/patch/patch-2.7.6.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">78ad9937e4caadcba1526ef1853730d5</code>
    </p>
</dd>
<dt><b>
    <span class="term">Perl (5.28.1) - <span class="token">12,083
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://www.perl.org/">https://www.perl.org/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://www.cpan.org/src/5.0/perl-5.28.1.tar.xz">https://www.cpan.org/src/5.0/perl-5.28.1.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">fbb590c305f2f88578f448581b8cf9c4</code>
    </p>
</dd>
<dt><b>
    <span class="term">Pkg-config (0.29.2) - <span class=
    "token">1,970 KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://www.freedesktop.org/wiki/Software/pkg-config">https://www.freedesktop.org/wiki/Software/pkg-config</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://pkg-config.freedesktop.org/releases/pkg-config-0.29.2.tar.gz">
    https://pkg-config.freedesktop.org/releases/pkg-config-0.29.2.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">f6e931e319531b736fadc017f470e68a</code>
    </p>
</dd>
<dt><b>
    <span class="term">Procps (3.3.15) - <span class="token">884
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://sourceforge.net/projects/procps-ng">https://sourceforge.net/projects/procps-ng</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://sourceforge.net/projects/procps-ng/files/Production/procps-ng-3.3.15.tar.xz">
    https://sourceforge.net/projects/procps-ng/files/Production/procps-ng-3.3.15.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">2b0717a7cb474b3d6dfdeedfbad2eccc</code>
    </p>
</dd>
<dt><b>
    <span class="term">Psmisc (23.2) - <span class="token">297
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://psmisc.sourceforge.net/">http://psmisc.sourceforge.net/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://sourceforge.net/projects/psmisc/files/psmisc/psmisc-23.2.tar.xz">
    https://sourceforge.net/projects/psmisc/files/psmisc/psmisc-23.2.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">0524258861f00be1a02d27d39d8e5e62</code>
    </p>
</dd>
<dt><b>
    <span class="term">Python (3.7.2) - <span class="token">16,648
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://www.python.org/">https://www.python.org/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://www.python.org/ftp/python/3.7.2/Python-3.7.2.tar.xz">
    https://www.python.org/ftp/python/3.7.2/Python-3.7.2.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">df6ec36011808205beda239c72f947cb</code>
    </p>
</dd>
<dt><b>
    <span class="term">Python Documentation (3.7.2) - <span class=
    "token">6,072 KB</span>:</span>
</b></dt>
<dd>
    <p>
    Download: <a class="ulink" href=
    "https://docs.python.org/ftp/python/doc/3.7.2/python-3.7.2-docs-html.tar.bz2">
    https://docs.python.org/ftp/python/doc/3.7.2/python-3.7.2-docs-html.tar.bz2</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">107ade7bb17efd104a22b2d457f4cb67</code>
    </p>
</dd>
<dt><b>
    <span class="term">Readline (8.0) - <span class="token">2,907
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://tiswww.case.edu/php/chet/readline/rltop.html">https://tiswww.case.edu/php/chet/readline/rltop.html</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/readline/readline-8.0.tar.gz">http://ftp.gnu.org/gnu/readline/readline-8.0.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">7e6c1f16aee3244a69aba6e438295ca3</code>
    </p>
</dd>
<dt><b>
    <span class="term">Sed (4.7) - <span class="token">1,268
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/sed/">http://www.gnu.org/software/sed/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/sed/sed-4.7.tar.xz">http://ftp.gnu.org/gnu/sed/sed-4.7.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">777ddfd9d71dd06711fe91f0925e1573</code>
    </p>
</dd>
<dt><b>
    <span class="term">Shadow (4.6) - <span class="token">1,639
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Download: <a class="ulink" href=
    "https://github.com/shadow-maint/shadow/releases/download/4.6/shadow-4.6.tar.xz">
    https://github.com/shadow-maint/shadow/releases/download/4.6/shadow-4.6.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">b491fecbf1232632c32ff8f1437fd60e</code>
    </p>
</dd>
<dt><b>
    <span class="term">Systemd (240) - <span class="token">7,412
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://www.freedesktop.org/wiki/Software/systemd/">https://www.freedesktop.org/wiki/Software/systemd/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://github.com/systemd/systemd/archive/v240/systemd-240.tar.gz">
    https://github.com/systemd/systemd/archive/v240/systemd-240.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">0e4f91b513d4b04e2c10a5173e5a87b2</code>
    </p>
</dd>
<dt><b>
    <span class="term">Systemd Man Pages(240) - <span class=
    "token">460 KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://www.freedesktop.org/wiki/Software/systemd/">https://www.freedesktop.org/wiki/Software/systemd/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://anduin.linuxfromscratch.org/LFS/systemd-man-pages-240.tar.xz">
    http://anduin.linuxfromscratch.org/LFS/systemd-man-pages-240.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">ca49a25e1cf330b02adc07218f430dae</code>
    </p>
</dd>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>The Linux From Scratch team generates its own tarball of the man pages using the systemd source. This is done in order to avoid unnecessary dependencies.</p>
</blockquote>
</blockquote>
<dt><b>
    <span class="term">Tar (1.31) - <span class="token">2,052
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/tar/">http://www.gnu.org/software/tar/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/tar/tar-1.31.tar.xz">http://ftp.gnu.org/gnu/tar/tar-1.31.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">bc9a89da1185ceb2210de12552c43ce2</code>
    </p>
</dd>
<dt><b>
    <span class="term">Tcl (8.6.9) - <span class="token">9,772
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://tcl.sourceforge.net/">http://tcl.sourceforge.net/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://downloads.sourceforge.net/tcl/tcl8.6.9-src.tar.gz">https://downloads.sourceforge.net/tcl/tcl8.6.9-src.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">aa0a121d95a0e7b73a036f26028538d4</code>
    </p>
</dd>
<dt><b>
    <span class="term">Texinfo (6.5) - <span class="token">4,399
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://www.gnu.org/software/texinfo/">http://www.gnu.org/software/texinfo/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "http://ftp.gnu.org/gnu/texinfo/texinfo-6.5.tar.xz">http://ftp.gnu.org/gnu/texinfo/texinfo-6.5.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">3715197e62e0e07f85860b3d7aab55ed</code>
    </p>
</dd>
<dt><b>
    <span class="term">Time Zone Data (2018i) - <span class=
    "token">369 KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://www.iana.org/time-zones">https://www.iana.org/time-zones</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://www.iana.org/time-zones/repository/releases/tzdata2018i.tar.gz">
    https://www.iana.org/time-zones/repository/releases/tzdata2018i.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">b3f0a1a789480a036e58466cd0702477</code>
    </p>
</dd>
<dt><b>
    <span class="term">Util-linux (2.33.1) - <span class=
    "token">4,542 KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "http://freecode.com/projects/util-linux">http://freecode.com/projects/util-linux</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://www.kernel.org/pub/linux/utils/util-linux/v2.33/util-linux-2.33.1.tar.xz">
    https://www.kernel.org/pub/linux/utils/util-linux/v2.33/util-linux-2.33.1.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">6fcfea2043b5ac188fd3eed56aeb5d90</code>
    </p>
</dd>
<dt><b>
    <span class="term">Vim (8.1) - <span class="token">10,995
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://www.vim.org">https://www.vim.org</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "ftp://ftp.vim.org/pub/vim/unix/vim-8.1.tar.bz2">ftp://ftp.vim.org/pub/vim/unix/vim-8.1.tar.bz2</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">1739a1df312305155285f0cfa6118294</code>
    </p>
</dd>
<dt><b>
    <span class="term">XML::Parser (2.44) - <span class="token">232
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://github.com/chorny/XML-Parser">https://github.com/chorny/XML-Parser</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://cpan.metacpan.org/authors/id/T/TO/TODDR/XML-Parser-2.44.tar.gz">
    https://cpan.metacpan.org/authors/id/T/TO/TODDR/XML-Parser-2.44.tar.gz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">af4813fe3952362451201ced6fbce379</code>
    </p>
</dd>
<dt><b>
    <span class="term">Xz Utils (5.2.4) - <span class="token">1030
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://tukaani.org/xz">https://tukaani.org/xz</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://tukaani.org/xz/xz-5.2.4.tar.xz">https://tukaani.org/xz/xz-5.2.4.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">003e4d0b1b1899fc6e3000b24feddf7c</code>
    </p>
</dd>
<dt><b>
    <span class="term">Zlib (1.2.11) - <span class="token">457
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Home page: <a class="ulink" href=
    "https://www.zlib.net/">https://www.zlib.net/</a>
    </p>
    <p>
    Download: <a class="ulink" href=
    "https://zlib.net/zlib-1.2.11.tar.xz">https://zlib.net/zlib-1.2.11.tar.xz</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">85adef240c5f370b308da8c938951a68</code>
    </p>
</dd>
</dl>
<p>Total size of these packages: about 381 MB</p>
<h1><a class="header" href="#needed-patches" id="needed-patches">Needed Patches</a></h1>
<p>In addition to the packages, several patches are also required. These patches correct any mistakes in the packages that should be fixed by the maintainer. The patches also make small modifications to make the packages easier to work with. The following patches will be needed to build an LFS system:</p>
<dt><b>
    <span class="term">Bzip2 Documentation Patch - <span class=
    "token">1.6 KB</span>:</span>
</b></dt>
<dd>
    <p>
    Download: <a class="ulink" href=
    "http://www.linuxfromscratch.org/patches/lfs/8.4/bzip2-1.0.6-install_docs-1.patch">
    http://www.linuxfromscratch.org/patches/lfs/8.4/bzip2-1.0.6-install_docs-1.patch</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">6a5ac7e89b791aae556de0f745916f7f</code>
    </p>
</dd>
<dt><b>
    <span class="term">Coreutils Internationalization Fixes Patch -
    <span class="token">168 KB</span>:</span>
</b></dt>
<dd>
    <p>
    Download: <a class="ulink" href=
    "http://www.linuxfromscratch.org/patches/lfs/8.4/coreutils-8.30-i18n-1.patch">
    http://www.linuxfromscratch.org/patches/lfs/8.4/coreutils-8.30-i18n-1.patch</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">a9404fb575dfd5514f3c8f4120f9ca7d</code>
    </p>
</dd>
<dt><b>
    <span class="term">Glibc FHS Patch - <span class="token">2.8
    KB</span>:</span>
</b></dt>
<dd>
    <p>
    Download: <a class="ulink" href=
    "http://www.linuxfromscratch.org/patches/lfs/8.4/glibc-2.29-fhs-1.patch">
    http://www.linuxfromscratch.org/patches/lfs/8.4/glibc-2.29-fhs-1.patch</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">9a5997c3452909b1769918c759eff8a2</code>
    </p>
</dd>
<dt><b>
    <span class="term">Kbd Backspace/Delete Fix Patch -
    <span class="token">12 KB</span>:</span>
</b></dt>
<dd>
    <p>
    Download: <a class="ulink" href=
    "http://www.linuxfromscratch.org/patches/lfs/8.4/kbd-2.0.4-backspace-1.patch">
    http://www.linuxfromscratch.org/patches/lfs/8.4/kbd-2.0.4-backspace-1.patch</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">f75cca16a38da6caa7d52151f7136895</code>
    </p>
</dd>
<dt><b>
    <span class="term">Systemd security patch - <span class=
    "token">14 KB</span>:</span>
</b></dt>
<dd>
    <p>
    Download: <a class="ulink" href=
    "http://www.linuxfromscratch.org/patches/lfs/8.4/systemd-240-security_fixes-2.patch">
    http://www.linuxfromscratch.org/patches/lfs/8.4/systemd-240-security_fixes-2.patch</a>
    </p>
    <p>
    MD5 sum: <code class=
    "literal">10abebce8ff5d9fd402623ace39b5ab8</code>
    </p>
</dd>
<p>Total size of these patches: about 198.4 KB</p>
<p>In addition to the above required patches, there exist a number of optional patches created by the LFS community. These optional patches solve minor problems or enable functionality that is not enabled by default. Feel free to peruse the <a href="http://www.linuxfromscratch.org/patches/downloads/">patches database</a> and acquire any additional patches to suit your system needs.</p>
<h1><a class="header" href="#final-preparations" id="final-preparations">Final Preparations</a></h1>
<ul>
<li><a href="04-Final-Preparations/01-Introduction.html">Introduction</a></li>
<li><a href="04-Final-Preparations/02-Creating-the-$LFS-tools-Directory.html">Creating the $LFS/tools Directory</a></li>
<li><a href="04-Final-Preparations/03-Adding-the-LFS-User.html">Adding the LFS User</a></li>
<li><a href="04-Final-Preparations/04-Setting-Up-the-Environment.html">Setting Up the Environment</a></li>
<li><a href="04-Final-Preparations/05-About-SBUs.html">About SBUs</a></li>
<li><a href="04-Final-Preparations/06-About-the-Test-Suites.html">About the Test Suites</a></li>
</ul>
<h1><a class="header" href="#introduction-3" id="introduction-3">Introduction</a></h1>
<p>In this chapter, we will perform a few additional tasks to prepare for building the temporary system. We will create a directory in $LFS for the installation of the temporary tools, add an unprivileged user to reduce risk, and create an appropriate build environment for that user. We will also explain the unit of time we use to measure how long LFS packages take to build, or “SBUs”, and give some information about package test suites.</p>
<h1><a class="header" href="#creating-the-lfstools-directory" id="creating-the-lfstools-directory">Creating the $LFS/tools Directory</a></h1>
<p>All programs compiled in <a href="04-Final-Preparations/../05-Constructing-a-Temporary-System/index.html">Chapter 5</a> will be installed under $LFS/tools to keep them separate from the programs compiled in <a href="04-Final-Preparations/../06-Installing-Basic-System-Software/index.html">Chapter 6</a>. The programs compiled here are temporary tools and will not be a part of the final LFS system. By keeping these programs in a separate directory, they can easily be discarded later after their use. This also prevents these programs from ending up in the host production directories (easy to do by accident in <a href="04-Final-Preparations/../05-Constructing-a-Temporary-System/index.html">Chapter 5</a>).</p>
<p>Create the required directory by running the following as root:</p>
<pre><code class="language-sh">mkdir -v $LFS/tools
</code></pre>
<p>The next step is to create a <code>/tools</code> symlink on the host system. This will point to the newly-created directory on the LFS partition. Run this command as <em>root</em> as well:</p>
<pre><code class="language-sh">ln -sv $LFS/tools /
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>The above command is correct. The <strong>ln</strong> command has a few syntactic variations, so be sure to check <strong>info coreutils ln</strong> and <code>ln(1)</code> before reporting what you may think is an error.</p>
</blockquote>
</blockquote>
<p>The created symlink enables the toolchain to be compiled so that it always refers to <code>/tools</code>, meaning that the compiler, assembler, and linker will work both in Chapter 5 (when we are still using some tools from the host) and in the next (when we are “chrooted” to the LFS partition).</p>
<h1><a class="header" href="#adding-the-lfs-user" id="adding-the-lfs-user">Adding the LFS User</a></h1>
<p>When logged in as user <em>root</em>, making a single mistake can damage or destroy a system. Therefore, we recommend building the packages in this chapter as an unprivileged user. You could use your own user name, but to make it easier to set up a clean working environment, create a new user called <em>lfs</em> as a member of a new group (also named <em>lfs</em>) and use this user during the installation process. As <em>root</em>, issue the following commands to add the new user:</p>
<pre><code class="language-sh">groupadd lfs
useradd -s /bin/bash -g lfs -m -k /dev/null lfs
</code></pre>
<p><strong>The meaning of the command line options:</strong></p>
<blockquote>
<p><strong>-s /bin/bash</strong></p>
<blockquote>
<p>This makes bash the default shell for user lfs.</p>
</blockquote>
<p><strong>-g lfs</strong></p>
<blockquote>
<p>This option adds user lfs to group lfs.</p>
</blockquote>
<p><strong>-m</strong></p>
<blockquote>
<p>This creates a home directory for lfs.</p>
</blockquote>
<p><strong>-k /dev/null</strong></p>
<blockquote>
<p>This parameter prevents possible copying of files from a skeleton directory (default is /etc/skel) by changing the input location to the special null device.</p>
</blockquote>
<p><strong>lfs</strong></p>
<blockquote>
<p>This is the actual name for the created group and user.</p>
</blockquote>
</blockquote>
<p>To log in as <em>lfs</em> (as opposed to switching to user <em>lfs</em> when logged in as <em>root</em>, which does not require the <em>lfs</em> user to have a password), give <em>lfs</em> a password:</p>
<pre><code class="language-sh">passwd lfs
</code></pre>
<p>Grant <em>lfs</em> full access to <code>$LFS/tools</code> by making <em>lfs</em> the directory owner:</p>
<pre><code class="language-sh">chown -v lfs $LFS/tools
</code></pre>
<p>If a separate working directory was created as suggested, give user <em>lfs</em> ownership of this directory:</p>
<pre><code class="language-sh">chown -v lfs $LFS/sources
</code></pre>
<p>Next, login as user <em>lfs</em>. This can be done via a virtual console, through a display manager, or with the following substitute user command:</p>
<pre><code class="language-sh">su - lfs
</code></pre>
<p>The “-” instructs <strong>su</strong> to start a login shell as opposed to a non-login shell. The difference between these two types of shells can be found in detail in <code>bash(1)</code> and <strong>info bash</strong>.</p>
<h1><a class="header" href="#setting-up-the-environment" id="setting-up-the-environment">Setting Up the Environment</a></h1>
<p>Set up a good working environment by creating two new startup files for the <strong>bash</strong> shell. While logged in as user <em>lfs</em>, issue the following command to create a new <code>.bash_profile:</code></p>
<pre><code class="language-sh">cat &gt; ~/.bash_profile &lt;&lt; &quot;EOF&quot;
exec env -i HOME=$HOME TERM=$TERM PS1='\u:\w\$ ' /bin/bash
EOF
</code></pre>
<p>When logged on as user <em>lfs</em>, the initial shell is usually a <em>login</em> shell which reads the <code>/etc/profile</code> of the host (probably containing some settings and environment variables) and then <code>.bash_profile</code>. The <strong>exec env -i.../bin/bash</strong> command in the <code>.bash_profile</code> file replaces the running shell with a new one with a completely empty environment, except for the <strong>HOME</strong>, <strong>TERM</strong>, and <strong>PS1</strong> variables. This ensures that no unwanted and potentially hazardous environment variables from the host system leak into the build environment. The technique used here achieves the goal of ensuring a clean environment.</p>
<p>The new instance of the shell is a <em>non-login</em> shell, which does not read the <code>/etc/profile</code> or <code>.bash_profile</code> files, but rather reads the <code>.bashrc</code> file instead. Create the <code>.bashrc</code>file now:</p>
<pre><code class="language-sh">cat &gt; ~/.bashrc &lt;&lt; &quot;EOF&quot;
set +h
umask 022
LFS=/mnt/lfs
LC_ALL=POSIX
LFS_TGT=$(uname -m)-lfs-linux-gnu
PATH=/tools/bin:/bin:/usr/bin
export LFS LC_ALL LFS_TGT PATH
EOF
</code></pre>
<p>The <strong>set +h</strong> command turns off <strong>bash</strong>'s hash function. Hashing is ordinarily a useful feature—<strong>bash</strong> uses a hash table to remember the full path of executable files to avoid searching the <strong>PATH</strong> time and again to find the same executable. However, the new tools should be used as soon as they are installed. By switching off the hash function, the shell will always search the <strong>PATH</strong> when a program is to be run. As such, the shell will find the newly compiled tools in <code>$LFS/tools</code> as soon as they are available without remembering a previous version of the same program in a different location.</p>
<p>Setting the user file-creation mask (umask) to 022 ensures that newly created files and directories are only writable by their owner, but are readable and executable by anyone (assuming default modes are used by the <code>open(2)</code> system call, new files will end up with permission mode 644 and directories with mode 755).</p>
<p>The <strong>LFS</strong> variable should be set to the chosen mount point.</p>
<p>The <strong>LC_ALL</strong> variable controls the localization of certain programs, making their messages follow the conventions of a specified country. Setting <strong>LC_ALL</strong> to “POSIX” or “C” (the two are equivalent) ensures that everything will work as expected in the chroot environment.</p>
<p>The <strong>LFS_TGT</strong> variable sets a non-default, but compatible machine description for use when building our cross compiler and linker and when cross compiling our temporary toolchain. More information is contained in <a href="04-Final-Preparations/../05-Constructing-a-Temporary-System/02-Toolchain-Technical-Notes.html">Section 5.2, “Toolchain Technical Notes”</a>.</p>
<p>By putting <code>/tools/bin</code> ahead of the standard <strong>PATH</strong>, all the programs installed in <a href="04-Final-Preparations/../05-Constructing-a-Temporary-System/index.html">Chapter 5</a> are picked up by the shell immediately after their installation. This, combined with turning off hashing, limits the risk that old programs are used from the host when the same programs are available in the chapter 5 environment.</p>
<p>Finally, to have the environment fully prepared for building the temporary tools, source the just-created user profile:</p>
<pre><code class="language-sh">source ~/.bash_profile
</code></pre>
<h1><a class="header" href="#about-sbus" id="about-sbus">About SBUs</a></h1>
<p>Many people would like to know beforehand approximately how long it takes to compile and install each package. Because Linux From Scratch can be built on many different systems, it is impossible to provide accurate time estimates. The biggest package (Glibc) will take approximately 20 minutes on the fastest systems, but could take up to three days on slower systems! Instead of providing actual times, the Standard Build Unit (SBU) measure will be used instead.</p>
<p>The SBU measure works as follows. The first package to be compiled from this book is Binutils in <a href="04-Final-Preparations/../05-Constructing-a-Temporary-System/index.html">Chapter 5</a>. The time it takes to compile this package is what will be referred to as the Standard Build Unit or SBU. All other compile times will be expressed relative to this time.</p>
<p>For example, consider a package whose compilation time is 4.5 SBUs. This means that if a system took 10 minutes to compile and install the first pass of Binutils, it will take <em>approximately</em> 45 minutes to build this example package. Fortunately, most build times are shorter than the one for Binutils.</p>
<p>In general, SBUs are not entirely accurate because they depend on many factors, including the host system's version of GCC. They are provided here to give an estimate of how long it might take to install a package, but the numbers can vary by as much as dozens of minutes in some cases.</p>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>For many modern systems with multiple processors (or cores) the compilation time for a package can be reduced by performing a &quot;parallel make&quot; by either setting an environment variable or telling the make program how many processors are available. For instance, a Core2Duo can support two simultaneous processes with:</p>
</blockquote>
<pre><code class="language-sh">export MAKEFLAGS='-j 2'
</code></pre>
<blockquote>
<p>or just building with:</p>
</blockquote>
<pre><code class="language-sh">make -j2
</code></pre>
<blockquote>
<p>When multiple processors are used in this way, the SBU units in the book will vary even more than they normally would. In some cases, the make step will simply fail. Analyzing the output of the build process will also be more difficult because the lines of different processes will be interleaved. If you run into a problem with a build step, revert back to a single processor build to properly analyze the error messages.</p>
</blockquote>
</blockquote>
<h1><a class="header" href="#about-the-test-suites" id="about-the-test-suites">About the Test Suites</a></h1>
<p>Most packages provide a test suite. Running the test suite for a newly built package is a good idea because it can provide a “sanity check” indicating that everything compiled correctly. A test suite that passes its set of checks usually proves that the package is functioning as the developer intended. It does not, however, guarantee that the package is totally bug free.</p>
<p>Some test suites are more important than others. For example, the test suites for the core toolchain packages—GCC, Binutils, and Glibc—are of the utmost importance due to their central role in a properly functioning system. The test suites for GCC and Glibc can take a very long time to complete, especially on slower hardware, but are strongly recommended.</p>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>Experience has shown that there is little to be gained from running the test suites in <a href="04-Final-Preparations/../05-Constructing-a-Temporary-System/index.html">Chapter 5</a>. There can be no escaping the fact that the host system always exerts some influence on the tests in that chapter, often causing inexplicable failures. Because the tools built in <a href="04-Final-Preparations/../05-Constructing-a-Temporary-System/index.html">Chapter 5</a> are temporary and eventually discarded, we do not recommend running the test suites in <a href="04-Final-Preparations/../05-Constructing-a-Temporary-System/index.html">Chapter 5</a> for the average reader. The instructions for running those test suites are provided for the benefit of testers and developers, but they are strictly optional.</p>
</blockquote>
</blockquote>
<p>A common issue with running the test suites for Binutils and GCC is running out of pseudo terminals (PTYs). This can result in a high number of failing tests. This may happen for several reasons, but the most likely cause is that the host system does not have the devpts file system set up correctly. This issue is discussed in greater detail at <a href="http://www.linuxfromscratch.org/lfs/faq.html#no-ptys">here</a>.</p>
<p>Sometimes package test suites will fail, but for reasons which the developers are aware of and have deemed non-critical. Consult the <a href="http://www.linuxfromscratch.org/lfs/build-logs/8.4/">logs</a> to verify whether or not these failures are expected. This site is valid for all tests throughout this book.</p>
<h1><a class="header" href="#constructing-a-temporary-system" id="constructing-a-temporary-system">Constructing a Temporary System</a></h1>
<h3><a class="header" href="#table-of-contents-4" id="table-of-contents-4">Table of Contents</a></h3>
<ul>
<li><a href="05-Constructing-a-Temporary-System/./01-Introduction.html">Introduction</a></li>
<li><a href="05-Constructing-a-Temporary-System/./02-Toolchain-Technical-Notes.html">Toolchain Technical Notes</a></li>
<li><a href="05-Constructing-a-Temporary-System/./03-General-Compilation-Instructions.html">General Compilation Instructions</a></li>
<li><a href="05-Constructing-a-Temporary-System/./04-Binutils-2.32-Pass-1.html">Binutils-2.32 - Pass 1</a></li>
<li><a href="05-Constructing-a-Temporary-System/./05-GCC-8.2.0-Pass-1.html">GCC-8.2.0 - Pass 1</a></li>
<li><a href="05-Constructing-a-Temporary-System/./06-Linux-4.20.12-API-Headers.html">Linux-4.20.12 API Headers</a></li>
<li><a href="05-Constructing-a-Temporary-System/./07-Glibc-2.29.html">Glibc-2.29</a></li>
<li><a href="05-Constructing-a-Temporary-System/./08-Libstdc++-from-GCC-8.2.0.html">Libstdc++ from GCC-8.2.0</a></li>
<li><a href="05-Constructing-a-Temporary-System/./09-Binutils-2.32-Pass-2.html">Binutils-2.32 - Pass 2</a></li>
<li><a href="05-Constructing-a-Temporary-System/./10-GCC-8.2.0-Pass-2.html">GCC-8.2.0 - Pass 2</a></li>
<li><a href="05-Constructing-a-Temporary-System/./11-Tcl-8.6.9.html">Tcl-8.6.9</a></li>
<li><a href="05-Constructing-a-Temporary-System/./12-Expect-5.45.4.html">Expect-5.45.4</a></li>
<li><a href="05-Constructing-a-Temporary-System/./13-DejaGNU-1.6.2.html">DejaGNU-1.6.2</a></li>
<li><a href="05-Constructing-a-Temporary-System/./14-M4-1.4.18.html">M4-1.4.18</a></li>
<li><a href="05-Constructing-a-Temporary-System/./15-Ncurses-6.1.html">Ncurses-6.1</a></li>
<li><a href="05-Constructing-a-Temporary-System/./16-Bash-5.0.html">Bash-5.0</a></li>
<li><a href="05-Constructing-a-Temporary-System/./17-Bison-3.3.2.html">Bison-3.3.2</a></li>
<li><a href="05-Constructing-a-Temporary-System/./18-Bzip2-1.0.6.html">Bzip2-1.0.6</a></li>
<li><a href="05-Constructing-a-Temporary-System/./19-Coreutils-8.30.html">Coreutils-8.30</a></li>
<li><a href="05-Constructing-a-Temporary-System/./20-Diffutils-3.7.html">Diffutils-3.7</a></li>
<li><a href="05-Constructing-a-Temporary-System/./21-File-5.36.html">File-5.36</a></li>
<li><a href="05-Constructing-a-Temporary-System/./22-Findutils-4.6.0.html">Findutils-4.6.0</a></li>
<li><a href="05-Constructing-a-Temporary-System/./23-Gawk-4.2.1.html">Gawk-4.2.1</a></li>
<li><a href="05-Constructing-a-Temporary-System/./24-Gettext-0.19.8.1.html">Gettext-0.19.8.1</a></li>
<li><a href="05-Constructing-a-Temporary-System/./25-Grep-3.3.html">Grep-3.3</a></li>
<li><a href="05-Constructing-a-Temporary-System/./26-Gzip-1.10.html">Gzip-1.10</a></li>
<li><a href="05-Constructing-a-Temporary-System/./27-Make-4.2.1.html">Make-4.2.1</a></li>
<li><a href="05-Constructing-a-Temporary-System/./28-Patch-2.7.6.html">Patch-2.7.6</a></li>
<li><a href="05-Constructing-a-Temporary-System/./29-Perl-5.28.1.html">Perl-5.28.1</a></li>
<li><a href="05-Constructing-a-Temporary-System/./30-Python-3.7.2.html">Python-3.7.2</a></li>
<li><a href="05-Constructing-a-Temporary-System/./31-Sed-4.7.html">Sed-4.7</a></li>
<li><a href="05-Constructing-a-Temporary-System/./32-Tar-1.31.html">Tar-1.31</a></li>
<li><a href="05-Constructing-a-Temporary-System/./33-Texinfo-6.5.html">Texinfo-6.5</a></li>
<li><a href="05-Constructing-a-Temporary-System/./34-Util-linux-2.33.1.html">Util-linux-2.33.1</a></li>
<li><a href="05-Constructing-a-Temporary-System/./35-Xz-5.2.4.html">Xz-5.2.4</a></li>
<li><a href="05-Constructing-a-Temporary-System/./36-Stripping.html">Stripping</a></li>
<li><a href="05-Constructing-a-Temporary-System/./37-Changing-Ownership.html">Changing Ownership</a></li>
</ul>
<h1><a class="header" href="#introduction-4" id="introduction-4">Introduction</a></h1>
<p>This chapter shows how to build a minimal Linux system. This system will contain just enough tools to start constructing the final LFS system in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/index.html">Chapter 6</a> and allow a working environment with more user convenience than a minimum environment would.</p>
<p>There are two steps in building this minimal system. The first step is to build a new and host-independent toolchain (compiler, assembler, linker, libraries, and a few useful utilities). The second step uses this toolchain to build the other essential tools.</p>
<p>The files compiled in this chapter will be installed under the <code>$LFS/tools</code> directory to keep them separate from the files installed in the next chapter and the host production directories. Since the packages compiled here are temporary, we do not want them to pollute the soon-to-be LFS system.</p>
<h1><a class="header" href="#toolchain-technical-notes" id="toolchain-technical-notes">Toolchain Technical Notes</a></h1>
<p>This section explains some of the rationale and technical details behind the overall build method. It is not essential to immediately understand everything in this section. Most of this information will be clearer after performing an actual build. This section can be referred to at any time during the process.</p>
<p>The overall goal of <a href="05-Constructing-a-Temporary-System/./index.html">Chapter 5</a> is to produce a temporary area that contains a known-good set of tools that can be isolated from the host system. By using <strong>chroot</strong>, the commands in the remaining chapters will be contained within that environment, ensuring a clean, trouble-free build of the target LFS system. The build process has been designed to minimize the risks for new readers and to provide the most educational value at the same time.</p>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>Before continuing, be aware of the name of the working platform, often referred to as the target triplet. A simple way to determine the name of the target triplet is to run the <strong>config.guess</strong> script that comes with the source for many packages. Unpack the Binutils sources and run the script: <code>./config.guess</code> and note the output. For example, for a 32-bit Intel processor the output will be <em>i686-pc-linux-gnu</em>. On a 64-bit system it will be <em>x86_64-pc-linux-gnu</em>.</p>
</blockquote>
<blockquote>
<p>Also be aware of the name of the platform's dynamic linker, often referred to as the dynamic loader (not to be confused with the standard linker ld that is part of Binutils). The dynamic linker provided by Glibc finds and loads the shared libraries needed by a program, prepares the program to run, and then runs it. The name of the dynamic linker for a 32-bit Intel machine will be <code>ld-linux.so.2</code> (<code>ld-linux-x86-64.so.2</code> for 64-bit systems). A sure-fire way to determine the name of the dynamic linker is to inspect a random binary from the host system by running: <strong>readelf -l &lt;name of binary&gt; | grep interpreter</strong> and noting the output. The authoritative reference covering all platforms is in the <code>shlib-versions</code> file in the root of the Glibc source tree.</p>
</blockquote>
</blockquote>
<p>Some key technical points of how the <a href="05-Constructing-a-Temporary-System/./index.html">Chapter 5</a> build method works:</p>
<ul>
<li>
<p>Slightly adjusting the name of the working platform, by changing the &quot;vendor&quot; field target triplet by way of the <strong>LFS_TGT</strong> variable, ensures that the first build of Binutils and GCC produces a compatible cross-linker and cross-compiler. Instead of producing binaries for another architecture, the cross-linker and cross-compiler will produce binaries compatible with the current hardware.</p>
</li>
<li>
<p>The temporary libraries are cross-compiled. Because a cross-compiler by its nature cannot rely on anything from its host system, this method removes potential contamination of the target system by lessening the chance of headers or libraries from the host being incorporated into the new tools. Cross-compilation also allows for the possibility of building both 32-bit and 64-bit libraries on 64-bit capable hardware.</p>
</li>
<li>
<p>Careful manipulation of the GCC source tells the compiler which target dynamic linker will be used.</p>
</li>
</ul>
<p>Binutils is installed first because the <strong>configure</strong> runs of both GCC and Glibc perform various feature tests on the assembler and linker to determine which software features to enable or disable. This is more important than one might first realize. An incorrectly configured GCC or Glibc can result in a subtly broken toolchain, where the impact of such breakage might not show up until near the end of the build of an entire distribution. A test suite failure will usually highlight this error before too much additional work is performed.</p>
<p>Binutils installs its assembler and linker in two locations, <code>/tools/bin</code> and <code>/tools/\$LFS_TGT/bin</code>. The tools in one location are hard linked to the other. An important facet of the linker is its library search order. Detailed information can be obtained from ld by passing it the --verbose flag. For example, an <strong>ld --verbose | grep SEARCH</strong> will illustrate the current search paths and their order. It shows which files are linked by <strong>ld</strong> by compiling a dummy program and passing the <em>--verbose</em> switch to the linker. For example, <strong>gcc dummy.c -Wl,--verbose 2&gt;&amp;1 | grep succeeded</strong> will show all the files successfully opened during the linking.</p>
<p>The next package installed is GCC. An example of what can be seen during its run of <strong>configure</strong> is:</p>
<pre><code class="language-sh">checking what assembler to use... /tools/i686-lfs-linux-gnu/bin/as
checking what linker to use... /tools/i686-lfs-linux-gnu/bin/ld
</code></pre>
<p>This is important for the reasons mentioned above. It also demonstrates that GCC's configure script does not search the PATH directories to find which tools to use. However, during the actual operation of gcc itself, the same search paths are not necessarily used. To find out which standard linker gcc will use, run: <strong>gcc -print-prog-name=ld</strong>.</p>
<p>Detailed information can be obtained from gcc by passing it the <em>-v</em> command line option while compiling a dummy program. For example, <strong>gcc -v dummy.c</strong> will show detailed information about the preprocessor, compilation, and assembly stages, including <strong>gcc</strong>'s included search paths and their order.</p>
<p>Next installed are sanitized Linux API headers. These allow the standard C library (Glibc) to interface with features that the Linux kernel will provide.</p>
<p>The next package installed is Glibc. The most important considerations for building Glibc are the compiler, binary tools, and kernel headers. The compiler is generally not an issue since Glibc will always use the compiler relating to the <em>--host</em> parameter passed to its configure script; e.g. in our case, the compiler will be <strong>i686-lfs-linux-gnu-gcc</strong>. The binary tools and kernel headers can be a bit more complicated. Therefore, take no risks and use the available configure switches to enforce the correct selections. After the run of <strong>configure</strong>, check the contents of the <code>config.make</code>file in the <code>glibc-build</code> directory for all important details. Note the use of <em>CC=&quot;i686-lfs-gnu-gcc&quot;</em> to control which binary tools are used and the use of the <em>-nostdinc</em> and <em>-isystem</em> flags to control the compiler's include search path. These items highlight an important aspect of the Glibc package—it is very self-sufficient in terms of its build machinery and generally does not rely on toolchain defaults.</p>
<p>During the second pass of Binutils, we are able to utilize the <em>--with-lib-path</em> configure switch to control <strong>ld</strong>'s library search path.</p>
<p>For the second pass of GCC, its sources also need to be modified to tell GCC to use the new dynamic linker. Failure to do so will result in the GCC programs themselves having the name of the dynamic linker from the host system's <code>/lib</code> directory embedded into them, which would defeat the goal of getting away from the host. From this point onwards, the core toolchain is self-contained and self-hosted. The remainder of the <a href="05-Constructing-a-Temporary-System/./index.html">Chapter 5</a> packages all build against the new Glibc in <code>/tools</code>.</p>
<p>Upon entering the chroot environment in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/index.html">Chapter 6</a>, the first major package to be installed is Glibc, due to its self-sufficient nature mentioned above. Once this Glibc is installed into <code>/usr</code>, we will perform a quick changeover of the toolchain defaults, and then proceed in building the rest of the target LFS system.</p>
<h1><a class="header" href="#general-compilation-instructions" id="general-compilation-instructions">General Compilation Instructions</a></h1>
<p>When building packages there are several assumptions made within the instructions:</p>
<ul>
<li>
<p>Several of the packages are patched before compilation, but only when the patch is needed to circumvent a problem. A patch is often needed in both this and the next chapter, but sometimes in only one or the other. Therefore, do not be concerned if instructions for a downloaded patch seem to be missing. Warning messages about offset or fuzz may also be encountered when applying a patch. Do not worry about these warnings, as the patch was still successfully applied.</p>
</li>
<li>
<p>During the compilation of most packages, there will be several warnings that scroll by on the screen. These are normal and can safely be ignored. These warnings are as they appear—warnings about deprecated, but not invalid, use of the C or C++ syntax. C standards change fairly often, and some packages still use the older standard. This is not a problem, but does prompt the warning.</p>
</li>
<li>
<p>Check one last time that the LFS environment variable is set up properly:</p>
</li>
</ul>
<pre><code class="language-sh">echo $LFS
</code></pre>
<p>Make sure the output shows the path to the LFS partition's mount point, which is <code>/mnt/lfs</code>, using our example.</p>
<ul>
<li>Finally, two important items must be emphasized:</li>
</ul>
<blockquote>
<p><strong>Important</strong></p>
<blockquote>
<p>The build instructions assume that the Host System Requirements, including symbolic links, have been set properly:</p>
</blockquote>
<ul>
<li><strong>bash</strong> is the shell in use.</li>
<li><strong>sh</strong> is a symbolic link to <strong>bash</strong>.</li>
<li><code>/usr/bin/awk</code> is a symbolic link to <strong>gawk</strong>.</li>
<li><code>/usr/bin/yacc</code> is a symbolic link to <strong>bison</strong> or a small script that executes <strong>bison</strong>.</li>
</ul>
</blockquote>
<blockquote>
<p><strong>Important</strong></p>
<blockquote>
<ol>
<li>Place all the sources and patches in a directory that will be accessible from the chroot environment such as <code>/mnt/lfs/sources/</code>. Do <strong><em>not</em></strong> put sources in <code>/mnt/lfs/tools/</code>.</li>
<li>Change to the sources directory.</li>
<li>For each package:
<blockquote>
<ul>
<li>Using the <strong>tar</strong> program, extract the package to be built. In Chapter 5, ensure you are the <strong><em>lfs</em></strong> user when extracting the package.</li>
<li>Change to the directory created when the package was extracted.</li>
<li>Follow the book's instructions for building the package.</li>
<li>Change back to the sources directory.</li>
<li>Delete the extracted source directory unless instructed otherwise.</li>
</ul>
</blockquote>
</li>
</ol>
</blockquote>
</blockquote>
<blockquote>
<h1><a class="header" href="#binutils-232---pass-1" id="binutils-232---pass-1">Binutils-2.32 - Pass 1</a></h1>
<p>The Binutils package contains a linker, an assembler, and other tools for handling object files.</p>
<p><strong>Approximate Build Time:</strong> 1 SBU</p>
<p><strong>Required Disk Space:</strong> 580 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-cross-binutils" id="installation-of-cross-binutils">Installation of Cross Binutils</a></h1>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>Go back and re-read the notes in the previous section. Understanding the notes labeled important will save you a lot of problems later.</p>
</blockquote>
</blockquote>
<p>It is important that Binutils be the first package compiled because both Glibc and GCC perform various tests on the available linker and assembler to determine which of their own features to enable.</p>
<p>The Binutils documentation recommends building Binutils in a dedicated build directory:</p>
<pre><code class="language-sh">mkdir -v build
cd       build
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>In order for the SBU values listed in the rest of the book to be of any use, measure the time it takes to build this package from the configuration, up to and including the first install. To achieve this easily, wrap the commands in a <strong>time</strong> command like this: <strong>time { ./configure ... &amp;&amp; ... &amp;&amp; make install; }</strong>.</p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>The approximate build SBU values and required disk space in Chapter 5 does not include test suite data.</p>
</blockquote>
</blockquote>
<h3><a class="header" href="#now-prepare-binutils-for-compilation" id="now-prepare-binutils-for-compilation">Now prepare Binutils for compilation:</a></h3>
<pre><code class="language-sh">../configure --prefix=/tools            \
             --with-sysroot=$LFS        \
             --with-lib-path=/tools/lib \
             --target=$LFS_TGT          \
             --disable-nls              \
             --disable-werror
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-configure-options" id="the-meaning-of-the-configure-options">The meaning of the configure options:</a></h3>
<blockquote>
<p><strong><em>--prefix=/tools</em></strong></p>
<blockquote>
<p>This tells the configure script to prepare to install the Binutils programs in the /tools directory.</p>
</blockquote>
<p><strong><em>--with-sysroot=$LFS</em></strong></p>
<blockquote>
<p>For cross compilation, this tells the build system to look in $LFS for the target system libraries as needed.</p>
</blockquote>
<p><strong><em>--with-lib-path=/tools/lib</em></strong></p>
<blockquote>
<p>This specifies which library path the linker should be configured to use.</p>
</blockquote>
<p><strong><em>--target=$LFS_TGT</em></strong></p>
<blockquote>
<p>Because the machine description in the <strong>LFS_TGT</strong> variable is slightly different than the value returned by the <strong>config.guess</strong> script, this switch will tell the <strong>configure</strong> script to adjust Binutil's build system for building a cross linker.</p>
</blockquote>
<p><strong><em>--disable-nls</em></strong></p>
<blockquote>
<p>This disables internationalization as i18n is not needed for the temporary tools.</p>
</blockquote>
<p><strong><em>--disable-werror</em></strong></p>
<blockquote>
<p>This prevents the build from stopping in the event that there are warnings from the host's compiler.</p>
</blockquote>
</blockquote>
<p>Continue with compiling the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Compilation is now complete. Ordinarily we would now run the test suite, but at this early stage the test suite framework (Tcl, Expect, and DejaGNU) is not yet in place. The benefits of running the tests at this point are minimal since the programs from this first pass will soon be replaced by those from the second.</p>
<p>If building on x86_64, create a symlink to ensure the sanity of the toolchain:</p>
<pre><code class="language-sh">case $(uname -m) in
  x86_64) mkdir -v /tools/lib &amp;&amp; ln -sv lib /tools/lib64 ;;
esac
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/16-Binutils-2.32.html">Section 6.16.2, “Contents of Binutils&quot;</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#gcc-820---pass-1" id="gcc-820---pass-1">GCC-8.2.0 - Pass 1</a></h1>
<p>The GCC package contains the GNU compiler collection, which includes the C and C++ compilers.</p>
<p><strong>Approximate Build Time:</strong> 11 SBU</p>
<p><strong>Required Disk Space:</strong> 2.9 GB</p>
</blockquote>
<h1><a class="header" href="#installation-of-cross-gcc" id="installation-of-cross-gcc">Installation of Cross GCC</a></h1>
<p>GCC now requires the GMP, MPFR and MPC packages. As these packages may not be included in your host distribution, they will be built with GCC. Unpack each package into the GCC source directory and rename the resulting directories so the GCC build procedures will automatically use them:</p>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>There are frequent misunderstandings about this chapter. The procedures are the same as every other chapter as explained earlier (<a href="05-Constructing-a-Temporary-System/./03-General-Compilation-Instructions">Package build instructions</a>). First extract the gcc tarball from the sources directory and then change to the directory created. Only then should you proceed with the instructions below.</p>
</blockquote>
</blockquote>
<pre><code class="language-sh">tar -xf ../mpfr-4.0.2.tar.xz
mv -v mpfr-4.0.2 mpfr
tar -xf ../gmp-6.1.2.tar.xz
mv -v gmp-6.1.2 gmp
tar -xf ../mpc-1.1.0.tar.gz
mv -v mpc-1.1.0 mpc
</code></pre>
<p>The following command will change the location of GCC's default dynamic linker to use the one installed in <code>/tools</code>. It also removes <code>/usr/include</code> from GCC's include search path. Issue:</p>
<pre><code class="language-sh">for file in gcc/config/{linux,i386/linux{,64}}.h
do
  cp -uv $file{,.orig}
  sed -e 's@/lib\(64\)\?\(32\)\?/ld@/tools&amp;@g' \
      -e 's@/usr@/tools@g' $file.orig &gt; $file
  echo '
#undef STANDARD_STARTFILE_PREFIX_1
#undef STANDARD_STARTFILE_PREFIX_2
#define STANDARD_STARTFILE_PREFIX_1 &quot;/tools/lib/&quot;
#define STANDARD_STARTFILE_PREFIX_2 &quot;&quot;' &gt;&gt; $file
  touch $file.orig
done
</code></pre>
<p>In case the above seems hard to follow, let's break it down a bit. First we copy the files <code>gcc/config/linux.h</code>, <code>gcc/config/i386/linux.h</code>, and <code>gcc/config/i368/linux64.h</code> to a file of the same name but with an added suffix of “.orig”. Then the first sed expression prepends “/tools” to every instance of “/lib/ld”, “/lib64/ld” or “/lib32/ld”, while the second one replaces hard-coded instances of “/usr”. Next, we add our define statements which alter the default startfile prefix to the end of the file. Note that the trailing “/” in “/tools/lib/” is required. Finally, we use <strong>touch</strong> to update the timestamp on the copied files. When used in conjunction with <strong>cp -u</strong>, this prevents unexpected changes to the original files in case the commands are inadvertently run twice.</p>
<p>Finally, on x86_64 hosts, set the default directory name for 64-bit libraries to “lib”:</p>
<pre><code class="language-sh">case $(uname -m) in
  x86_64)
    sed -e '/m64=/s/lib64/lib/' \
        -i.orig gcc/config/i386/t-linux64
 ;;
esac
</code></pre>
<p>The GCC documentation recommends building GCC in a dedicated build directory:</p>
<pre><code class="language-sh">mkdir -v build
cd       build
</code></pre>
<p>Prepare GCC for compilation:</p>
<pre><code class="language-sh">../configure                                       \
    --target=$LFS_TGT                              \
    --prefix=/tools                                \
    --with-glibc-version=2.11                      \
    --with-sysroot=$LFS                            \
    --with-newlib                                  \
    --without-headers                              \
    --with-local-prefix=/tools                     \
    --with-native-system-header-dir=/tools/include \
    --disable-nls                                  \
    --disable-shared                               \
    --disable-multilib                             \
    --disable-decimal-float                        \
    --disable-threads                              \
    --disable-libatomic                            \
    --disable-libgomp                              \
    --disable-libmpx                               \
    --disable-libquadmath                          \
    --disable-libssp                               \
    --disable-libvtv                               \
    --disable-libstdcxx                            \
    --enable-languages=c,c++
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-configure-options-1" id="the-meaning-of-the-configure-options-1">The meaning of the configure options:</a></h3>
<blockquote>
<p><strong><em>--with-newlib</em></strong></p>
<blockquote>
<p>Since a working C library is not yet available, this ensures that the inhibit_libc constant is defined when building libgcc. This prevents the compiling of any code that requires libc support.</p>
</blockquote>
<p><strong><em>--without-headers</em></strong></p>
<blockquote>
<p>When creating a complete cross-compiler, GCC requires standard headers compatible with the target system. For our purposes these headers will not be needed. This switch prevents GCC from looking for them.</p>
</blockquote>
<p><strong><em>--with-local-prefix=/tools</em></strong></p>
<blockquote>
<p>The local prefix is the location in the system that GCC will search for locally installed include files. The default is <code>/usr/local</code>. Setting this to <code>/tools</code> helps keep the host location of <code>/usr/local</code> out of this GCC's search path.</p>
</blockquote>
</blockquote>
<blockquote>
<p><strong><em>--with-native-system-header-dir=/tools/include</em></strong></p>
<blockquote>
<p>By default GCC searches <code>/usr/include</code> for system headers. In conjunction with the sysroot switch, this would normally translate to <code>$LFS/usr/include</code>. However the headers that will be installed in the next two sections will go to <code>$LFS/tools/include</code>. This switch ensures that gcc will find them correctly. In the second pass of GCC, this same switch will ensure that no headers from the host system are found.</p>
</blockquote>
<p><strong><em>--disable-shared</em></strong></p>
<blockquote>
<p>This switch forces GCC to link its internal libraries statically. We do this to avoid possible issues with the host system.</p>
</blockquote>
<p><strong><em>--disable-decimal-float, --disable-threads, --disable-libatomic, --disable-libgomp, --disable-libmpx, --disable-libquadmath, --disable-libssp, --disable-libvtv, --disable-libstdcxx</em></strong></p>
<blockquote>
<p>These switches disable support for the decimal floating point extension, threading, libatomic, libgomp, libmpx, libquadmath, libssp, libvtv, and the C++ standard library respectively. These features will fail to compile when building a cross-compiler and are not necessary for the task of cross-compiling the temporary libc.</p>
</blockquote>
<p><strong><em>--disable-multilib</em></strong></p>
<blockquote>
<p>On x86_64, LFS does not yet support a multilib configuration. This switch is harmless for x86.</p>
</blockquote>
<p><strong><em>--enable-languages=c,c++</em></strong></p>
<blockquote>
<p>This option ensures that only the C and C++ compilers are built. These are the only languages needed now.</p>
</blockquote>
</blockquote>
<p>Compile GCC by running:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Compilation is now complete. At this point, the test suite would normally be run, but, as mentioned before, the test suite framework is not in place yet. The benefits of running the tests at this point are minimal since the programs from this first pass will soon be replaced.</p>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/21-GCC-8.2.0.html">Section 6.21.2, “Contents of GCC”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#linux-42012-api-headers" id="linux-42012-api-headers">Linux-4.20.12 API Headers</a></h1>
<p>The Linux API Headers (in linux-4.20.12.tar.xz) expose the kernel's API for use by Glibc.</p>
<p><strong>Approximate Build Time:</strong> 0.1 SBU</p>
<p><strong>Required Disk Space:</strong> 937 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-linux-api-headers" id="installation-of-linux-api-headers">Installation of Linux API Headers</a></h1>
<p>The Linux kernel needs to expose an Application Programming Interface (API) for the system's C library (Glibc in LFS) to use. This is done by way of sanitizing various C header files that are shipped in the Linux kernel source tarball.</p>
<p>Make sure there are no stale files embedded in the package:</p>
<pre><code class="language-sh">make mrproper
</code></pre>
<p>Now extract the user-visible kernel headers from the source. They are placed in an intermediate local directory and copied to the needed location because the extraction process removes any existing files in the target directory.</p>
<pre><code class="language-sh">make INSTALL_HDR_PATH=dest headers_install
cp -rv dest/include/* /tools/include
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/07-Linux-4.20.12-API-Headers.html">Section 6.7.2, “Contents of Linux API Headers”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#glibc-229" id="glibc-229">Glibc-2.29</a></h1>
<p>The Glibc package contains the main C library. This library provides the basic routines for allocating memory, searching directories, opening and closing files, reading and writing files, string handling, pattern matching, arithmetic, and so on.</p>
<p><strong>Approximate Build Time:</strong> 5.1 SBU</p>
<p><strong>Required Disk Space:</strong> 885 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-glibc" id="installation-of-glibc">Installation of Glibc</a></h1>
<p>The Glibc documentation recommends building Glibc in a dedicated build directory:</p>
<pre><code class="language-sh">mkdir -v build
cd       build
</code></pre>
<p>Next, prepare Glibc for compilation:</p>
<pre><code class="language-sh">../configure                             \
      --prefix=/tools                    \
      --host=$LFS_TGT                    \
      --build=$(../scripts/config.guess) \
      --enable-kernel=3.2                \
      --with-headers=/tools/include
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-configure-options-2" id="the-meaning-of-the-configure-options-2">The meaning of the configure options:</a></h3>
<blockquote>
<p><strong><em>--host=$LFS_TGT, --build=$(../scripts/config.guess)</em></strong></p>
<blockquote>
<p>The combined effect of these switches is that Glibc's build system configures itself to cross-compile, using the cross-linker and cross-compiler in <code>/tools</code>.</p>
</blockquote>
<p><strong><em>--enable-kernel=3.2</em></strong></p>
<blockquote>
<p>This tells Glibc to compile the library with support for 3.2 and later Linux kernels. Workarounds for older kernels are not enabled.</p>
</blockquote>
<p><strong><em>--with-headers=/tools/include</em></strong></p>
<blockquote>
<p>This tells Glibc to compile itself against the headers recently installed to the tools directory, so that it knows exactly what features the kernel has and can optimize itself accordingly.</p>
</blockquote>
</blockquote>
<p>During this stage the following warning might appear:</p>
<pre><code class="language-sh">configure: WARNING:
*** These auxiliary programs are missing or
*** incompatible versions: msgfmt
*** some features will be disabled.
*** Check the INSTALL file for required versions.
</code></pre>
<p>The missing or incompatible <strong>msgfmt</strong> program is generally harmless. This <strong>msgfmt</strong> program is part of the Gettext package which the host distribution should provide.</p>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>There have been reports that this package may fail when building as a &quot;parallel make&quot;. If this occurs, rerun the make command with a &quot;-j1&quot; option.</p>
</blockquote>
</blockquote>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p><strong>Caution</strong></p>
<blockquote>
<p>At this point, it is imperative to stop and ensure that the basic functions (compiling and linking) of the new toolchain are working as expected. To perform a sanity check, run the following commands:</p>
<pre><code class="language-sh">echo 'int main(){}' &gt; dummy.c
$LFS_TGT-gcc dummy.c
readelf -l a.out | grep ': /tools'
</code></pre>
<p>If everything is working correctly, there should be no errors, and the output of the last command will be of the form:</p>
<pre><code class="language-sh">[Requesting program interpreter: /tools/lib64/ld-linux-x86-64.so.2]
</code></pre>
<p>Note that for 32-bit machines, the interpreter name will be /tools/lib/ld-linux.so.2.</p>
</blockquote>
<blockquote>
<p>If the output is not shown as above or there was no output at all, then something is wrong. Investigate and retrace the steps to find out where the problem is and correct it. This issue must be resolved before continuing on.</p>
</blockquote>
<blockquote>
<p>Once all is well, clean up the test files:</p>
<pre><code class="language-sh">rm -v dummy.c a.out
</code></pre>
</blockquote>
</blockquote>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>Building Binutils in the section after next will serve as an additional check that the toolchain has been built properly. If Binutils fails to build, it is an indication that something has gone wrong with the previous Binutils, GCC, or Glibc installations.</p>
</blockquote>
</blockquote>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/09-Glibc-2.29.html">Section 6.9.3, “Contents of Glibc”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#libstdc-from-gcc-820" id="libstdc-from-gcc-820">Libstdc++ from GCC-8.2.0</a></h1>
<p>Libstdc++ is the standard C++ library. It is needed to compile C++ code (part of GCC is written in C++), but we had to defer its installation when we built <a href="05-Constructing-a-Temporary-System/./05-GCC-8.2.0-Pass-1">gcc-pass1</a> because it depends on glibc, which was not yet available in <code>/tools</code>.</p>
<p><strong>Approximate Build Time:</strong> 0.5 SBU</p>
<p><strong>Required Disk Space:</strong> 803 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-target-libstdc" id="installation-of-target-libstdc">Installation of Target Libstdc++</a></h1>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>Libstdc++ is part of the GCC sources. You should first unpack the GCC tarball and change to the <code>gcc-8.2.0</code> directory.</p>
</blockquote>
</blockquote>
<p>Create a separate build directory for Libstdc++ and enter it:</p>
<pre><code class="language-sh">mkdir -v build
cd       build
</code></pre>
<p>Prepare Libstdc++ for compilation:</p>
<pre><code class="language-sh">../libstdc++-v3/configure           \
    --host=$LFS_TGT                 \
    --prefix=/tools                 \
    --disable-multilib              \
    --disable-nls                   \
    --disable-libstdcxx-threads     \
    --disable-libstdcxx-pch         \
    --with-gxx-include-dir=/tools/$LFS_TGT/include/c++/8.2.0
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-configure-options-3" id="the-meaning-of-the-configure-options-3">The meaning of the configure options:</a></h3>
<blockquote>
<p><strong><em>--host=...</em></strong></p>
<blockquote>
<p>Indicates to use the cross compiler we have just built instead of the one in <code>/usr/bin</code>.
<strong>_ --disable-libstdcxx-threads_</strong></p>
</blockquote>
<blockquote>
<p>Since we have not yet built the C threads library, the C++ one cannot be built either.</p>
</blockquote>
<p><strong><em>--disable-libstdcxx-pch</em></strong></p>
<blockquote>
<p>This switch prevents the installation of precompiled include files, which are not needed at this stage.</p>
</blockquote>
<p><strong><em>--with-gxx-include-dir=/tools/$LFS_TGT/include/c++/8.2.0</em></strong></p>
<blockquote>
<p>This is the location where the standard include files are searched by the C++ compiler. In a normal build, this information is automatically passed to the Libstdc++ configure options from the top level directory. In our case, this information must be explicitly given.</p>
</blockquote>
</blockquote>
<p>Compile libstdc++ by running:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Install the library:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/21-GCC-8.2.0.html">Section 6.21.2, “Contents of GCC”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#binutils-232---pass-2" id="binutils-232---pass-2">Binutils-2.32 - Pass 2</a></h1>
<p>The Binutils package contains a linker, an assembler, and other tools for handling object files.</p>
<p><strong>Approximate Build Time:</strong> 1.1 SBU</p>
<p><strong>Required Disk Space:</strong> 598 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-binutils" id="installation-of-binutils">Installation of Binutils</a></h1>
<p>Create a separate build directory again:</p>
<pre><code class="language-sh"> mkdir -v build
cd       build
</code></pre>
<p>Prepare Binutils for compilation:</p>
<pre><code class="language-sh">CC=$LFS_TGT-gcc                \
AR=$LFS_TGT-ar                 \
RANLIB=$LFS_TGT-ranlib         \
../configure                   \
    --prefix=/tools            \
    --disable-nls              \
    --disable-werror           \
    --with-lib-path=/tools/lib \
    --with-sysroot
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-new-configure-options" id="the-meaning-of-the-new-configure-options">The meaning of the new configure options:</a></h3>
<blockquote>
<p><strong><em>CC=$LFS_TGT-gcc AR=$LFS_TGT-ar RANLIB=$LFS_TGT-ranlib</em></strong></p>
<blockquote>
<p>Because this is really a native build of Binutils, setting these variables ensures that the build system uses the cross-compiler and associated tools instead of the ones on the host system.</p>
</blockquote>
<p><strong><em>--with-lib-path=/tools/lib</em></strong></p>
<blockquote>
<p>This tells the configure script to specify the library search path during the compilation of Binutils, resulting in /tools/lib being passed to the linker. This prevents the linker from searching through library directories on the host.</p>
</blockquote>
<p><strong><em>--with-sysroot</em></strong></p>
<blockquote>
<p>The sysroot feature enables the linker to find shared objects which are required by other shared objects explicitly included on the linker's command line. Without this, some packages may not build successfully on some hosts.</p>
</blockquote>
</blockquote>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<p>Now prepare the linker for the “Re-adjusting” phase in the next chapter:</p>
<pre><code class="language-sh">make -C ld clean
make -C ld LIB_PATH=/usr/lib:/lib
cp -v ld/ld-new /tools/bin
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-make-parameters" id="the-meaning-of-the-make-parameters">The meaning of the make parameters:</a></h3>
<blockquote>
<p><strong><em>-C ld clean</em></strong></p>
<blockquote>
<p>This tells the make program to remove all compiled files in the ld subdirectory.</p>
</blockquote>
<p><strong><em>-C ld LIB_PATH=/usr/lib:/lib</em></strong></p>
<blockquote>
<p>This option rebuilds everything in the ld subdirectory. Specifying the LIB_PATH Makefile variable on the command line allows us to override the default value of the temporary tools and point it to the proper final path. The value of this variable specifies the linker's default library search path. This preparation is used in the next chapter.</p>
</blockquote>
</blockquote>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/16-Binutils-2.32.html">Section 6.16.2, “Contents of Binutils”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#gcc-820---pass-2" id="gcc-820---pass-2">GCC-8.2.0 - Pass 2</a></h1>
<p>The GCC package contains the GNU compiler collection, which includes the C and C++ compilers.</p>
<p><strong>Approximate Build Time:</strong> 14 SBU</p>
<p><strong>Required Disk Space:</strong> 3.4 GB</p>
</blockquote>
<h1><a class="header" href="#installation-of-gcc" id="installation-of-gcc">Installation of GCC</a></h1>
<p>Our first build of GCC has installed a couple of internal system headers. Normally one of them, <code>limits.h</code>, will in turn include the corresponding system <code>limits.h</code> header, in this case, <code>/tools/include/limits.h</code>. However, at the time of the first build of gcc <code>/tools/include/limits.h</code> did not exist, so the internal header that GCC installed is a partial, self-contained file and does not include the extended features of the system header. This was adequate for building the temporary libc, but this build of GCC now requires the full internal header. Create a full version of the internal header using a command that is identical to what the GCC build system does in normal circumstances:</p>
<pre><code class="language-sh">cat gcc/limitx.h gcc/glimits.h gcc/limity.h &gt; \
 `dirname $($LFS_TGT-gcc -print-libgcc-file-name)`/include-fixed/limits.h
</code></pre>
<p>Once again, change the location of GCC's default dynamic linker to use the one installed in /tools.</p>
<pre><code class="language-sh">for file in gcc/config/{linux,i386/linux{,64}}.h
do
cp -uv $file{,.orig}
  sed -e 's@/lib\(64\)\?\(32\)\?/ld@/tools&amp;@g' \
      -e 's@/usr@/tools@g' $file.orig &gt; $file
  echo '
#undef STANDARD_STARTFILE_PREFIX_1
#undef STANDARD_STARTFILE_PREFIX_2
#define STANDARD_STARTFILE_PREFIX_1 &quot;/tools/lib/&quot;
#define STANDARD_STARTFILE_PREFIX_2 &quot;&quot;' &gt;&gt; $file
touch \$file.orig
done
</code></pre>
<p>If building on x86_64, change the default directory name for 64-bit libraries to “lib”:</p>
<pre><code class="language-sh">case \$(uname -m) in
x86_64)
sed -e '/m64=/s/lib64/lib/' \
 -i.orig gcc/config/i386/t-linux64
;;
esac
</code></pre>
<p>As in the first build of <strong>GCC</strong> it requires the <strong>GMP</strong>, <strong>MPFR</strong> and <strong>MPC</strong> packages. Unpack the tarballs and move them into the required directory names:</p>
<pre><code class="language-sh">tar -xf ../mpfr-4.0.2.tar.xz
mv -v mpfr-4.0.2 mpfr
tar -xf ../gmp-6.1.2.tar.xz
mv -v gmp-6.1.2 gmp
tar -xf ../mpc-1.1.0.tar.gz
mv -v mpc-1.1.0 mpc
</code></pre>
<p>Create a separate build directory again:</p>
<pre><code class="language-sh">mkdir -v build
cd build
</code></pre>
<p>Before starting to build GCC, remember to unset any environment variables that override the default optimization flags.</p>
<p>Now prepare GCC for compilation:</p>
<pre><code class="language-sh">CC=$LFS_TGT-gcc                                    \
CXX=$LFS_TGT-g++ \
AR=$LFS_TGT-ar                                     \
RANLIB=$LFS_TGT-ranlib \
../configure \
 --prefix=/tools \
 --with-local-prefix=/tools \
 --with-native-system-header-dir=/tools/include \
 --enable-languages=c,c++ \
 --disable-libstdcxx-pch \
 --disable-multilib \
 --disable-bootstrap \
 --disable-libgomp
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-new-configure-options-1" id="the-meaning-of-the-new-configure-options-1">The meaning of the new configure options:</a></h3>
<blockquote>
<p><strong><em>--enable-languages=c,c++</em></strong></p>
<blockquote>
<p>This option ensures that both the C and C++ compilers are built.</p>
</blockquote>
<p><strong><em>--disable-libstdcxx-pch</em></strong></p>
<blockquote>
<p>Do not build the pre-compiled header (PCH) for libstdc++. It takes up a lot of space, and we have no use for it.</p>
</blockquote>
<p><strong><em>--disable-bootstrap</em></strong></p>
<blockquote>
<p>For native builds of GCC, the default is to do a &quot;bootstrap&quot; build. This does not just compile GCC, but compiles it several times. It uses the programs compiled in a first round to compile itself a second time, and then again a third time. The second and third iterations are compared to make sure it can reproduce itself flawlessly. This also implies that it was compiled correctly. However, the LFS build method should provide a solid compiler without the need to bootstrap each time.</p>
</blockquote>
</blockquote>
<p>Compile the package:</p>
<pre><code class="language-sh">make
``

Install the package:

```sh
make install
</code></pre>
<p>As a finishing touch, create a symlink. Many programs and scripts run cc instead of gcc, which is used to keep programs generic and therefore usable on all kinds of UNIX systems where the GNU C compiler is not always installed. Running cc leaves the system administrator free to decide which C compiler to install:</p>
<pre><code class="language-sh">ln -sv gcc /tools/bin/cc
</code></pre>
<blockquote>
<p><strong>Caution</strong></p>
<p>At this point, it is imperative to stop and ensure that the basic functions (compiling and linking) of the new toolchain are working as expected. To perform a sanity check, run the following commands:</p>
<blockquote>
<pre><code class="language-sh">echo 'int main(){}' &gt; dummy.c
cc dummy.c
readelf -l a.out | grep ': /tools'
</code></pre>
</blockquote>
<p>If everything is working correctly, there should be no errors, and the output of the last command will be of the form:</p>
<blockquote>
<pre><code class="language-sh">[Requesting program interpreter: /tools/lib64/ld-linux-x86-64.so.2]
</code></pre>
</blockquote>
<p>Note that the dynamic linker will be /tools/lib/ld-linux.so.2 for 32-bit machines.</p>
<p>If the output is not shown as above or there was no output at all, then something is wrong. Investigate and retrace the steps to find out where the problem is and correct it. This issue must be resolved before continuing on. First, perform the sanity check again, using <strong>gcc</strong> instead of <strong>cc</strong>. If this works, then the <code>/tools/bin/cc</code> symlink is missing. Install the symlink as per above. Next, ensure that the <strong>PATH</strong> is correct. This can be checked by running <strong>echo $PATH</strong> and verifying that <code>/tools/bin</code> is at the head of the list. If the <strong>PATH</strong> is wrong it could mean that you are not logged in as user <em>lfs</em> or that something went wrong back in <a href="05-Constructing-a-Temporary-System/../04-Final-Preparations/04-Setting-Up-the-Environment.html">Section 4.4, “Setting Up the Environment”</a>.</p>
<p>Once all is well, clean up the test files:</p>
<blockquote>
<pre><code class="language-sh">rm -v dummy.c a.out
</code></pre>
</blockquote>
</blockquote>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/21-GCC-8.2.0.html">Section 6.16.2, “Contents of GCC</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#tcl-869" id="tcl-869">Tcl-8.6.9</a></h1>
<p>The Tcl package contains the Tool Command Language.</p>
<p><strong>Approximate Build Time:</strong> 0.9 SBU</p>
<p><strong>Required Disk Space:</strong> 66 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-tcl" id="installation-of-tcl">Installation of Tcl</a></h1>
<p>This package and the next two (Expect and DejaGNU) are installed to support running the test suites for GCC and Binutils and other packages. Installing three packages for testing purposes may seem excessive, but it is very reassuring, if not essential, to know that the most important tools are working properly. Even if the test suites are not run in this chapter (they are not mandatory), these packages are required to run the test suites in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/index.html">Chapter 6</a>.</p>
<p>Note that the Tcl package used here is a minimal version needed to run the LFS tests. For the full package, see the <a href="http://www.linuxfromscratch.org/blfs/view/8.4/general/tcl.html">BLFS Tcl procedures</a>.</p>
<p>Prepare Tcl for compilation:</p>
<pre><code class="language-sh">cd unix
./configure --prefix=/tools
</code></pre>
<p>Build the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Compilation is now complete. As discussed earlier, running the test suite is not mandatory for the temporary tools here in this chapter. To run the Tcl test suite anyway, issue the following command:</p>
<pre><code class="language-sh">TZ=UTC make test
</code></pre>
<p>The Tcl test suite may experience failures under certain host conditions that are not fully understood. Therefore, test suite failures here are not surprising, and are not considered critical. The TZ=UTC parameter sets the time zone to Coordinated Universal Time (UTC), but only for the duration of the test suite run. This ensures that the clock tests are exercised correctly. Details on the TZ environment variable are provided in <a href="05-Constructing-a-Temporary-System/../07-System-Configuration/index.html">Chapter 7</a>.</p>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<p>Make the installed library writable so debugging symbols can be removed later:</p>
<pre><code class="language-sh">chmod -v u+w /tools/lib/libtcl8.6.so
</code></pre>
<p>Install Tcl's headers. The next package, Expect, requires them to build.</p>
<pre><code class="language-sh">make install-private-headers
</code></pre>
<p>Now make a necessary symbolic link:</p>
<pre><code class="language-sh">ln -sv tclsh8.6 /tools/bin/tclsh
</code></pre>
<blockquote>
<h2><a class="header" href="#contents-of-tcl" id="contents-of-tcl">Contents of Tcl</a></h2>
<p><strong>Installed Programs:</strong> tclsh (link to tclsh8.6) and tclsh8.6</p>
<p><strong>Installed Library:</strong> libtcl8.6.so, libtclstub8.6.a</p>
<table><thead><tr><th align="left">Installed</th><th>Description</th></tr></thead><tbody>
<tr><td align="left"><strong>tclsh8.6</strong></td><td>The Tcl command shell</td></tr>
<tr><td align="left"><strong>tclsh</strong></td><td>A link to tclsh8.6</td></tr>
<tr><td align="left">libtcl8.6.so</td><td>The Tcl library</td></tr>
<tr><td align="left">libtclstub8.6.a</td><td>The Tcl Stub library</td></tr>
</tbody></table>
</blockquote>
<blockquote>
<h1><a class="header" href="#expect-5454" id="expect-5454">Expect-5.45.4</a></h1>
<p>The Expect package contains a program for carrying out scripted dialogues with other interactive programs.</p>
<p><strong>Approximate Build Time:</strong> 0.1 SBU</p>
<p><strong>Required Disk Space:</strong> 3.9 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-expect" id="installation-of-expect">Installation of Expect</a></h1>
<p>First, force Expect's configure script to use <code>/bin/stty</code> instead of a <code>/usr/local/bin/stty</code> it may find on the host system. This will ensure that our test suite tools remain sane for the final builds of our toolchain:</p>
<pre><code class="language-sh">cp -v configure{,.orig}
sed 's:/usr/local/bin:/bin:' configure.orig &gt; configure
</code></pre>
<p>Now prepare Expect for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools \
 --with-tcl=/tools/lib \
 --with-tclinclude=/tools/include
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-configure-options-4" id="the-meaning-of-the-configure-options-4">The meaning of the configure options:</a></h3>
<blockquote>
<p><strong><em>--with-tcl=/tools/lib</em></strong></p>
<blockquote>
<p>This ensures that the configure script finds the Tcl installation in the temporary tools location instead of possibly locating an existing one on the host system.</p>
</blockquote>
<p><strong><em>--with-tclinclude=/tools/include</em></strong></p>
<blockquote>
<p>This explicitly tells Expect where to find Tcl's internal headers. Using this option avoids conditions where configure fails because it cannot automatically discover the location of Tcl's headers.</p>
</blockquote>
</blockquote>
<p>Build the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Compilation is now complete. As discussed earlier, running the test suite is not mandatory for the temporary tools here in this chapter. To run the Expect test suite anyway, issue the following command:</p>
<pre><code class="language-sh">make test
</code></pre>
<p>Note that the Expect test suite is known to experience failures under certain host conditions that are not within our control. Therefore, test suite failures here are not surprising and are not considered critical.</p>
<p>Install the package:</p>
<pre><code class="language-sh">make SCRIPTS=&quot;&quot; install
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-make-parameter" id="the-meaning-of-the-make-parameter">The meaning of the make parameter:</a></h3>
<blockquote>
<p><strong><em>SCRIPTS=&quot;&quot;</em></strong></p>
<blockquote>
<p>This prevents installation of the supplementary Expect scripts, which are not needed.</p>
</blockquote>
</blockquote>
<blockquote>
<h2><a class="header" href="#contents-of-expect" id="contents-of-expect">Contents of Expect</a></h2>
<p><strong>Installed Programs:</strong> expect</p>
<p><strong>Installed Library:</strong> libexpect-5.45.so</p>
<table><thead><tr><th align="left">Installed</th><th>Descriptions</th></tr></thead><tbody>
<tr><td align="left"><strong>expect</strong></td><td>Communicates with other interactive programs according to a script</td></tr>
<tr><td align="left">libexpect-5.45.so</td><td>Contains functions that allow Expect to be used as a Tcl extension or to be used directly from C or C++ (without Tcl)</td></tr>
</tbody></table>
</blockquote>
<blockquote>
<h1><a class="header" href="#dejagnu-162" id="dejagnu-162">DejaGNU-1.6.2</a></h1>
<p>The DejaGNU package contains a framework for testing other programs.</p>
<p><strong>Approximate Build Time:</strong> less than 0.1 SBU</p>
<p><strong>Required Disk Space:</strong> 3.2 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-dejagnu" id="installation-of-dejagnu">Installation of DejaGNU</a></h1>
<p>Prepare DejaGNU for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools
</code></pre>
<p>Build and install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<p>To test the results, issue:</p>
<pre><code class="language-sh">make check
</code></pre>
<blockquote>
<h2><a class="header" href="#contents-of-dejagnu" id="contents-of-dejagnu">Contents of DejaGNU</a></h2>
<p><strong>Installed Programs:</strong> runtest</p>
<table><thead><tr><th align="left">Installed</th><th>Descriptions</th></tr></thead><tbody>
<tr><td align="left"><strong>runtest</strong></td><td>A wrapper script that locates the proper expect shell and then runs DejaGNU</td></tr>
</tbody></table>
</blockquote>
<blockquote>
<h1><a class="header" href="#m4-1418" id="m4-1418">M4-1.4.18</a></h1>
<p>The M4 package contains a macro processor.</p>
<p><strong>Approximate Build Time:</strong> 0.2 SBU</p>
<p><strong>Required Disk Space:</strong> 20 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-m4" id="installation-of-m4">Installation of M4</a></h1>
<p>First, make some fixes required by glibc-2.28:</p>
<pre><code class="language-sh">sed -i 's/IO_ftrylockfile/IO_EOF_SEEN/' lib/\*.c
echo &quot;#define \_IO_IN_BACKUP 0x100&quot; &gt;&gt; lib/stdio-impl.h
</code></pre>
<p>Prepare M4 for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools
</code></pre>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Compilation is now complete. As discussed earlier, running the test suite is not mandatory for the temporary tools here in this chapter. To run the M4 test suite anyway, issue the following command:</p>
<pre><code class="language-sh">make check
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/14-M4-1.4.18.html">Section 6.14.2, “Contents of M4”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#ncurses-61" id="ncurses-61">Ncurses-6.1</a></h1>
<p>The Ncurses package contains libraries for terminal-independent handling of character screens.</p>
<p><strong>Approximate Build Time:</strong> 0.6 SBU</p>
<p><strong>Required Disk Space:</strong> 41 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-ncurses" id="installation-of-ncurses">Installation of Ncurses</a></h1>
<p>First, ensure that gawk is found first during configuration:</p>
<pre><code class="language-sh">sed -i s/mawk// configure
</code></pre>
<p>Prepare Ncurses for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools \
 --with-shared \
 --without-debug \
 --without-ada \
 --enable-widec \
 --enable-overwrite
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-configure-options-5" id="the-meaning-of-the-configure-options-5">The meaning of the configure options:</a></h3>
<blockquote>
<p><strong><em>--without-ada</em></strong></p>
<blockquote>
<p>This ensures that Ncurses does not build support for the Ada compiler which may be present on the host but will not be available once we enter the <strong>chroot</strong> environment.</p>
</blockquote>
<p><strong><em>--enable-overwrite</em></strong></p>
<blockquote>
<p>This tells Ncurses to install its header files into <code>/tools/include</code>, instead of <code>/tools/include/ncurses</code>, to ensure that other packages can find the Ncurses headers successfully.</p>
</blockquote>
<p><strong><em>--enable-widec</em></strong></p>
<blockquote>
<p>This switch causes wide-character libraries (e.g., <code>libncursesw.so.6.1</code>) to be built instead of normal ones (e.g., <code>libncurses.so.6.1</code>). These wide-character libraries are usable in both multibyte and traditional 8-bit locales, while normal libraries work properly only in 8-bit locales. Wide-character and normal libraries are source-compatible, but not binary-compatible.</p>
</blockquote>
</blockquote>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>This package has a test suite, but it can only be run after the package has been installed. The tests reside in the test/ directory. See the README file in that directory for further details.</p>
<p>Install the package:</p>
<pre><code class="language-sh">make install
ln -s libncursesw.so /tools/lib/libncurses.so
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/24-Ncurses-6.1.html">Section 6.24.2, “Contents of Ncurses”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#bash-50" id="bash-50">Bash-5.0</a></h1>
<p>The Bash package contains the Bourne-Again SHell.</p>
<p><strong>Approximate Build Time:</strong> 0.4 SBU</p>
<p><strong>Required Disk Space:</strong> 67 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-bash" id="installation-of-bash">Installation of Bash</a></h1>
<p>Prepare Bash for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools --without-bash-malloc
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-configure-options-6" id="the-meaning-of-the-configure-options-6">The meaning of the configure options:</a></h3>
<blockquote>
<p><strong><em>--without-bash-malloc</em></strong></p>
<blockquote>
<p>This option turns off the use of Bash's memory allocation (<code>malloc</code>) function which is known to cause segmentation faults. By turning this option off, Bash will use the <code>malloc</code> functions from Glibc which are more stable.</p>
</blockquote>
</blockquote>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Compilation is now complete. As discussed earlier, running the test suite is not mandatory for the temporary tools here in this chapter. To run the Bash test suite anyway, issue the following command:</p>
<pre><code class="language-sh">make tests
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<p>Make a link for the programs that use sh for a shell:</p>
<pre><code class="language-sh">ln -sv bash /tools/bin/sh
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/34-Bash-5.0.html">Section 6.34.2, “Contents of Bash”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#bison-332" id="bison-332">Bison-3.3.2</a></h1>
<p>The Bison package contains a parser generator.</p>
<p><strong>Approximate Build Time:</strong> 0.3 SBU</p>
<p><strong>Required Disk Space:</strong> 37 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-bison" id="installation-of-bison">Installation of Bison</a></h1>
<p>Prepare Bison for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools
</code></pre>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>To test the results, issue:</p>
<pre><code class="language-sh">make check
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/31-Bison-3.3.2.html">Section 6.31.2, “Contents of Bison”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#bzip2-106" id="bzip2-106">Bzip2-1.0.6</a></h1>
<p>The Bzip2 package contains programs for compressing and decompressing files. Compressing text files with <strong>bzip2</strong> yields a much better compression percentage than with the traditional <strong>gzip</strong>.</p>
<p><strong>Approximate Build Time:</strong> 0.1 SBU</p>
<p><strong>Required Disk Space:</strong> 5.5 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-bzip2" id="installation-of-bzip2">Installation of Bzip2</a></h1>
<p>The Bzip2 package does not contain a <strong>configure</strong> script. Compile and test it with:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make PREFIX=/tools install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/22-Bzip2-1.0.6.html">Section 6.22.2, “Contents of Bzip2”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#coreutils-830" id="coreutils-830">Coreutils-8.30</a></h1>
<p>The Coreutils package contains utilities for showing and setting the basic system characteristics.</p>
<p><strong>Approximate Build Time:</strong> 0.8 SBU</p>
<p><strong>Required Disk Space:</strong> 148 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-coreutils" id="installation-of-coreutils">Installation of Coreutils</a></h1>
<p>Prepare Coreutils for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools --enable-install-program=hostname
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-configure-options-7" id="the-meaning-of-the-configure-options-7">The meaning of the configure options:</a></h3>
<blockquote>
<p><strong><em>--enable-install-program=hostname</em></strong></p>
<blockquote>
<p>This enables the <strong>hostname</strong> binary to be built and installed – it is disabled by default but is required by the Perl test suite.</p>
</blockquote>
</blockquote>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Compilation is now complete. As discussed earlier, running the test suite is not mandatory for the temporary tools here in this chapter. To run the Coreutils test suite anyway, issue the following command:</p>
<pre><code class="language-sh">make RUN_EXPENSIVE_TESTS=yes check
</code></pre>
<p>The <em>RUN_EXPENSIVE_TESTS=yes</em> parameter tells the test suite to run several additional tests that are considered relatively expensive (in terms of CPU power and memory usage) on some platforms, but generally are not a problem on Linux.</p>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/54-Coreutils-8.30.html">Section 6.54.2, “Contents of Coreutils”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#diffutils-37" id="diffutils-37">Diffutils-3.7</a></h1>
<p>The Diffutils package contains programs that show the differences between files or directories.</p>
<p><strong>Approximate Build Time:</strong> 0.2 SBU</p>
<p><strong>Required Disk Space:</strong> 26 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-diffutils" id="installation-of-diffutils">Installation of Diffutils</a></h1>
<p>Prepare Diffutils for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools
</code></pre>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Compilation is now complete. As discussed earlier, running the test suite is not mandatory for the temporary tools here in this chapter. To run the Diffutils test suite anyway, issue the following command:</p>
<pre><code class="language-sh">make check
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/56-Diffutils-3.7.html">Section 6.56.2, “Contents of Diffutils”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#file-536" id="file-536">File-5.36</a></h1>
<p>The File package contains a utility for determining the type of a given file or files.</p>
<p><strong>Approximate Build Time:</strong> 0.1 SBU</p>
<p><strong>Required Disk Space:</strong> 18 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-file" id="installation-of-file">Installation of File</a></h1>
<p>Prepare File for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools
</code></pre>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Compilation is now complete. As discussed earlier, running the test suite is not mandatory for the temporary tools here in this chapter. To run the File test suite anyway, issue the following command:</p>
<pre><code class="language-sh">make check
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/12-File-5.36.html">Section 6.12.2, “Contents of File”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#findutils-460" id="findutils-460">Findutils-4.6.0</a></h1>
<p>The Findutils package contains programs to find files. These programs are provided to recursively search through a directory tree and to create, maintain, and search a database (often faster than the recursive find, but unreliable if the database has not been recently updated).</p>
<p><strong>Approximate Build Time:</strong> 0.3 SBU</p>
<p><strong>Required Disk Space:</strong> 36 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-findutils" id="installation-of-findutils">Installation of Findutils</a></h1>
<p>First, make some fixes required by glibc-2.28:</p>
<pre><code class="language-sh">sed -i 's/IO_ftrylockfile/IO_EOF_SEEN/' gl/lib/*.c
sed -i '/unistd/a #include &lt;sys/sysmacros.h&gt;' gl/lib/mountlist.c
echo &quot;#define _IO_IN_BACKUP 0x100&quot; &gt;&gt; gl/lib/stdio-impl.h
</code></pre>
<p>Prepare Findutils for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools
</code></pre>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Compilation is now complete. As discussed earlier, running the test suite is not mandatory for the temporary tools here in this chapter. To run the Findutils test suite anyway, issue the following command:</p>
<pre><code class="language-sh">make check
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/58-Findutils-4.6.0.html">Section 6.58.2, “Contents of Findutils”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#gawk-421" id="gawk-421">Gawk-4.2.1</a></h1>
<p>The Gawk package contains programs for manipulating text files.</p>
<p><strong>Approximate Build Time:</strong> 0.2 SBU</p>
<p><strong>Required Disk Space:</strong> 43 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-gawk" id="installation-of-gawk">Installation of Gawk</a></h1>
<p>Prepare Gawk for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools
</code></pre>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Compilation is now complete. As discussed earlier, running the test suite is not mandatory for the temporary tools here in this chapter. To run the Gawk test suite anyway, issue the following command:</p>
<pre><code class="language-sh">make check
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/57-Gawk-4.2.1.html">Section 6.57.2, “Contents of Gawk”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#gettext-01981" id="gettext-01981">Gettext-0.19.8.1</a></h1>
<p>The Gettext package contains utilities for internationalization and localization. These allow programs to be compiled with NLS (Native Language Support), enabling them to output messages in the user's native language.</p>
<p><strong>Approximate Build Time:</strong> 0.9 SBU</p>
<p><strong>Required Disk Space:</strong> 173 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-gettext" id="installation-of-gettext">Installation of Gettext</a></h1>
<p>For our temporary set of tools, we only need to build and install three programs from Gettext.</p>
<p>Prepare Gettext for compilation:</p>
<pre><code class="language-sh">cd gettext-tools
EMACS=&quot;no&quot; ./configure --prefix=/tools --disable-shared
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-configure-option" id="the-meaning-of-the-configure-option">The meaning of the configure option:</a></h3>
<blockquote>
<p><strong><em>EMACS=&quot;no&quot;</em></strong></p>
<blockquote>
<p>This prevents the configure script from determining where to install Emacs Lisp files as the test is known to hang on some hosts.</p>
</blockquote>
<p><strong><em>--disable-shared</em></strong></p>
<blockquote>
<p>We do not need to install any of the shared Gettext libraries at this time, therefore there is no need to build them.</p>
</blockquote>
</blockquote>
<p>Compile the package:</p>
<pre><code class="language-sh">make -C gnulib-lib
make -C intl pluralx.c
make -C src msgfmt
make -C src msgmerge
make -C src xgettext
</code></pre>
<p>As only three programs have been compiled, it is not possible to run the test suite without compiling additional support libraries from the Gettext package. It is therefore not recommended to attempt to run the test suite at this stage.</p>
<p>Install the <strong>msgfmt</strong>, <strong>msgmerge</strong>, and <strong>xgettext</strong> programs:</p>
<pre><code class="language-sh">cp -v src/{msgfmt,msgmerge,xgettext} /tools/bin
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/47-Gettext-0.19.8.1.html">Section 6.47.2, “Contents of Gettext”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#grep-33" id="grep-33">Grep-3.3</a></h1>
<p>The Grep package contains programs for searching through files.</p>
<p><strong>Approximate Build Time:</strong> 0.2 SBU</p>
<p><strong>Required Disk Space:</strong> 24 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-grep" id="installation-of-grep">Installation of Grep</a></h1>
<p>Prepare Grep for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools
</code></pre>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Compilation is now complete. As discussed earlier, running the test suite is not mandatory for the temporary tools here in this chapter. To run the Grep test suite anyway, issue the following command:</p>
<pre><code class="language-sh">make check
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/33-Grep-3.3.html">Section 6.33.2, “Contents of Grep”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#gzip-110" id="gzip-110">Gzip-1.10</a></h1>
<p>The Gzip package contains programs for compressing and decompressing files.</p>
<p><strong>Approximate Build Time:</strong> 0.1 SBU</p>
<p><strong>Required Disk Space:</strong> 10 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-gzip" id="installation-of-gzip">Installation of Gzip</a></h1>
<p>Prepare Gzip for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools
</code></pre>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Compilation is now complete. As discussed earlier, running the test suite is not mandatory for the temporary tools here in this chapter. To run the Gzip test suite anyway, issue the following command:</p>
<pre><code class="language-sh">make check
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/62-Gzip-1.10.html">Section 6.62.2, “Contents of Gzip”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#make-421" id="make-421">Make-4.2.1</a></h1>
<p>The Make package contains a program for compiling packages.</p>
<p><strong>Approximate Build Time:</strong> 0.1 SBU</p>
<p><strong>Required Disk Space:</strong> 13 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-make" id="installation-of-make">Installation of Make</a></h1>
<p>First, work around an error caused by glibc-2.27 and later:</p>
<pre><code class="language-sh">sed -i '211,217 d; 219,229 d; 232 d' glob/glob.c
</code></pre>
<p>Prepare Make for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools --without-guile
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-configure-option-1" id="the-meaning-of-the-configure-option-1">The meaning of the configure option:</a></h3>
<blockquote>
<p><strong><em>--without-guile</em></strong></p>
<blockquote>
<p>This ensures that Make-4.2.1 won't link against Guile libraries, which may be present on the host system, but won't be available within the <strong>chroot</strong> environment in the next chapter.</p>
</blockquote>
</blockquote>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Compilation is now complete. As discussed earlier, running the test suite is not mandatory for the temporary tools here in this chapter. To run the Make test suite anyway, issue the following command:</p>
<pre><code class="language-sh">make check
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/66-Make-4.2.1.html">Section 6.66.2, “Contents of Make”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#patch-276" id="patch-276">Patch-2.7.6</a></h1>
<p>The Patch package contains a program for modifying or creating files by applying a “patch” file typically created by the diff program.</p>
<p><strong>Approximate Build Time:</strong> 0.2 SBU</p>
<p><strong>Required Disk Space:</strong> 12 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-patch" id="installation-of-patch">Installation of Patch</a></h1>
<p>Prepare Patch for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools
</code></pre>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Compilation is now complete. As discussed earlier, running the test suite is not mandatory for the temporary tools here in this chapter. To run the Patch test suite anyway, issue the following command:</p>
<pre><code class="language-sh">make check
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/67-Patch-2.7.6.html">Section 6.67.2, “Contents of Patch”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#perl-5281" id="perl-5281">Perl-5.28.1</a></h1>
<p>The Perl package contains the Practical Extraction and Report Language.</p>
<p><strong>Approximate Build Time:</strong> 1.6 SBU</p>
<p><strong>Required Disk Space:</strong> 275 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-perl" id="installation-of-perl">Installation of Perl</a></h1>
<p>Prepare Perl for compilation:</p>
<pre><code class="language-sh">sh Configure -des -Dprefix=/tools -Dlibs=-lm -Uloclibpth -Ulocincpth
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-configure-options-8" id="the-meaning-of-the-configure-options-8">The meaning of the Configure options:</a></h3>
<blockquote>
<p><strong><em>-des</em></strong></p>
<blockquote>
<p>This is a combination of three options: -d uses defaults for all items; -e ensures completion of all tasks; -s silences non-essential output.</p>
</blockquote>
<p><strong><em>-Uloclibpth amd -Ulocincpth</em></strong></p>
<blockquote>
<p>These entries undefine variables that cause the configuration to search for locally installed components that may exist on the host system.</p>
</blockquote>
</blockquote>
<p>Build the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Although Perl comes with a test suite, it would be better to wait until it is installed in the next chapter.</p>
<p>Only a few of the utilities and libraries need to be installed at this time:</p>
<pre><code class="language-sh">cp -v perl cpan/podlators/scripts/pod2man /tools/bin
mkdir -pv /tools/lib/perl5/5.28.1
cp -Rv lib/\* /tools/lib/perl5/5.28.1
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/40-Perl-5.28.1.html">Section 6.40.2, “Contents of Perl”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#python-372" id="python-372">Python-3.7.2</a></h1>
<p>The Python 3 package contains the Python development environment. It is useful for object-oriented programming, writing scripts, prototyping large programs or developing entire applications.</p>
<p><strong>Approximate Build Time:</strong> 1.5 SBU</p>
<p><strong>Required Disk Space:</strong> 371 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-python" id="installation-of-python">Installation of Python</a></h1>
<p>This package first builds the Python interpreter, then some standard Python modules. The main script for building modules is written in Python, and uses hard-coded paths to the host /usr/include and /usr/lib directories. To prevent them from being used, issue:</p>
<pre><code class="language-sh">sed -i '/def add_multiarch_paths/a \        return' setup.py
</code></pre>
<p>Prepare Python for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools --without-ensurepip
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-configure-option-2" id="the-meaning-of-the-configure-option-2">The meaning of the configure option:</a></h3>
<blockquote>
<p><strong><em>--without-ensurepip</em></strong></p>
<blockquote>
<p>This switch disables the Python installer, which is not needed at this stage.</p>
</blockquote>
</blockquote>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Compilation is now complete. The test suite requires TK and and X Windows and cannot be run at this time.</p>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/51-Python-3.7.2.html">Section 6.51.2, “Contents of Python 3”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#sed-47" id="sed-47">Sed-4.7</a></h1>
<p>The Sed package contains a stream editor.</p>
<p><strong>Approximate Build Time:</strong> 0.2 SBU</p>
<p><strong>Required Disk Space:</strong> 20 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-sed" id="installation-of-sed">Installation of Sed</a></h1>
<p>Prepare Sed for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools
</code></pre>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Compilation is now complete. As discussed earlier, running the test suite is not mandatory for the temporary tools here in this chapter. To run the Sed test suite anyway, issue the following command:</p>
<pre><code class="language-sh">make check
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/28-Sed-4.7.html">Section 6.28.2, “Contents of Sed”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#tar-131" id="tar-131">Tar-1.31</a></h1>
<p>The Tar package contains an archiving program.</p>
<p><strong>Approximate Build Time:</strong> 0.3 SBU</p>
<p><strong>Required Disk Space:</strong> 38 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-tar" id="installation-of-tar">Installation of Tar</a></h1>
<p>Prepare Tar for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools
</code></pre>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Compilation is now complete. As discussed earlier, running the test suite is not mandatory for the temporary tools here in this chapter. To run the Tar test suite anyway, issue the following command:</p>
<pre><code class="language-sh">make check
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/69-Tar-1.31.html">Section 6.69.2, “Contents of Tar”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#texinfo-65" id="texinfo-65">Texinfo-6.5</a></h1>
<p>The Texinfo package contains programs for reading, writing, and converting info pages.</p>
<p><strong>Approximate Build Time:</strong> 0.3 SBU</p>
<p><strong>Required Disk Space:</strong> 104 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-texinfo" id="installation-of-texinfo">Installation of Texinfo</a></h1>
<p>Prepare Texinfo for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>As part of the configure process, a test is made that indicates an error for TestXS_la-TestXS.lo. This is not relevant for LFS and should be ignored.</p>
</blockquote>
</blockquote>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Compilation is now complete. As discussed earlier, running the test suite is not mandatory for the temporary tools here in this chapter. To run the Texinfo test suite anyway, issue the following command:</p>
<pre><code class="language-sh">make check
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/70-Texinfo-6.5.html">Section 6.70.2, “Contents of Texinfo”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#util-linux-2331" id="util-linux-2331">Util-linux-2.33.1</a></h1>
<p>The Util-linux package contains miscellaneous utility programs.</p>
<p><strong>Approximate Build Time:</strong> 1 SBU</p>
<p><strong>Required Disk Space:</strong> 147 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-util-linux" id="installation-of-util-linux">Installation of Util-linux</a></h1>
<p>Prepare Util-linux for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools                \
            --without-python               \
            --disable-makeinstall-chown    \
            --without-systemdsystemunitdir \
            --without-ncurses              \
            PKG_CONFIG=&quot;&quot;
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-configure-option-3" id="the-meaning-of-the-configure-option-3">The meaning of the configure option:</a></h3>
<blockquote>
<p><strong><em>--without-python</em></strong></p>
<blockquote>
<p>This switch disables using Python if it is installed on the host system. It avoids trying to build unneeded bindings.</p>
</blockquote>
<p><strong><em>--disable-makeinstall-chown</em></strong></p>
<blockquote>
<p>This switch disables using the <strong>chown</strong> command during installation. This is not needed when installing into the /tools directory and avoids the necessity of installing as root.</p>
</blockquote>
<p><strong><em>--without-ncurses</em></strong></p>
<blockquote>
<p>This switch disables using the ncurses library for the build process. This is not needed when installing into the /tools directory and avoids problems on some host distros.</p>
</blockquote>
<p><strong><em>--without-systemdsystemunitdir</em></strong></p>
<blockquote>
<p>On systems that use systemd, the package tries to install a systemd specific file to a non-existent directory in /tools. This switch disables the unnecessary action.</p>
</blockquote>
<p><strong><em>PKG_CONFIG=&quot;&quot;</em></strong></p>
<blockquote>
<p>Setting this environment variable prevents adding unneeded features that may be available on the host. Note that the location shown for setting this environment variable is different from other LFS sections where variables are set preceding the command. This location is shown to demonstrate an alternative way of setting an environment variable when using configure.</p>
</blockquote>
</blockquote>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/75-Util-linux-2.33.1.html">Section 6.75.3, “Contents of Util-linux”</a>.</p>
</blockquote>
<blockquote>
<h1><a class="header" href="#xz-524" id="xz-524">Xz-5.2.4</a></h1>
<p>The Xz package contains programs for compressing and decompressing files. It provides capabilities for the lzma and the newer xz compression formats. Compressing text files with <strong>xz</strong> yields a better compression percentage than with the traditional <strong>gzip</strong> or <strong>bzip2</strong> commands.</p>
<p><strong>Approximate Build Time:</strong> 0.2 SBU</p>
<p><strong>Required Disk Space:</strong> 18 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-xz" id="installation-of-xz">Installation of Xz</a></h1>
<p>Prepare Xz for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/tools
</code></pre>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>Compilation is now complete. As discussed earlier, running the test suite is not mandatory for the temporary tools here in this chapter. To run the Xz test suite anyway, issue the following command:</p>
<pre><code class="language-sh">make check
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<p>Details on this package are located in <a href="05-Constructing-a-Temporary-System/../06-Installing-Basic-System-Software/45-Xz-5.2.4.html">Section 6.45.2, “Contents of Xz”</a>.</p>
</blockquote>
<h1><a class="header" href="#stripping" id="stripping">Stripping</a></h1>
<p>The steps in this section are optional, but if the LFS partition is rather small, it is beneficial to learn that unnecessary items can be removed. The executables and libraries built so far contain about 70 MB of unneeded debugging symbols. Remove those symbols with:</p>
<pre><code class="language-sh">strip --strip-debug /tools/lib/_
/usr/bin/strip --strip-unneeded /tools/{,s}bin/_
</code></pre>
<p>These commands will skip a number of files, reporting that it does not recognize their file format. Most of these are scripts instead of binaries. Also use the system strip command to include the strip binary in /tools.</p>
<p>Take care <em>not</em> to use <em>--strip-unneeded</em> on the libraries. The static ones would be destroyed and the toolchain packages would need to be built all over again.</p>
<p>To save more, remove the documentation:</p>
<pre><code class="language-sh">rm -rf /tools/{,share}/{info,man,doc}
</code></pre>
<p>Remove unneeded files:</p>
<pre><code class="language-sh">find /tools/{lib,libexec} -name \*.la -delete
</code></pre>
<p>At this point, you should have at least 3 GB of free space in <strong>$LFS</strong> that can be used to build and install Glibc and Gcc in the next phase. If you can build and install Glibc, you can build and install the rest too.</p>
<h1><a class="header" href="#changing-ownership" id="changing-ownership">Changing Ownership</a></h1>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>The commands in the remainder of this book must be performed while logged in as user <em>root</em> and no longer as user <em>lfs</em>. Also, double check that <strong>$LFS</strong> is set in <em>root</em>'s environment.</p>
</blockquote>
</blockquote>
<p>Currently, the <code>$LFS/tools</code> directory is owned by the user <em>lfs</em>, a user that exists only on the host system. If the <code>$LFS/tools</code> directory is kept as is, the files are owned by a user ID without a corresponding account. This is dangerous because a user account created later could get this same user ID and would own the <code>$LFS/tools</code> directory and all the files therein, thus exposing these files to possible malicious manipulation.</p>
<p>To avoid this issue, you could add the <em>lfs</em> user to the new LFS system later when creating the <code>/etc/passwd</code> file, taking care to assign it the same user and group IDs as on the host system. Better yet, change the ownership of the <code>$LFS/tools</code> directory to user <em>root</em> by running the following command:</p>
<pre><code class="language-sh">chown -R root:root $LFS/tools
</code></pre>
<p>Although the <code>$LFS/tools</code> directory can be deleted once the LFS system has been finished, it can be retained to build additional LFS systems <em>of the same book version</em>. How best to backup <code>$LFS/tools</code> is a matter of personal preference.</p>
<blockquote>
<p><strong>Caution</strong></p>
<blockquote>
<p>If you intend to keep the temporary tools for use in building future LFS systems, <strong><em>now</em></strong> is the time to back them up. Subsequent commands in chapter 6 will alter the tools currently in place, rendering them useless for future builds.</p>
</blockquote>
</blockquote>
<h1><a class="header" href="#installing-basic-system-software" id="installing-basic-system-software">Installing Basic System Software</a></h1>
<h3><a class="header" href="#table-of-contents-5" id="table-of-contents-5">Table of Contents</a></h3>
<ul>
<li><a href="06-Installing-Basic-System-Software/./01-Introduction.html">Introduction</a></li>
<li><a href="06-Installing-Basic-System-Software/./02-Preparing-Virtual-Kernel-File-Systems.html">Preparing Virtual Kernel File Systems</a></li>
<li><a href="06-Installing-Basic-System-Software/./03-Package-Management.html">Package Management</a></li>
<li><a href="06-Installing-Basic-System-Software/./04-Entering-the-Chroot-Environment.html">Entering the Chroot Environment</a></li>
<li><a href="06-Installing-Basic-System-Software/./05-Creating-Directories.html">Creating Directories</a></li>
<li><a href="06-Installing-Basic-System-Software/./06-Creating-Essential-Files-and-Symlinks.html">Creating Essential Files and Symlinks</a></li>
<li><a href="06-Installing-Basic-System-Software/./07-Linux-4.20.12-API-Headers.html">Linux-4.20.12 API Headers</a></li>
<li><a href="06-Installing-Basic-System-Software/./08-Man-pages-4.16.html">Man-pages-4.16</a></li>
<li><a href="06-Installing-Basic-System-Software/./09-Glibc-2.29.html">Glibc-2.29</a></li>
<li><a href="06-Installing-Basic-System-Software/./10-Adjusting-the-Toolchain.html">Adjusting the Toolchain</a></li>
<li><a href="06-Installing-Basic-System-Software/./11-Zlib-1.2.11.html">Zlib-1.2.11</a></li>
<li><a href="06-Installing-Basic-System-Software/./12-File-5.36.html">File-5.36</a></li>
<li><a href="06-Installing-Basic-System-Software/./13-Readline-8.0.html">Readline-8.0</a></li>
<li><a href="06-Installing-Basic-System-Software/./14-M4-1.4.18.html">M4-1.4.18</a></li>
<li><a href="06-Installing-Basic-System-Software/./15-Bc-1.07.1.html">Bc-1.07.1</a></li>
<li><a href="06-Installing-Basic-System-Software/./16-Binutils-2.32.html">Binutils-2.32</a></li>
<li><a href="06-Installing-Basic-System-Software/./17-GMP-6.1.2.html">GMP-6.1.2</a></li>
<li><a href="06-Installing-Basic-System-Software/./18-MPFR-4.0.2.html">MPFR-4.0.2</a></li>
<li><a href="06-Installing-Basic-System-Software/./19-MPC-1.1.0.html">MPC-1.1.0</a></li>
<li><a href="06-Installing-Basic-System-Software/./20-Shadow-4.6.html">Shadow-4.6</a></li>
<li><a href="06-Installing-Basic-System-Software/./21-GCC-8.2.0.html">GCC-8.2.0</a></li>
<li><a href="06-Installing-Basic-System-Software/./22-Bzip2-1.0.6.html">Bzip2-1.0.6</a></li>
<li><a href="06-Installing-Basic-System-Software/./23-Pkg-config-0.29.2.html">Pkg-config-0.29.2</a></li>
<li><a href="06-Installing-Basic-System-Software/./24-Ncurses-6.1.html">Ncurses-6.1</a></li>
<li><a href="06-Installing-Basic-System-Software/./25-Attr-2.4.48.html">Attr-2.4.48</a></li>
<li><a href="06-Installing-Basic-System-Software/./26-Acl-2.2.53.html">Acl-2.2.53</a></li>
<li><a href="06-Installing-Basic-System-Software/./27-Libcap-2.26.html">Libcap-2.26</a></li>
<li><a href="06-Installing-Basic-System-Software/./28-Sed-4.7.html">Sed-4.7</a></li>
<li><a href="06-Installing-Basic-System-Software/./29-Psmisc-23.2.html">Psmisc-23.2</a></li>
<li><a href="06-Installing-Basic-System-Software/./30-Iana-Etc-2.30.html">Iana-Etc-2.30</a></li>
<li><a href="06-Installing-Basic-System-Software/./31-Bison-3.3.2.html">Bison-3.3.2</a></li>
<li><a href="06-Installing-Basic-System-Software/./32-Flex-2.6.4.html">Flex-2.6.4</a></li>
<li><a href="06-Installing-Basic-System-Software/./33-Grep-3.3.html">Grep-3.3</a></li>
<li><a href="06-Installing-Basic-System-Software/./34-Bash-5.0.html">Bash-5.0</a></li>
<li><a href="06-Installing-Basic-System-Software/./35-Libtool-2.4.6.html">Libtool-2.4.6</a></li>
<li><a href="06-Installing-Basic-System-Software/./36-GDBM-1.18.1.html">GDBM-1.18.1</a></li>
<li><a href="06-Installing-Basic-System-Software/./37-Gperf-3.1.html">Gperf-3.1</a></li>
<li><a href="06-Installing-Basic-System-Software/./38-Expat-2.2.6.html">Expat-2.2.6</a></li>
<li><a href="06-Installing-Basic-System-Software/./39-Inetutils-1.9.4.html">Inetutils-1.9.4</a></li>
<li><a href="06-Installing-Basic-System-Software/./40-Perl-5.28.1.html">Perl-5.28.1</a></li>
<li><a href="06-Installing-Basic-System-Software/./41-XML::Parser-2.44.html">XML::Parser-2.44</a></li>
<li><a href="06-Installing-Basic-System-Software/./42-Intltool-0.51.0.html">Intltool-0.51.0</a></li>
<li><a href="06-Installing-Basic-System-Software/./43-Autoconf-2.69.html">Autoconf-2.69</a></li>
<li><a href="06-Installing-Basic-System-Software/./44-Automake-1.16.1.html">Automake-1.16.1</a></li>
<li><a href="06-Installing-Basic-System-Software/./45-Xz-5.2.4.html">Xz-5.2.4</a></li>
<li><a href="06-Installing-Basic-System-Software/./46-Kmod-26-26tion.html">Kmod-26</a></li>
<li><a href="06-Installing-Basic-System-Software/./47-Gettext-0.19.8.1.html">Gettext-0.19.8.1</a></li>
<li><a href="06-Installing-Basic-System-Software/./48-Libelf-from-Elfutils-0.176.html">Libelf from Elfutils-0.176</a></li>
<li><a href="06-Installing-Basic-System-Software/./49-Libffi-3.2.1.html">Libffi-3.2.1</a></li>
<li><a href="06-Installing-Basic-System-Software/./50-OpenSSL-1.1.1a-3.2.1.html">OpenSSL-1.1.1a</a></li>
<li><a href="06-Installing-Basic-System-Software/51-Python-3.7.2.html">Python-3.7.2</a></li>
<li><a href="06-Installing-Basic-System-Software/52-Ninja-1.9.0.html">Ninja-1.9.0</a></li>
<li><a href="06-Installing-Basic-System-Software/./53-Meson-0.49.2.html">Meson-0.49.2</a></li>
<li><a href="06-Installing-Basic-System-Software/./54-Coreutils-8.30.html">Coreutils-8.30</a></li>
<li><a href="06-Installing-Basic-System-Software/./55-Check-0.12.0.html">Check-0.12.0</a></li>
<li><a href="06-Installing-Basic-System-Software/./56-Diffutils-3.7.html">Diffutils-3.7</a></li>
<li><a href="06-Installing-Basic-System-Software/./57-Gawk-4.2.1.html">Gawk-4.2.1</a></li>
<li><a href="06-Installing-Basic-System-Software/./58-Findutils-4.6.0.html">Findutils-4.6.0</a></li>
<li><a href="06-Installing-Basic-System-Software/./59-Groff-1.22.4.html">Groff-1.22.4</a></li>
<li><a href="06-Installing-Basic-System-Software/./60-GRUB-2.02.html">GRUB-2.02</a></li>
<li><a href="06-Installing-Basic-System-Software/./61-Less-530.html">Less-530</a></li>
<li><a href="06-Installing-Basic-System-Software/./62-Gzip-1.10.html">Gzip-1.10</a></li>
<li><a href="06-Installing-Basic-System-Software/./63-IPRoute2-4.20.0.html">IPRoute2-4.20.0</a></li>
<li><a href="06-Installing-Basic-System-Software/./64-Kbd-2.0.4.html">Kbd-2.0.4</a></li>
<li><a href="06-Installing-Basic-System-Software/./65-Libpipeline-1.5.1.html">Libpipeline-1.5.1</a></li>
<li><a href="06-Installing-Basic-System-Software/./66-Make-4.2.1.html">Make-4.2.1</a></li>
<li><a href="06-Installing-Basic-System-Software/67-Patch-2.7.6.html">Patch-2.7.6</a></li>
<li><a href="06-Installing-Basic-System-Software/./68-Man-DB-2.8.5.html">Man-DB-2.8.5</a></li>
<li><a href="06-Installing-Basic-System-Software/./69-Tar-1.31.html">Tar-1.31</a></li>
<li><a href="06-Installing-Basic-System-Software/./70-Texinfo-6.5.html">Texinfo-6.5</a></li>
<li><a href="06-Installing-Basic-System-Software/./71-Vim-8.1.html">Vim-8.1</a></li>
<li><a href="06-Installing-Basic-System-Software/./72-Systemd-240.html">Systemd-240</a></li>
<li><a href="06-Installing-Basic-System-Software/./73-D-Bus-1.12.12.html">D-Bus-1.12.12</a></li>
<li><a href="06-Installing-Basic-System-Software/./74-Procps-ng-3.3.15.html">Procps-ng-3.3.15</a></li>
<li><a href="06-Installing-Basic-System-Software/./75-Util-linux-2.33.1.html">Util-linux-2.33.1</a></li>
<li><a href="06-Installing-Basic-System-Software/./76-E2fsprogs-1.44.5.html">E2fsprogs-1.44.5</a></li>
<li><a href="06-Installing-Basic-System-Software/./77-About-Debugging-Symbols.html">About Debugging Symbols</a></li>
<li><a href="06-Installing-Basic-System-Software/./78-Stripping-Again.html">Stripping Again</a></li>
<li><a href="06-Installing-Basic-System-Software/./79-Cleaning-Up.html">Cleaning Up</a></li>
</ul>
<h1><a class="header" href="#introduction-5" id="introduction-5">Introduction</a></h1>
<p>In this chapter, we enter the building site and start constructing the LFS system in earnest. That is, we chroot into the temporary mini Linux system, make a few final preparations, and then begin installing the packages.</p>
<p>The installation of this software is straightforward. Although in many cases the installation instructions could be made shorter and more generic, we have opted to provide the full instructions for every package to minimize the possibilities for mistakes. The key to learning what makes a Linux system work is to know what each package is used for and why you (or the system) may need it.</p>
<p>We do not recommend using optimizations. They can make a program run slightly faster, but they may also cause compilation difficulties and problems when running the program. If a package refuses to compile when using optimization, try to compile it without optimization and see if that fixes the problem. Even if the package does compile when using optimization, there is the risk it may have been compiled incorrectly because of the complex interactions between the code and build tools. Also note that the <code>-march</code> and <code>-mtune</code> options using values not specified in the book have not been tested. This may cause problems with the toolchain packages (Binutils, GCC and Glibc). The small potential gains achieved in using compiler optimizations are often outweighed by the risks. First-time builders of LFS are encouraged to build without custom optimizations. The subsequent system will still run very fast and be stable at the same time.</p>
<p>The order that packages are installed in this chapter needs to be strictly followed to ensure that no program accidentally acquires a path referring to <code>/tools</code> hard-wired into it. For the same reason, do not compile separate packages in parallel. Compiling in parallel may save time (especially on dual-CPU machines), but it could result in a program containing a hard-wired path to <code>/tools</code>, which will cause the program to stop working when that directory is removed.</p>
<p>Before the installation instructions, each installation page provides information about the package, including a concise description of what it contains, approximately how long it will take to build, and how much disk space is required during this building process. Following the installation instructions, there is a list of programs and libraries (along with brief descriptions of these) that the package installs.</p>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>The SBU values and required disk space includes test suite data for all applicable packages in Chapter 6.</p>
</blockquote>
</blockquote>
<h1><a class="header" href="#about-libraries" id="about-libraries">About libraries</a></h1>
<p>In general, the LFS editors discourage building and installing static libraries. The original purpose for most static libraries has been made obsolete in a modern Linux system. In addition linking a static library into a program can be detrimental. If an update to the library is needed to remove a security problem, all programs that use the static library will need to be relinked to the new library. Since the use of static libraries is not always obvious, the relevant programs (and the procedures needed to do the linking) may not even be known.</p>
<p>In the procedures in Chapter 6, we remove or disable installation of most static libraries. Usually this is done by passing a <code>--disable-static</code> option to <strong>configure</strong>. In other cases, alternate means are needed. In a few cases, especially glibc and gcc, the use of static libraries remains essential to the general package building process.</p>
<p>For a more complete discussion of libraries, see the discussion <a href="http://www.linuxfromscratch.org/blfs//view/8.4/introduction/libraries.html">Libraries: Static or shared?</a> in the <a href="http://www.linuxfromscratch.org/blfs/index.html">BLFS</a> book.</p>
<h1><a class="header" href="#preparing-virtual-kernel-file-systems" id="preparing-virtual-kernel-file-systems">Preparing Virtual Kernel File Systems</a></h1>
<p>Various file systems exported by the kernel are used to communicate to and from the kernel itself. These file systems are virtual in that no disk space is used for them. The content of the file systems resides in memory.</p>
<p>Begin by creating directories onto which the file systems will be mounted:</p>
<pre><code class="language-sh">mkdir -pv $LFS/{dev,proc,sys,run}
</code></pre>
<h2><a class="header" href="#creating-initial-device-nodes" id="creating-initial-device-nodes">Creating Initial Device Nodes</a></h2>
<p>When the kernel boots the system, it requires the presence of a few device nodes, in particular the <code>console</code> and <code>null</code> devices. The device nodes must be created on the hard disk so that they are available before <strong>udevd</strong> has been started, and additionally when Linux is started with <em>init=/bin/bash</em>. Create the devices by running the following commands:</p>
<pre><code class="language-sh">mknod -m 600 $LFS/dev/console c 5 1
mknod -m 666 $LFS/dev/null c 1 3
</code></pre>
<h2><a class="header" href="#mounting-and-populating-dev" id="mounting-and-populating-dev">Mounting and Populating /dev</a></h2>
<p>The recommended method of populating the <code>/dev</code> directory with devices is to mount a virtual filesystem (such as <em>tmpfs</em>) on the <code>/dev</code> directory, and allow the devices to be created dynamically on that virtual filesystem as they are detected or accessed. Device creation is generally done during the boot process by Udev. Since this new system does not yet have Udev and has not yet been booted, it is necessary to mount and populate <code>/dev</code> manually. This is accomplished by bind mounting the host system's <code>/dev</code> directory. A bind mount is a special type of mount that allows you to create a mirror of a directory or mount point to some other location. Use the following command to achieve this:</p>
<pre><code class="language-sh">mount -v --bind /dev $LFS/dev
</code></pre>
<h2><a class="header" href="#mounting-virtual-kernel-file-systems" id="mounting-virtual-kernel-file-systems">Mounting Virtual Kernel File Systems</a></h2>
<p>Now mount the remaining virtual kernel filesystems:</p>
<pre><code class="language-sh">mount -vt devpts devpts $LFS/dev/pts -o gid=5,mode=620
mount -vt proc proc $LFS/proc
mount -vt sysfs sysfs $LFS/sys
mount -vt tmpfs tmpfs $LFS/run
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-mount-options-for-devpts" id="the-meaning-of-the-mount-options-for-devpts">The meaning of the mount options for devpts:</a></h3>
<blockquote>
<p><strong><em>gid=5</em></strong></p>
<blockquote>
<p>This ensures that all devpts-created device nodes are owned by group ID 5. This is the ID we will use later on for the <em>tty</em> group. We use the group ID instead of a name, since the host system might use a different ID for its <em>tty</em> group.</p>
</blockquote>
<p><strong><em>mode=0620</em></strong></p>
<blockquote>
<p>This ensures that all devpts-created device nodes have mode 0620 (user readable and writable, group writable). Together with the option above, this ensures that devpts will create device nodes that meet the requirements of grantpt(), meaning the Glibc pt_chown helper binary (which is not installed by default) is not necessary.</p>
</blockquote>
</blockquote>
<p>In some host systems, <code>/dev/shm</code> is a symbolic link to <code>/run/shm</code>. The /run tmpfs was mounted above so in this case only a directory needs to be created.</p>
<pre><code class="language-sh">if [ -h $LFS/dev/shm ]; then
 mkdir -pv $LFS/$(readlink $LFS/dev/shm)
fi
</code></pre>
<h1><a class="header" href="#package-management" id="package-management">Package Management</a></h1>
<p>Package Management is an often requested addition to the LFS Book. A Package Manager allows tracking the installation of files making it easy to remove and upgrade packages. As well as the binary and library files, a package manager will handle the installation of configuration files. Before you begin to wonder, NO—this section will not talk about nor recommend any particular package manager. What it provides is a roundup of the more popular techniques and how they work. The perfect package manager for you may be among these techniques or may be a combination of two or more of these techniques. This section briefly mentions issues that may arise when upgrading packages.</p>
<p>Some reasons why no package manager is mentioned in LFS or BLFS include:</p>
<ul>
<li>
<p>Dealing with package management takes the focus away from the goals of these books—teaching how a Linux system is built.</p>
</li>
<li>
<p>There are multiple solutions for package management, each having its strengths and drawbacks. Including one that satisfies all audiences is difficult.</p>
</li>
</ul>
<p>There are some hints written on the topic of package management. Visit the <a href="http://www.linuxfromscratch.org/hints/list.html">Hints Project</a> and see if one of them fits your need.</p>
<h1><a class="header" href="#upgrade-issues" id="upgrade-issues">Upgrade Issues</a></h1>
<p>A Package Manager makes it easy to upgrade to newer versions when they are released. Generally the instructions in the LFS and BLFS Book can be used to upgrade to the newer versions. Here are some points that you should be aware of when upgrading packages, especially on a running system.</p>
<ul>
<li>
<p>If Glibc needs to be upgraded to a newer version, (e.g. from glibc-2.19 to glibc-2.20), it is safer to rebuild LFS. Though you <em>may</em> be able to rebuild all the packages in their dependency order, we do not recommend it.</p>
</li>
<li>
<p>If a package containing a shared library is updated, and if the name of the library changes, then all the packages dynamically linked to the library need to be recompiled to link against the newer library. (Note that there is no correlation between the package version and the name of the library.) For example, consider a package foo-1.2.3 that installs a shared library with name <code>libfoo.so.1</code>. Say you upgrade the package to a newer version foo-1.2.4 that installs a shared library with name <code>libfoo.so.2</code>. In this case, all packages that are dynamically linked to <code>libfoo.so.1</code> need to be recompiled to link against <code>libfoo.so.2</code>. Note that you should not remove the previous libraries until the dependent packages are recompiled.</p>
</li>
</ul>
<h1><a class="header" href="#package-management-techniques" id="package-management-techniques">Package Management Techniques</a></h1>
<p>The following are some common package management techniques. Before making a decision on a package manager, do some research on the various techniques, particularly the drawbacks of the particular scheme.</p>
<h2><a class="header" href="#it-is-all-in-my-head" id="it-is-all-in-my-head">It is All in My Head!</a></h2>
<p>Yes, this is a package management technique. Some folks do not find the need for a package manager because they know the packages intimately and know what files are installed by each package. Some users also do not need any package management because they plan on rebuilding the entire system when a package is changed.</p>
<h2><a class="header" href="#install-in-separate-directories" id="install-in-separate-directories">Install in Separate Directories</a></h2>
<p>This is a simplistic package management that does not need any extra package to manage the installations. Each package is installed in a separate directory. For example, package foo-1.1 is installed in <code>/usr/pkg/foo-1.1</code> and a symlink is made from <code>/usr/pkg/foo</code> to <code>/usr/pkg/foo-1.1</code>. When installing a new version foo-1.2, it is installed in <code>/usr/pkg/foo-1.2</code> and the previous symlink is replaced by a symlink to the new version.</p>
<p>Environment variables such as <strong>PATH</strong>, <strong>LD_LIBRARY_PATH</strong>, <strong>MANPATH</strong>, <strong>INFOPATH</strong> and <strong>CPPFLAGS</strong> need to be expanded to include <code>/usr/pkg/foo</code>. For more than a few packages, this scheme becomes unmanageable.</p>
<h2><a class="header" href="#symlink-style-package-management" id="symlink-style-package-management">Symlink Style Package Management</a></h2>
<p>This is a variation of the previous package management technique. Each package is installed similar to the previous scheme. But instead of making the symlink, each file is symlinked into the <code>/usr</code> hierarchy. This removes the need to expand the environment variables. Though the symlinks can be created by the user to automate the creation, many package managers have been written using this approach. A few of the popular ones include Stow, Epkg, Graft, and Depot.</p>
<p>The installation needs to be faked, so that the package thinks that it is installed in <code>/usr</code> though in reality it is installed in the <code>/usr/pkg</code> hierarchy. Installing in this manner is not usually a trivial task. For example, consider that you are installing a package libfoo-1.1. The following instructions may not install the package properly:</p>
<pre><code class="language-sh">./configure --prefix=/usr/pkg/libfoo/1.1
make
make install
</code></pre>
<p>The installation will work, but the dependent packages may not link to libfoo as you would expect. If you compile a package that links against libfoo, you may notice that it is linked to <code>/usr/pkg/libfoo/1.1/lib/libfoo.so.1</code> instead of <code>/usr/lib/libfoo.so.1</code> as you would expect. The correct approach is to use the <strong>DESTDIR</strong> strategy to fake installation of the package. This approach works as follows:</p>
<pre><code class="language-sh">./configure --prefix=/usr
make
make DESTDIR=/usr/pkg/libfoo/1.1 install
</code></pre>
<p>Most packages support this approach, but there are some which do not. For the non-compliant packages, you may either need to manually install the package, or you may find that it is easier to install some problematic packages into <code>/opt</code>.</p>
<h2><a class="header" href="#timestamp-based" id="timestamp-based">Timestamp Based</a></h2>
<p>In this technique, a file is timestamped before the installation of the package. After the installation, a simple use of the <strong>find</strong> command with the appropriate options can generate a log of all the files installed after the timestamp file was created. A package manager written with this approach is install-log.</p>
<p>Though this scheme has the advantage of being simple, it has two drawbacks. If, during installation, the files are installed with any timestamp other than the current time, those files will not be tracked by the package manager. Also, this scheme can only be used when one package is installed at a time. The logs are not reliable if two packages are being installed on two different consoles.</p>
<h2><a class="header" href="#tracing-installation-scripts" id="tracing-installation-scripts">Tracing Installation Scripts</a></h2>
<p>In this approach, the commands that the installation scripts perform are recorded. There are two techniques that one can use:</p>
<p>The <strong>LD_PRELOAD</strong> environment variable can be set to point to a library to be preloaded before installation. During installation, this library tracks the packages that are being installed by attaching itself to various executables such as <strong>cp</strong>, <strong>install</strong>, <strong>mv</strong> and tracking the system calls that modify the filesystem. For this approach to work, all the executables need to be dynamically linked without the suid or sgid bit. Preloading the library may cause some unwanted side-effects during installation. Therefore, it is advised that one performs some tests to ensure that the package manager does not break anything and logs all the appropriate files.</p>
<p>The second technique is to use <strong>strace</strong>, which logs all system calls made during the execution of the installation scripts.</p>
<h2><a class="header" href="#creating-package-archives" id="creating-package-archives">Creating Package Archives</a></h2>
<p>In this scheme, the package installation is faked into a separate tree as described in the Symlink style package management. After the installation, a package archive is created using the installed files. This archive is then used to install the package either on the local machine or can even be used to install the package on other machines.</p>
<p>This approach is used by most of the package managers found in the commercial distributions. Examples of package managers that follow this approach are RPM (which, incidentally, is required by the <a href="http://refspecs.linuxfoundation.org/lsb.shtml">Linux Standard Base Specification</a>), pkg-utils, Debian's apt, and Gentoo's Portage system. A hint describing how to adopt this style of package management for LFS systems is located <a href="http://www.linuxfromscratch.org/hints/downloads/files/fakeroot.txt">here</a>.</p>
<p>Creation of package files that include dependency information is complex and is beyond the scope of LFS.</p>
<p>Slackware uses a tar based system for package archives. This system purposely does not handle package dependencies as more complex package managers do. For details of Slackware package management, see <a href="http://www.slackbook.org/html/package-management.htm">http://www.slackbook.org/html/package-management.html</a>.</p>
<h2><a class="header" href="#user-based-management" id="user-based-management">User Based Management</a></h2>
<p>This scheme, unique to LFS, was devised by Matthias Benkmann, and is available from the Hints Project. In this scheme, each package is installed as a separate user into the standard locations. Files belonging to a package are easily identified by checking the user ID. The features and shortcomings of this approach are too complex to describe in this section. For the details please see the <a href="http://www.linuxfromscratch.org/hints/downloads/files/more_control_and_pkg_man.txt">hint</a>.</p>
<h1><a class="header" href="#deploying-lfs-on-multiple-systems" id="deploying-lfs-on-multiple-systems">Deploying LFS on Multiple Systems</a></h1>
<p>One of the advantages of an LFS system is that there are no files that depend on the position of files on a disk system. Cloning an LFS build to another computer with the same architecture as the base system is as simple as using tar on the LFS partition that contains the root directory (about 250MB uncompressed for a base LFS build), copying that file via network transfer or CD-ROM to the new system and expanding it. From that point, a few configuration files will have to be changed. Configuration files that may need to be updated include: <code>/etc/hosts</code>, <code>/etc/fstab</code>, <code>/etc/passwd</code>, <code>/etc/group</code>, <code>/etc/shadow</code>, and <code>/etc/ld.so.conf</code>.</p>
<p>A custom kernel may need to be built for the new system depending on differences in system hardware and the original kernel configuration.</p>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>There have been some reports of issues when copying between similar but not identical architectures. For instance, the instruction set for an Intel system is not identical with an AMD processor and later versions of some processors may have instructions that are unavailable in earlier versions.</p>
</blockquote>
</blockquote>
<blockquote>
<p>Finally the new system has to be made bootable via <a href="06-Installing-Basic-System-Software/../08-Making-the-LFS-System-Bootable/04-Using-GRUB-to-Set-Up-the-Boot-Process.html">Section 8.4, “Using GRUB to Set Up the Boot Process”</a>.</p>
</blockquote>
<h1><a class="header" href="#entering-the-chroot-environment" id="entering-the-chroot-environment">Entering the Chroot Environment</a></h1>
<p>It is time to enter the chroot environment to begin building and installing the final LFS system. As user <em>root</em>, run the following command to enter the realm that is, at the moment, populated with only the temporary tools:</p>
<pre><code class="language-sh">chroot &quot;$LFS&quot; /tools/bin/env -i \
    HOME=/root                  \
    TERM=&quot;$TERM&quot;                \
    PS1='(lfs chroot) \u:\w\$ ' \
    PATH=/bin:/usr/bin:/sbin:/usr/sbin:/tools/bin \
    /tools/bin/bash --login +h
</code></pre>
<p>The <em>-i</em> option given to the <strong>env</strong> command will clear all variables of the chroot environment. After that, only the <strong>HOME</strong>, <strong>TERM</strong>, <strong>PS1</strong>, and <strong>PATH</strong> variables are set again. The <strong><em>TERM=$TERM</em></strong> construct will set the <strong>TERM</strong> variable inside chroot to the same value as outside chroot. This variable is needed for programs like <strong>vim</strong> and <strong>less</strong> to operate properly. If other variables are needed, such as <strong>CFLAGS</strong> or <strong>CXXFLAGS</strong>, this is a good place to set them again.</p>
<p>From this point on, there is no need to use the <strong>LFS</strong> variable anymore, because all work will be restricted to the LFS file system. This is because the Bash shell is told that $LFS is now the root (/) directory.</p>
<p>Notice that <code>/tools/bin</code> comes last in the <strong>PATH</strong>. This means that a temporary tool will no longer be used once its final version is installed. This occurs when the shell does not “remember” the locations of executed binaries—for this reason, hashing is switched off by passing the <em>+h</em> option to <strong>bash</strong>.</p>
<p>Note that the <strong>bash</strong> prompt will say <code>I have no name!</code> This is normal because the <code>/etc/passwd</code> file has not been created yet.</p>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>It is important that all the commands throughout the remainder of this chapter and the following chapters are run from within the chroot environment. If you leave this environment for any reason (rebooting for example), ensure that the virtual kernel filesystems are mounted as explained in <a href="06-Installing-Basic-System-Software/./02-Preparing-Virtual-Kernel-File-Systems.html">Section 6.2.2, “Mounting and Populating /dev”</a> and <a href="06-Installing-Basic-System-Software/./02-Preparing-Virtual-Kernel-File-Systems.html">Section 6.2.3, “Mounting Virtual Kernel File Systems”</a> and enter chroot again before continuing with the installation.</p>
</blockquote>
</blockquote>
<h1><a class="header" href="#creating-directories" id="creating-directories">Creating Directories</a></h1>
<p>It is time to create some structure in the LFS file system. Create a standard directory tree by issuing the following commands:</p>
<pre><code class="language-sh">mkdir -pv /{bin,boot,etc/{opt,sysconfig},home,lib/firmware,mnt,opt}
mkdir -pv /{media/{floppy,cdrom},sbin,srv,var}
install -dv -m 0750 /root
install -dv -m 1777 /tmp /var/tmp
mkdir -pv /usr/{,local/}{bin,include,lib,sbin,src}
mkdir -pv /usr/{,local/}share/{color,dict,doc,info,locale,man}
mkdir -v  /usr/{,local/}share/{misc,terminfo,zoneinfo}
mkdir -v  /usr/libexec
mkdir -pv /usr/{,local/}share/man/man{1..8}

case $(uname -m) in
 x86_64) mkdir -v /lib64 ;;
esac

mkdir -v /var/{log,mail,spool}
ln -sv /run /var/run
ln -sv /run/lock /var/lock
mkdir -pv /var/{opt,cache,lib/{color,misc,locate},local}
</code></pre>
<p>Directories are, by default, created with permission mode 755, but this is not desirable for all directories. In the commands above, two changes are made—one to the home directory of user <em>root</em>, and another to the directories for temporary files.</p>
<p>The first mode change ensures that not just anybody can enter the <code>/root</code> directory—the same as a normal user would do with his or her home directory. The second mode change makes sure that any user can write to the <code>/tmp</code> and <code>/var/tmp</code> directories, but cannot remove another user's files from them. The latter is prohibited by the so-called “sticky bit,” the highest bit (1) in the 1777 bit mask.</p>
<h1><a class="header" href="#fhs-compliance-note" id="fhs-compliance-note">FHS Compliance Note</a></h1>
<p>The directory tree is based on the Filesystem Hierarchy Standard (<a href="https://wiki.linuxfoundation.org/en/FHS">FHS</a>). The FHS also specifies the optional existence of some directories such as <code>/usr/local/games</code> and <code>/usr/share/games</code>. We create only the directories that are needed. However, feel free to create these directories.</p>
<h1><a class="header" href="#creating-essential-files-and-symlinks" id="creating-essential-files-and-symlinks">Creating Essential Files and Symlinks</a></h1>
<p>Some programs use hard-wired paths to programs which do not exist yet. In order to satisfy these programs, create a number of symbolic links which will be replaced by real files throughout the course of this chapter after the software has been installed:</p>
<pre><code class="language-sh">ln -sv /tools/bin/{bash,cat,chmod,dd,echo,ln,mkdir,pwd,rm,stty,touch} /bin
ln -sv /tools/bin/{env,install,perl,printf}         /usr/bin
ln -sv /tools/lib/libgcc_s.so{,.1}                  /usr/lib
ln -sv /tools/lib/libstdc++.{a,so{,.6}}             /usr/lib

install -vdm755 /usr/lib/pkgconfig

ln -sv bash /bin/sh
</code></pre>
<h3><a class="header" href="#the-purpose-of-each-link" id="the-purpose-of-each-link">The purpose of each link:</a></h3>
<blockquote>
<p><strong><em>/bin/bash</em></strong></p>
<blockquote>
<p>Many <strong>bash</strong> scripts specify <code>/bin/bash</code>.</p>
</blockquote>
<p><strong><em>/bin/cat</em></strong></p>
<blockquote>
<p>This pathname is hard-coded into Glibc's configure script.</p>
</blockquote>
<p><strong><em>/bin/dd</em></strong></p>
<blockquote>
<p>The path to <strong>dd</strong> will be hard-coded into the <code>/usr/bin/libtool</code> utility.</p>
</blockquote>
<p><strong><em>/bin/echo</em></strong></p>
<blockquote>
<p>This is to satisfy one of the tests in Glibc's test suite, which expects <code>/bin/echo</code>.</p>
</blockquote>
<p><strong><em>/usr/bin/env</em></strong></p>
<blockquote>
<p>This pathname is hard-coded into some packages build procedures.</p>
</blockquote>
<p><strong><em>/usr/bin/install</em></strong></p>
<blockquote>
<p>The path to install will be hard-coded into the <code>/usr/lib/bash/Makefile.inc</code> file.</p>
</blockquote>
<p><strong><em>/bin/ln</em></strong></p>
<blockquote>
<p>The path to <strong>ln</strong> will be hard-coded into the <code>/usr/lib/perl5/5.28.1/&lt;target-triplet&gt;/Config_heavy.pl</code> file.</p>
</blockquote>
<p><strong><em>/bin/pwd</em></strong></p>
<blockquote>
<p>Some <strong>configure</strong> scripts, particularly Glibc's, have this pathname hard-coded.</p>
</blockquote>
<p><strong><em>/bin/rm</em></strong></p>
<blockquote>
<p>The path to <strong>rm</strong> will be hard-coded into the <code>/usr/lib/perl5/5.28.1/&lt;target-triplet&gt;/Config_heavy.pl</code> file.</p>
</blockquote>
<p><strong><em>/bin/stty</em></strong></p>
<blockquote>
<p>This pathname is hard-coded into <strong>Expect</strong>, therefore it is needed for <strong>Binutils</strong> and <strong>GCC</strong> test suites to pass.</p>
</blockquote>
<p><strong><em>/usr/bin/perl</em></strong></p>
<blockquote>
<p>Many <strong>Perl</strong> scripts hard-code this path to the <strong>perl</strong> program.</p>
</blockquote>
<p><strong><em>/usr/lib/libgcc_s.so{,.1}</em></strong></p>
<blockquote>
<p>Glibc needs this for the pthreads library to work.</p>
</blockquote>
<p><strong><em>/usr/lib/libstdc++{,.6}</em></strong></p>
<blockquote>
<p>This is needed by several tests in Glibc's test suite, as well as for C++ support in GMP.</p>
</blockquote>
<p><strong><em>/bin/sh</em></strong></p>
<blockquote>
<p>Many shell scripts hard-code <code>/bin/sh</code>.</p>
</blockquote>
</blockquote>
<p>Historically, Linux maintains a list of the mounted file systems in the file <code>/etc/mtab</code>. Modern kernels maintain this list internally and exposes it to the user via the <code>/proc</code> filesystem. To satisfy utilities that expect the presence of <code>/etc/mtab</code>, create the following symbolic link:</p>
<pre><code class="language-sh">ln -sv /proc/self/mounts /etc/mtab
</code></pre>
<p>In order for user <em>root</em> to be able to login and for the name “root” to be recognized, there must be relevant entries in the <code>/etc/passwd</code> and <code>/etc/group</code> files.</p>
<p>Create the <code>/etc/passwd</code> file by running the following command:</p>
<pre><code class="language-sh">cat &gt; /etc/passwd &lt;&lt; &quot;EOF&quot;
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/dev/null:/bin/false
daemon:x:6:6:Daemon User:/dev/null:/bin/false
messagebus:x:18:18:D-Bus Message Daemon User:/var/run/dbus:/bin/false
systemd-bus-proxy:x:72:72:systemd Bus Proxy:/:/bin/false
systemd-journal-gateway:x:73:73:systemd Journal Gateway:/:/bin/false
systemd-journal-remote:x:74:74:systemd Journal Remote:/:/bin/false
systemd-journal-upload:x:75:75:systemd Journal Upload:/:/bin/false
systemd-network:x:76:76:systemd Network Management:/:/bin/false
systemd-resolve:x:77:77:systemd Resolver:/:/bin/false
systemd-timesync:x:78:78:systemd Time Synchronization:/:/bin/false
systemd-coredump:x:79:79:systemd Core Dumper:/:/bin/false
nobody:x:99:99:Unprivileged User:/dev/null:/bin/false
EOF
</code></pre>
<p>The actual password for <em>root</em> (the “x” used here is just a placeholder) will be set later.</p>
<p>Create the <code>/etc/group</code> file by running the following command:</p>
<pre><code class="language-sh">cat &gt; /etc/group &lt;&lt; &quot;EOF&quot;
root:x:0:
bin:x:1:daemon
sys:x:2:
kmem:x:3:
tape:x:4:
tty:x:5:
daemon:x:6:
floppy:x:7:
disk:x:8:
lp:x:9:
dialout:x:10:
audio:x:11:
video:x:12:
utmp:x:13:
usb:x:14:
cdrom:x:15:
adm:x:16:
messagebus:x:18:
systemd-journal:x:23:
input:x:24:
mail:x:34:
kvm:x:61:
systemd-bus-proxy:x:72:
systemd-journal-gateway:x:73:
systemd-journal-remote:x:74:
systemd-journal-upload:x:75:
systemd-network:x:76:
systemd-resolve:x:77:
systemd-timesync:x:78:
systemd-coredump:x:79:
wheel:x:97:
nogroup:x:99:
users:x:999:
EOF
</code></pre>
<p>The created groups are not part of any standard—they are groups decided on in part by the requirements of the Udev configuration in this chapter, and in part by common convention employed by a number of existing Linux distributions. In addition, some test suites rely on specific users or groups. The <a href="http://www.linuxbase.org">Linux Standard Base</a> (LSB) recommends only that, besides the group <em>root</em> with a Group ID (GID) of 0, a group <em>bin</em> with a GID of 1 be present. All other group names and GIDs can be chosen freely by the system administrator since well-written programs do not depend on GID numbers, but rather use the group's name.</p>
<p>To remove the “I have no name!” prompt, start a new shell. Since a full Glibc was installed in <a href="06-Installing-Basic-System-Software/../05-Constructing-a-Temporary-System/index.html">Chapter 5</a> and the <code>/etc/passwd</code> and <code>/etc/group</code> files have been created, user name and group name resolution will now work:</p>
<pre><code class="language-sh">exec /tools/bin/bash --login +h
</code></pre>
<p>Note the use of the <em>+h</em> directive. This tells <strong>bash</strong> not to use its internal path hashing. Without this directive, <strong>bash</strong> would remember the paths to binaries it has executed. To ensure the use of the newly compiled binaries as soon as they are installed, the <em>+h</em> directive will be used for the duration of this chapter.</p>
<p>The <strong>login</strong>, <strong>agetty</strong>, and <strong>init</strong> programs (and others) use a number of log files to record information such as who was logged into the system and when. However, these programs will not write to the log files if they do not already exist. Initialize the log files and give them proper permissions:</p>
<pre><code class="language-sh">touch /var/log/{btmp,lastlog,faillog,wtmp}
chgrp -v utmp /var/log/lastlog
chmod -v 664  /var/log/lastlog
chmod -v 600  /var/log/btmp
</code></pre>
<p>The <code>/var/log/wtmp</code> file records all logins and logouts. The <code>/var/log/lastlog</code> file records when each user last logged in. The <code>/var/log/faillog</code> file records failed login attempts. The <code>/var/log/btmp</code> file records the bad login attempts.</p>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>The <code>/run/utmp</code> file records the users that are currently logged in. This file is created dynamically in the boot scripts.</p>
</blockquote>
</blockquote>
<blockquote>
<h1><a class="header" href="#linux-42012-api-headers-1" id="linux-42012-api-headers-1">Linux-4.20.12 API Headers</a></h1>
<p>The Linux API Headers (in linux-4.20.12.tar.xz) expose the kernel's API for use by Glibc.</p>
<p><strong>Approximate Build Time:</strong> 0.1 SBU</p>
<p><strong>Required Disk Space:</strong> 941 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-linux-api-headers-1" id="installation-of-linux-api-headers-1">Installation of Linux API Headers</a></h1>
<p>The Linux kernel needs to expose an Application Programming Interface (API) for the system's C library (Glibc in LFS) to use. This is done by way of sanitizing various C header files that are shipped in the Linux kernel source tarball.</p>
<p>Make sure there are no stale files and dependencies lying around from previous activity:</p>
<pre><code class="language-sh">make mrproper
</code></pre>
<p>Now extract the user-visible kernel headers from the source. They are placed in an intermediate local directory and copied to the needed location because the extraction process removes any existing files in the target directory. There are also some hidden files used by the kernel developers and not needed by LFS that are removed from the intermediate directory.</p>
<pre><code class="language-sh">make INSTALL_HDR_PATH=dest headers_install
find dest/include \( -name .install -o -name ..install.cmd \) -delete
cp -rv dest/include/* /usr/include
</code></pre>
<blockquote>
<h2><a class="header" href="#contents-of-linux-api-headers" id="contents-of-linux-api-headers">Contents of Linux API Headers</a></h2>
<p><strong>Installed Headers:</strong> /usr/include/asm/<em>.h, /usr/include/asm-generic/</em>.h, /usr/include/drm/<em>.h, /usr/include/linux/</em>.h, /usr/include/misc/<em>.h, /usr/include/mtd/</em>.h, /usr/include/rdma/<em>.h, /usr/include/scsi/</em>.h, /usr/include/sound/<em>.h, /usr/include/video/</em>.h, and /usr/include/xen/*.h</p>
<p><strong>Installed Directories:</strong> /usr/include/asm, /usr/include/asm-generic, /usr/include/drm, /usr/include/linux, /usr/include/misc, /usr/include/mtd, /usr/include/rdma, /usr/include/scsi, /usr/include/sound, /usr/include/video, and /usr/include/xen</p>
<table><thead><tr><th align="left">Installed</th><th align="left">Description</th></tr></thead><tbody>
<tr><td align="left">/usr/include/asm/*.h</td><td align="left">The Linux API ASM Headers</td></tr>
<tr><td align="left">/usr/include/asm-generic/*.h</td><td align="left">The Linux API ASM Generic Headers</td></tr>
<tr><td align="left">/usr/include/drm/*.h</td><td align="left">The Linux API DRM Headers</td></tr>
<tr><td align="left">/usr/include/linux/*.h</td><td align="left">The Linux API Linux Headers</td></tr>
<tr><td align="left">/usr/include/mtd/*.h</td><td align="left">The Linux API MTD Headers</td></tr>
<tr><td align="left">/usr/include/rdma/*.h</td><td align="left">The Linux API RDMA Headers</td></tr>
<tr><td align="left">/usr/include/scsi/*.h</td><td align="left">The Linux API SCSI Headers</td></tr>
<tr><td align="left">/usr/include/sound/*.h</td><td align="left">The Linux API Sound Headers</td></tr>
<tr><td align="left">/usr/include/video/*.h</td><td align="left">The Linux API Video Headers</td></tr>
<tr><td align="left">/usr/include/xen/*.h</td><td align="left">The Linux API Xen Headers</td></tr>
</tbody></table>
</blockquote>
<blockquote>
<h1><a class="header" href="#man-pages-416" id="man-pages-416">Man-pages-4.16</a></h1>
<p>The Man-pages package contains over 2,200 man pages.</p>
<p><strong>Approximate Build Time:</strong> 0.1 SBU</p>
<p><strong>Required Disk Space:</strong> 28 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-man-pages" id="installation-of-man-pages">Installation of Man-pages</a></h1>
<p>Install Man-pages by running:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<h2><a class="header" href="#contents-of-man-pages" id="contents-of-man-pages">Contents of Man-pages</a></h2>
<p><strong>Installed Files:</strong> various man pages</p>
<table><thead><tr><th align="left">Installed</th><th align="left">Description</th></tr></thead><tbody>
<tr><td align="left">man pages</td><td align="left">Describe C programming language functions, important device files, and significant configuration files</td></tr>
</tbody></table>
</blockquote>
<blockquote>
<h1><a class="header" href="#glibc-229-1" id="glibc-229-1">Glibc-2.29</a></h1>
<p>The Glibc package contains the main C library. This library provides the basic routines for allocating memory, searching directories, opening and closing files, reading and writing files, string handling, pattern matching, arithmetic, and so on.</p>
<p><strong>Approximate Build Time:</strong> 22 SBU</p>
<p><strong>Required Disk Space:</strong> 3.2 GB</p>
</blockquote>
<h1><a class="header" href="#installation-of-glibc-1" id="installation-of-glibc-1">Installation of Glibc</a></h1>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>The Glibc build system is self-contained and will install perfectly, even though the compiler specs file and linker are still pointing to <code>/tools</code>. The specs and linker cannot be adjusted before the Glibc install because the Glibc autoconf tests would give false results and defeat the goal of achieving a clean build.</p>
</blockquote>
</blockquote>
<p>Some of the Glibc programs use the non-FHS compilant <code>/var/db</code> directory to store their runtime data. Apply the following patch to make such programs store their runtime data in the FHS-compliant locations:</p>
<pre><code class="language-sh">patch -Np1 -i ../glibc-2.29-fhs-1.patch
</code></pre>
<p>First create a compatibility symlink to avoid references to /tools in our final glibc:</p>
<pre><code class="language-sh">ln -sfv /tools/lib/gcc /usr/lib
</code></pre>
<p>Determine the GCC include directory and create a symlink for LSB compliance. Additionally, for x86_64, create a compatibility symlink required for the dynamic loader to function correctly:</p>
<pre><code class="language-sh">case $(uname -m) in
    i?86)    GCC_INCDIR=/usr/lib/gcc/$(uname -m)-pc-linux-gnu/8.2.0/include
            ln -sfv ld-linux.so.2 /lib/ld-lsb.so.3
    ;;
    x86_64) GCC_INCDIR=/usr/lib/gcc/x86_64-pc-linux-gnu/8.2.0/include
            ln -sfv ../lib/ld-linux-x86-64.so.2 /lib64
            ln -sfv ../lib/ld-linux-x86-64.so.2 /lib64/ld-lsb-x86-64.so.3
    ;;
esac
</code></pre>
<p>Remove a file that may be left over from a previous build attempt:</p>
<pre><code class="language-sh">rm -f /usr/include/limits.h
</code></pre>
<p>The Glibc documentation recommends building Glibc in a dedicated build directory:</p>
<pre><code class="language-sh">mkdir -v build
cd       build
</code></pre>
<p>Prepare Glibc for compilation:</p>
<pre><code class="language-sh">CC=&quot;gcc -isystem $GCC_INCDIR -isystem /usr/include&quot; \
../configure --prefix=/usr                          \
             --disable-werror                       \
             --enable-kernel=3.2                    \
             --enable-stack-protector=strong        \
             libc_cv_slibdir=/lib
unset GCC_INCDIR
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-options-and-new-configure-parameters" id="the-meaning-of-the-options-and-new-configure-parameters">The meaning of the options and new configure parameters:</a></h3>
<blockquote>
<p><strong><em>CC=&quot;gcc -isystem $GCC_INCDIR -isystem /usr/include&quot;</em></strong></p>
<blockquote>
<p>Setting the location of both gcc and system include directories avoids introduction of invalid paths in debugging symbols.</p>
</blockquote>
<p><strong><em>--disable-werror</em></strong></p>
<blockquote>
<p>This option disables the -Werror option passed to GCC. This is necessary for running the test suite.</p>
</blockquote>
<p><strong><em>--enable-stack-protector=strong</em></strong></p>
<blockquote>
<p>This option increases system security by adding extra code to check for buffer overflows, such as stack smashing attacks.</p>
</blockquote>
<p><strong><em>libc_cv_slibdir=/lib</em></strong></p>
<blockquote>
<p>This variable sets the correct library for all systems. We do not want lib64 to be used.</p>
</blockquote>
</blockquote>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<blockquote>
<p><strong>Important</strong></p>
<blockquote>
<p>In this section, the test suite for Glibc is considered critical. Do not skip it under any circumstance.</p>
</blockquote>
</blockquote>
<p>Generally a few tests do not pass. The test failures listed below are usually safe to ignore.</p>
<pre><code class="language-sh">case $(uname -m) in
  i?86)   ln -sfnv $PWD/elf/ld-linux.so.2        /lib ;;
  x86_64) ln -sfnv $PWD/elf/ld-linux-x86-64.so.2 /lib ;;
esac
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>The symbolic link above is needed to run the tests at this stage of building in the chroot envirnment. It will be overwritten in the install phase below.</p>
</blockquote>
</blockquote>
<pre><code class="language-sh">make check
</code></pre>
<p>You may see some test failures. The Glibc test suite is somewhat dependent on the host system. This is a list of the most common issues seen for some versions of LFS:</p>
<ul>
<li>
<p><em>misc/tst-ttyname</em> is known to fail in the LFS chroot environment.</p>
</li>
<li>
<p><em>inet/tst-idna_name_classify</em> is known to fail in the LFS chroot environment.</p>
</li>
<li>
<p><em>posix/tst-getaddrinfo4 and posix/tst-getaddrinfo5</em> may fail on some architectures.</p>
</li>
<li>
<p>The <em>nss/tst-nss-files-hosts-multi</em> test may fail for reasons that have not been determined.</p>
</li>
<li>
<p>The <em>rt/tst-cputimer{1,2,3}</em> tests depend on the host system kernel. Kernels 4.14.91–4.14.96, 4.19.13–4.19.18, and 4.20.0–4.20.5 are known to cause these tests to fail.</p>
</li>
<li>
<p>The math tests sometimes fail when running on systems where the CPU is not a relatively new Intel or AMD processor.</p>
</li>
</ul>
<p>Though it is a harmless message, the install stage of Glibc will complain about the absence of /etc/ld.so.conf. Prevent this warning with:</p>
<pre><code class="language-sh">touch /etc/ld.so.conf
</code></pre>
<p>Fix the generated Makefile to skip an unneeded sanity check that fails in the LFS partial environment:</p>
<pre><code class="language-sh">sed '/test-installation/s@$(PERL)@echo not running@' -i ../Makefile
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<p>Install the configuration file and runtime directory for <strong>nscd</strong>:</p>
<pre><code class="language-sh">cp -v ../nscd/nscd.conf /etc/nscd.conf
mkdir -pv /var/cache/nscd
</code></pre>
<p>Install the systemd support files for <strong>nscd</strong>:</p>
<pre><code class="language-sh">install -v -Dm644 ../nscd/nscd.tmpfiles /usr/lib/tmpfiles.d/nscd.conf
install -v -Dm644 ../nscd/nscd.service /lib/systemd/system/nscd.service
</code></pre>
<p>Next, install the locales that can make the system respond in a different language. None of the locales are required, but if some of them are missing, the test suites of future packages would skip important testcases.</p>
<p>Individual locales can be installed using the <strong>localedef</strong> program. E.g., the first <strong>localedef</strong> command below combines the <code>/usr/share/i18n/locales/cs_CZ</code> charset-independent locale definition with the <code>/usr/share/i18n/charmaps/UTF-8.gz</code> charmap definition and appends the result to the <code>/usr/lib/locale/locale-archive</code> file. The following instructions will install the minimum set of locales necessary for the optimal coverage of tests:</p>
<pre><code class="language-sh">mkdir -pv /usr/lib/locale
localedef -i POSIX -f UTF-8 C.UTF-8 2&gt; /dev/null || true
localedef -i cs_CZ -f UTF-8 cs_CZ.UTF-8
localedef -i de_DE -f ISO-8859-1 de_DE
localedef -i de_DE@euro -f ISO-8859-15 de_DE@euro
localedef -i de_DE -f UTF-8 de_DE.UTF-8
localedef -i el_GR -f ISO-8859-7 el_GR
localedef -i en_GB -f UTF-8 en_GB.UTF-8
localedef -i en_HK -f ISO-8859-1 en_HK
localedef -i en_PH -f ISO-8859-1 en_PH
localedef -i en_US -f ISO-8859-1 en_US
localedef -i en_US -f UTF-8 en_US.UTF-8
localedef -i es_MX -f ISO-8859-1 es_MX
localedef -i fa_IR -f UTF-8 fa_IR
localedef -i fr_FR -f ISO-8859-1 fr_FR
localedef -i fr_FR@euro -f ISO-8859-15 fr_FR@euro
localedef -i fr_FR -f UTF-8 fr_FR.UTF-8
localedef -i it_IT -f ISO-8859-1 it_IT
localedef -i it_IT -f UTF-8 it_IT.UTF-8
localedef -i ja_JP -f EUC-JP ja_JP
localedef -i ja_JP -f SHIFT_JIS ja_JP.SIJS 2&gt; /dev/null || true
localedef -i ja_JP -f UTF-8 ja_JP.UTF-8
localedef -i ru_RU -f KOI8-R ru_RU.KOI8-R
localedef -i ru_RU -f UTF-8 ru_RU.UTF-8
localedef -i tr_TR -f UTF-8 tr_TR.UTF-8
localedef -i zh_CN -f GB18030 zh_CN.GB18030
localedef -i zh_HK -f BIG5-HKSCS zh_HK.BIG5-HKSCS
</code></pre>
<p>In addition, install the locale for your own country, language and character set.</p>
<p>Alternatively, install all locales listed in the <code>glibc-2.29/localedata/SUPPORTED</code> file (it includes every locale listed above and many more) at once with the following time-consuming command:</p>
<pre><code class="language-sh">make localedata/install-locales
</code></pre>
<p>Then use the <strong>localedef</strong> command to create and install locales not listed in the <code>glibc-2.29/localedata/SUPPORTED</code> file in the unlikely case you need them.</p>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>Glibc now uses libidn2 when resolving internationalized domain names. This is a run time dependency. If this capability is needed, the instructions for installing libidn2 are in the <a href="http://www.linuxfromscratch.org/blfs/view/8.4/general/libidn2.html">BLFS libidn2 page</a>.</p>
</blockquote>
</blockquote>
<h1><a class="header" href="#configuring-glibc" id="configuring-glibc">Configuring Glibc</a></h1>
<h2><a class="header" href="#adding-nsswitchconf" id="adding-nsswitchconf">Adding nsswitch.conf</a></h2>
<p>The <code>/etc/nsswitch.conf</code> file needs to be created because the Glibc defaults do not work well in a networked environment.</p>
<p>Create a new file <code>/etc/nsswitch.conf</code> by running the following:</p>
<pre><code class="language-sh">cat &gt; /etc/nsswitch.conf &lt;&lt; &quot;EOF&quot;
# Begin /etc/nsswitch.conf

passwd: files
group: files
shadow: files

hosts: files dns
networks: files

protocols: files
services: files
ethers: files
rpc: files

# End /etc/nsswitch.conf
EOF
</code></pre>
<h2><a class="header" href="#adding-time-zone-data" id="adding-time-zone-data">Adding time zone data</a></h2>
<p>Install and set up the time zone data with the following:</p>
<pre><code class="language-sh">tar -xf ../../tzdata2018i.tar.gz

ZONEINFO=/usr/share/zoneinfo
mkdir -pv $ZONEINFO/{posix,right}

for tz in etcetera southamerica northamerica europe africa antarctica  \
          asia australasia backward pacificnew systemv; do
    zic -L /dev/null   -d $ZONEINFO       ${tz}
    zic -L /dev/null   -d $ZONEINFO/posix ${tz}
    zic -L leapseconds -d $ZONEINFO/right ${tz}
done

cp -v zone.tab zone1970.tab iso3166.tab $ZONEINFO
zic -d $ZONEINFO -p America/New_York
unset ZONEINFO
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-zic-commands" id="the-meaning-of-the-zic-commands">The meaning of the zic commands:</a></h3>
<blockquote>
<p><strong><em>zic -L /dev/null ...</em></strong></p>
<blockquote>
<p>This creates posix time zones, without any leap seconds. It is conventional to put these in both <code>zoneinfo</code> and <code>zoneinfo/posix</code>. It is necessary to put the POSIX time zones in <code>zoneinfo</code>, otherwise various test-suites will report errors. On an embedded system, where space is tight and you do not intend to ever update the time zones, you could save 1.9MB by not using the <code>posix</code> directory, but some applications or test-suites might produce some failures.</p>
</blockquote>
<p><strong><em>zic -L leapseconds ...</em></strong></p>
<blockquote>
<p>This creates right time zones, including leap seconds. On an embedded system, where space is tight and you do not intend to ever update the time zones, or care about the correct time, you could save 1.9MB by omitting the right directory.</p>
</blockquote>
<p><strong><em>zic ... -p ...</em></strong></p>
<blockquote>
<p>This creates the <code>posixrules</code> file. We use New York because POSIX requires the daylight savings time rules to be in accordance with US rules.</p>
</blockquote>
</blockquote>
<p>One way to determine the local time zone is to run the following script:</p>
<pre><code class="language-sh">tzselect
</code></pre>
<p>After answering a few questions about the location, the script will output the name of the time zone (e.g., <em>America/Edmonton</em>). There are also some other possible time zones listed in <code>/usr/share/zoneinfo</code> such as <em>Canada/Eastern</em> or <em>EST5EDT</em> that are not identified by the script but can be used.</p>
<p>Then create the /etc/localtime file by running:</p>
<pre><code class="language-sh">ln -sfv /usr/share/zoneinfo/&lt;xxx&gt; /etc/localtime
</code></pre>
<p>Replace <em>&lt;xxx&gt;</em> with the name of the time zone selected (e.g., Canada/Eastern).</p>
<h2><a class="header" href="#configuring-the-dynamic-loader" id="configuring-the-dynamic-loader">Configuring the Dynamic Loader</a></h2>
<p>By default, the dynamic loader (<code>/lib/ld-linux.so.2</code>) searches through <code>/lib</code> and <code>/usr/lib</code> for dynamic libraries that are needed by programs as they are run. However, if there are libraries in directories other than <code>/lib</code> and <code>/usr/lib</code>, these need to be added to the <code>/etc/ld.so.conf</code> file in order for the dynamic loader to find them. Two directories that are commonly known to contain additional libraries are <code>/usr/local/lib</code> and <code>/opt/lib</code>, so add those directories to the dynamic loader's search path.</p>
<p>Create a new file <code>/etc/ld.so.conf</code> by running the following:</p>
<pre><code class="language-sh">cat &gt; /etc/ld.so.conf &lt;&lt; &quot;EOF&quot;
# Begin /etc/ld.so.conf
/usr/local/lib
/opt/lib

EOF
</code></pre>
<p>If desired, the dynamic loader can also search a directory and include the contents of files found there. Generally the files in this include directory are one line specifying the desired library path. To add this capability run the following commands:</p>
<pre><code class="language-sh">cat &gt;&gt; /etc/ld.so.conf &lt;&lt; &quot;EOF&quot;
# Add an include directory
include /etc/ld.so.conf.d/*.conf

EOF
mkdir -pv /etc/ld.so.conf.d
</code></pre>
<blockquote>
<h2><a class="header" href="#contents-of-glibc" id="contents-of-glibc">Contents of Glibc</a></h2>
<p><strong>Installed Programs:</strong> catchsegv, gencat, getconf, getent, iconv, iconvconfig, ldconfig, ldd, lddlibc4, locale, localedef, makedb, mtrace, nscd, pldd, sln, sotruss, sprof, tzselect, xtrace, zdump, and zic</p>
<p><strong>Installed Libraries:</strong> ld-2.29.so, libBrokenLocale.{a,so}, libSegFault.so, libanl.{a,so}, libc.{a,so}, libc_nonshared.a, libcidn.so, libcrypt.{a,so}, libdl.{a,so}, libg.a, libieee.a, libm.{a,so}, libmcheck.a, libmemusage.so, libnsl.{a,so}, libnss_compat.so, libnss_dns.so, libnss_files.so, libnss_hesiod.so, libnss_nis.so, libnss_nisplus.so, libpthread.{a,so}, libpthread_nonshared.a, libresolv.{a,so}, librpcsvc.a, librt.{a,so}, libthread_db.so, and libutil.{a,so}</p>
<p><strong>Installed Directories:</strong> /usr/include/arpa, /usr/include/bits, /usr/include/gnu, /usr/include/net, /usr/include/netash, /usr/include/netatalk, /usr/include/netax25, /usr/include/neteconet, /usr/include/netinet, /usr/include/netipx, /usr/include/netiucv, /usr/include/netpacket, /usr/include/netrom, /usr/include/netrose, /usr/include/nfs, /usr/include/protocols, /usr/include/rpc, /usr/include/rpcsvc, /usr/include/sys, /usr/lib/audit, /usr/lib/gconv, /usr/lib/locale, /usr/libexec/getconf, /usr/share/i18n, /usr/share/zoneinfo, /var/cache/nscd, and /var/lib/nss_db</p>
<table><thead><tr><th align="left">Installed</th><th align="left">Description</th></tr></thead><tbody>
<tr><td align="left"><strong>catchsegv</strong></td><td align="left">Can be used to create a stack trace when a program terminates with a segmentation fault</td></tr>
<tr><td align="left"><strong>gencat</strong></td><td align="left">Generates message catalogues</td></tr>
<tr><td align="left"><strong>getconf</strong></td><td align="left">Displays the system configuration values for file system specific variables</td></tr>
<tr><td align="left"><strong>getent</strong></td><td align="left">Gets entries from an administrative database</td></tr>
<tr><td align="left"><strong>iconv</strong></td><td align="left">Performs character set conversion</td></tr>
<tr><td align="left"><strong>iconvconfig</strong></td><td align="left">Creates fastloading <strong>iconv</strong> module configuration files</td></tr>
<tr><td align="left"><strong>ldconfig</strong></td><td align="left">Configures the dynamic linker runtime bindings</td></tr>
<tr><td align="left"><strong>ldd</strong></td><td align="left">Reports which shared libraries are required by each given program or shared library</td></tr>
<tr><td align="left"><strong>lddlibc4</strong></td><td align="left">Assists <strong>ldd</strong> with object files</td></tr>
<tr><td align="left"><strong>locale</strong></td><td align="left">Prints various information about the current locale</td></tr>
<tr><td align="left"><strong>localedef</strong></td><td align="left">Compiles locale specifications</td></tr>
<tr><td align="left"><strong>makedb</strong></td><td align="left">Creates a simple database from textual input</td></tr>
<tr><td align="left"><strong>mtrace</strong></td><td align="left">Reads and interprets a memory trace file and displays a summary in human-readable format</td></tr>
<tr><td align="left"><strong>nscd</strong></td><td align="left">A daemon that provides a cache for the most common name service requests</td></tr>
<tr><td align="left"><strong>pldd</strong></td><td align="left">Lists dynamic shared objects used by running processes</td></tr>
<tr><td align="left"><strong>sln</strong></td><td align="left">A statically linked <strong>ln</strong> program</td></tr>
<tr><td align="left"><strong>sotruss</strong></td><td align="left">Traces shared library procedure calls of a specified command</td></tr>
<tr><td align="left"><strong>sprof</strong></td><td align="left">Reads and displays shared object profiling data</td></tr>
<tr><td align="left"><strong>tzselect</strong></td><td align="left">Asks the user about the location of the system and reports the corresponding time zone description</td></tr>
<tr><td align="left"><strong>xtrace</strong></td><td align="left">Traces the execution of a program by printing the currently executed function</td></tr>
<tr><td align="left"><strong>zdump</strong></td><td align="left">The time zone dumper</td></tr>
<tr><td align="left"><strong>zic</strong></td><td align="left">The time zone compiler</td></tr>
<tr><td align="left">ld-2.29.so</td><td align="left">The helper program for shared library executables</td></tr>
<tr><td align="left">libBrokenLocale</td><td align="left">Used internally by Glibc as a gross hack to get broken programs (e.g., some Motif applications) running. See comments in glibc-2.29/locale/broken_cur_max.c for more information</td></tr>
<tr><td align="left">libSegFault</td><td align="left">The segmentation fault signal handler, used by <strong>catchsegv</strong></td></tr>
<tr><td align="left">libanl</td><td align="left">An asynchronous name lookup library</td></tr>
<tr><td align="left">libc</td><td align="left">The main C library</td></tr>
<tr><td align="left">libcidn</td><td align="left">Used internally by Glibc for handling internationalized domain names in the getaddrinfo() function</td></tr>
<tr><td align="left">libcrypt</td><td align="left">The cryptography library</td></tr>
<tr><td align="left">libdl</td><td align="left">The dynamic linking interface library</td></tr>
<tr><td align="left">libg</td><td align="left">Dummy library containing no functions. Previously was a runtime library for <strong>g++</strong></td></tr>
<tr><td align="left">libieee</td><td align="left">Linking in this module forces error handling rules for math functions as defined by the Institute of Electrical and Electronic Engineers (IEEE). The default is POSIX.1 error handling</td></tr>
<tr><td align="left">libm</td><td align="left">The mathematical library</td></tr>
<tr><td align="left">libmcheck</td><td align="left">Turns on memory allocation checking when linked to</td></tr>
<tr><td align="left">libmemusage</td><td align="left">Used by <strong>memusage</strong> to help collect information about the memory usage of a program</td></tr>
<tr><td align="left">libnsl</td><td align="left">The network services library</td></tr>
<tr><td align="left">libnss</td><td align="left">The Name Service Switch libraries, containing functions for resolving host names, user names, group names, aliases, services, protocols, etc.</td></tr>
<tr><td align="left">libpthread</td><td align="left">The POSIX threads library</td></tr>
<tr><td align="left">libresolv</td><td align="left">Contains functions for creating, sending, and interpreting packets to the Internet domain name servers</td></tr>
<tr><td align="left">librpcsvc</td><td align="left">Contains functions providing miscellaneous RPC services</td></tr>
<tr><td align="left">librt</td><td align="left">Contains functions providing most of the interfaces specified by the POSIX.1b Realtime Extension</td></tr>
<tr><td align="left">libthread_db</td><td align="left">Contains functions useful for building debuggers for multi-threaded programs</td></tr>
<tr><td align="left">libutil</td><td align="left">Contains code for “standard” functions used in many different Unix utilities</td></tr>
</tbody></table>
</blockquote>
<h1><a class="header" href="#adjusting-the-toolchain" id="adjusting-the-toolchain">Adjusting the Toolchain</a></h1>
<p>Now that the final C libraries have been installed, it is time to adjust the toolchain so that it will link any newly compiled program against these new libraries.</p>
<p>First, backup the /tools linker, and replace it with the adjusted linker we made in chapter 5. We'll also create a link to its counterpart in <code>/tools/\$(uname -m)-pc-linux-gnu/bin</code>:</p>
<pre><code class="language-sh">mv -v /tools/bin/{ld,ld-old}
mv -v /tools/$(uname -m)-pc-linux-gnu/bin/{ld,ld-old}
mv -v /tools/bin/{ld-new,ld}
ln -sv /tools/bin/ld /tools/$(uname -m)-pc-linux-gnu/bin/ld
</code></pre>
<p>Next, amend the GCC specs file so that it points to the new dynamic linker. Simply deleting all instances of “/tools” should leave us with the correct path to the dynamic linker. Also adjust the specs file so that GCC knows where to find the correct headers and Glibc start files. A <strong>sed</strong> command accomplishes this:</p>
<pre><code class="language-sh">gcc -dumpspecs | sed -e 's@/tools@@g'                   \
    -e '/\*startfile_prefix_spec:/{n;s@.*@/usr/lib/ @}' \
    -e '/\*cpp:/{n;s@$@ -isystem /usr/include@}' &gt;      \
    `dirname $(gcc --print-libgcc-file-name)`/specs
</code></pre>
<p>It is a good idea to visually inspect the specs file to verify the intended change was actually made.</p>
<p>It is imperative at this point to ensure that the basic functions (compiling and linking) of the adjusted toolchain are working as expected. To do this, perform the following sanity checks:</p>
<pre><code class="language-sh">echo 'int main(){}' &gt; dummy.c
cc dummy.c -v -Wl,--verbose &amp;&gt; dummy.log
readelf -l a.out | grep ': /lib'
</code></pre>
<p>There should be no errors, and the output of the last command will be (allowing for platform-specific differences in dynamic linker name):</p>
<pre><code class="language-sh">[Requesting program interpreter: /lib64/ld-linux-x86-64.so.2]
</code></pre>
<p>Note that on 64-bit systems <code>/lib</code> is the location of our dynamic linker, but is accessed via a symbolic link in <code>/lib64</code>.</p>
<blockquote>
<blockquote>
<p><strong>NOTE</strong></p>
</blockquote>
<p>On 32-bit systems the interpreter should be /lib/ld-linux.so.2.</p>
</blockquote>
<p>Now make sure that we're setup to use the correct start files:</p>
<pre><code class="language-sh">grep -o '/usr/lib.*/crt[1in].*succeeded' dummy.log
</code></pre>
<p>The output of the last command should be:</p>
<pre><code class="language-sh">/usr/lib/../lib/crt1.o succeeded
/usr/lib/../lib/crti.o succeeded
/usr/lib/../lib/crtn.o succeeded
</code></pre>
<p>Verify that the compiler is searching for the correct header files:</p>
<pre><code class="language-sh">grep -B1 '^ /usr/include' dummy.log
</code></pre>
<p>This command should return the following output:</p>
<pre><code class="language-sh">#include &lt;...&gt; search starts here:
/usr/include
</code></pre>
<p>Next, verify that the new linker is being used with the correct search paths:</p>
<pre><code class="language-sh">grep 'SEARCH.*/usr/lib' dummy.log |sed 's|; |\n|g'
</code></pre>
<p>References to paths that have components with '-linux-gnu' should be ignored, but otherwise the output of the last command should be:</p>
<pre><code class="language-sh">SEARCH_DIR(&quot;/usr/lib&quot;)
SEARCH_DIR(&quot;/lib&quot;)
</code></pre>
<p>Next make sure that we're using the correct libc:</p>
<pre><code class="language-sh">grep &quot;/lib.*/libc.so.6 &quot; dummy.log
</code></pre>
<p>The output of the last command should be:</p>
<pre><code class="language-sh">attempt to open /lib/libc.so.6 succeeded
</code></pre>
<p>Lastly, make sure GCC is using the correct dynamic linker:</p>
<pre><code class="language-sh">grep found dummy.log
</code></pre>
<p>The output of the last command should be (allowing for platform-specific differences in dynamic linker name):</p>
<pre><code class="language-sh">found ld-linux-x86-64.so.2 at /lib/ld-linux-x86-64.so.2
</code></pre>
<p>If the output does not appear as shown above or is not received at all, then something is seriously wrong. Investigate and retrace the steps to find out where the problem is and correct it. The most likely reason is that something went wrong with the specs file adjustment. Any issues will need to be resolved before continuing with the process.</p>
<p>Once everything is working correctly, clean up the test files:</p>
<pre><code class="language-sh">rm -v dummy.c a.out dummy.log
</code></pre>
<blockquote>
<h1><a class="header" href="#zlib-1211" id="zlib-1211">Zlib-1.2.11</a></h1>
<p>The Zlib package contains compression and decompression routines used by some programs.</p>
<p><strong>Approximate Build Time:</strong> less than 0.1 SBU</p>
<p><strong>Required Disk Space:</strong> 4.4 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-zlib" id="installation-of-zlib">Installation of Zlib</a></h1>
<p>Prepare Zlib for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/usr
</code></pre>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>To test the results, issue:</p>
<pre><code class="language-sh">make check
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<p>The shared library needs to be moved to <code>/lib</code>, and as a result the <code>.so</code> file in <code>/usr/lib</code> will need to be recreated:</p>
<pre><code class="language-sh">mv -v /usr/lib/libz.so.\* /lib
ln -sfv ../../lib/\$(readlink /usr/lib/libz.so) /usr/lib/libz.so
</code></pre>
<blockquote>
<h2><a class="header" href="#contents-of-zlib" id="contents-of-zlib">Contents of Zlib</a></h2>
<p><strong>Installed Libraries:</strong> libz.{a,so}</p>
<table><thead><tr><th align="left">Installed</th><th align="left">Description</th></tr></thead><tbody>
<tr><td align="left">libz</td><td align="left">Contains compression and decompression functions used by some programs</td></tr>
</tbody></table>
</blockquote>
<blockquote>
<h1><a class="header" href="#file-536-1" id="file-536-1">File-5.36</a></h1>
<p>The File package contains a utility for determining the type of a given file or files.</p>
<p><strong>Approximate Build Time:</strong> 0.1 SBU</p>
<p><strong>Required Disk Space:</strong> 18 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-file-1" id="installation-of-file-1">Installation of File</a></h1>
<p>Prepare File for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/usr
</code></pre>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>To test the results, issue:</p>
<pre><code class="language-sh">make check
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<h2><a class="header" href="#contents-of-file" id="contents-of-file">Contents of File</a></h2>
<p><strong>Installed Programs:</strong> File</p>
<p><strong>Installed Libraries:</strong> libmagic.so</p>
<table><thead><tr><th align="left">Installed</th><th align="left">Description</th></tr></thead><tbody>
<tr><td align="left"><strong>file</strong></td><td align="left">Tries to classify each given file; it does this by performing several tests—file system tests, magic number tests, and language tests</td></tr>
<tr><td align="left">libmagic</td><td align="left">Contains routines for magic number recognition, used by the <strong>file</strong> program</td></tr>
</tbody></table>
</blockquote>
<blockquote>
<h1><a class="header" href="#readline-80" id="readline-80">Readline-8.0</a></h1>
<p>The Readline package is a set of libraries that offers command-line editing and history capabilities.</p>
<p><strong>Approximate Build Time:</strong> 0.1 SBU</p>
<p><strong>Required Disk Space:</strong> 15 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-readline" id="installation-of-readline">Installation of Readline</a></h1>
<p>Reinstalling Readline will cause the old libraries to be moved to &lt;libraryname&gt;.old. While this is normally not a problem, in some cases it can trigger a linking bug in ldconfig. This can be avoided by issuing the following two seds:</p>
<pre><code class="language-sh">sed -i '/MV.*old/d' Makefile.in
sed -i '/{OLDSUFF}/c:' support/shlib-install
</code></pre>
<p>Prepare Readline for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/usr    \
            --disable-static \
            --docdir=/usr/share/doc/readline-8.0
</code></pre>
<p>Compile the package:</p>
<pre><code class="language-sh">make SHLIB_LIBS=&quot;-L/tools/lib -lncursesw&quot;
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-make-option" id="the-meaning-of-the-make-option">The meaning of the make option:</a></h3>
<blockquote>
<p><strong>SHLIB_LIBS=&quot;-L/tools/lib -lncursesw&quot;</strong></p>
<blockquote>
<p>This option forces Readline to link against the libncursesw library.</p>
</blockquote>
</blockquote>
<p>This package does not come with a test suite.</p>
<p>Install the package:</p>
<pre><code class="language-sh">make SHLIB_LIBS=&quot;-L/tools/lib -lncursesw&quot; install
</code></pre>
<p>Now move the dynamic libraries to a more appropriate location and fix up some permissions and symbolic links:</p>
<pre><code class="language-sh">mv -v /usr/lib/lib{readline,history}.so.* /lib
chmod -v u+w /lib/lib{readline,history}.so.*
ln -sfv ../../lib/$(readlink /usr/lib/libreadline.so) /usr/lib/libreadline.so
ln -sfv ../../lib/$(readlink /usr/lib/libhistory.so ) /usr/lib/libhistory.so
</code></pre>
<p>If desired, install the documentation:</p>
<p>install -v -m644 doc/*.{ps,pdf,html,dvi} /usr/share/doc/readline-8.0</p>
<blockquote>
<h2><a class="header" href="#contents-of-readline" id="contents-of-readline">Contents of Readline</a></h2>
<p><strong>Installed Libraries:</strong> libhistory.so and libreadline.so</p>
<p><strong>Installed Directories:</strong> /usr/include/readline, /usr/share/readline, and /usr/share/doc/readline-8.0</p>
<table><thead><tr><th align="left">Installed</th><th align="left">Description</th></tr></thead><tbody>
<tr><td align="left">libhistory</td><td align="left">Provides a consistent user interface for recalling lines of history</td></tr>
<tr><td align="left">libreadline</td><td align="left">Provides a set of commands for manipulating text entered in an interactive session of a program.</td></tr>
</tbody></table>
</blockquote>
<blockquote>
<h1><a class="header" href="#m4-1418-1" id="m4-1418-1">M4-1.4.18</a></h1>
<p>The M4 package contains a macro processor.</p>
<p><strong>Approximate Build Time:</strong> 0.4 SBU</p>
<p><strong>Required Disk Space:</strong> 33 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-m4-1" id="installation-of-m4-1">Installation of M4</a></h1>
<p>First, make some fixes required by glibc-2.28:</p>
<pre><code class="language-sh">sed -i 's/IO_ftrylockfile/IO_EOF_SEEN/' lib/*.c
echo &quot;#define _IO_IN_BACKUP 0x100&quot; &gt;&gt; lib/stdio-impl.h
</code></pre>
<p>Prepare M4 for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/usr
</code></pre>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>To test the results, issue:</p>
<pre><code class="language-sh">make check
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<h2><a class="header" href="#contents-of-file-1" id="contents-of-file-1">Contents of File</a></h2>
<p><strong>Installed Programs:</strong> m4</p>
<table><thead><tr><th align="left">Installed</th><th align="left">Description</th></tr></thead><tbody>
<tr><td align="left"><strong>m4</strong></td><td align="left">Copies the given files while expanding the macros that they contain [These macros are either built-in or user-defined and can take any number of arguments. Besides performing macro expansion, <strong>m4</strong> has built-in functions for including named files, running Unix commands, performing integer arithmetic, manipulating text, recursion, etc. The <strong>m4</strong> program can be used either as a front-end to a compiler or as a macro processor in its own right.]</td></tr>
</tbody></table>
</blockquote>
<blockquote>
<h1><a class="header" href="#bc-1071" id="bc-1071">Bc-1.07.1</a></h1>
<p>The Bc package contains an arbitrary precision numeric processing language.</p>
<p><strong>Approximate Build Time:</strong> 0.1 SBU</p>
<p><strong>Required Disk Space:</strong> 4.1 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-bc" id="installation-of-bc">Installation of Bc</a></h1>
<p>First, change an internal script to use <strong>sed</strong> instead of <strong>ed</strong>:</p>
<pre><code class="language-sh">cat &gt; bc/fix-libmath_h &lt;&lt; &quot;EOF&quot;
#! /bin/bash
sed -e '1   s/^/{&quot;/' \
    -e     's/$/&quot;,/' \
    -e '2,$ s/^/&quot;/'  \
    -e   '$ d'       \
    -i libmath.h

sed -e '$ s/$/0}/' \
    -i libmath.h
EOF
</code></pre>
<p>Create temporary symbolic links so the package can find the readline library and confirm that its required libncurses library is available. Even though the libraries are in /tools/lib at this point, the system will use /usr/lib at the end of this chapter.</p>
<pre><code class="language-sh">ln -sv /tools/lib/libncursesw.so.6 /usr/lib/libncursesw.so.6
ln -sfv libncursesw.so.6 /usr/lib/libncurses.so
</code></pre>
<p>Fix an issue in configure due to missing files in the early stages of LFS:</p>
<pre><code class="language-sh">sed -i -e '/flex/s/as_fn_error/: ;; # &amp;/' configure
</code></pre>
<p>Prepare Bc for compilation:</p>
<pre><code class="language-sh">./configure --prefix=/usr           \
            --with-readline         \
            --mandir=/usr/share/man \
            --infodir=/usr/share/info
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-configure-options-9" id="the-meaning-of-the-configure-options-9">The meaning of the configure options:</a></h3>
<blockquote>
<p><strong>--with-readline</strong></p>
<blockquote>
<p>This option tells Bc to use the <strong>readline</strong> library that is already installed on the system rather than using its own readline version.</p>
</blockquote>
</blockquote>
<p>Compile the package:</p>
<pre><code class="language-sh">make
</code></pre>
<p>To test bc, run the commands below. There is quite a bit of output, so you may want to redirect it to a file. There are a very small percentage of tests (10 of 12,144) that will indicate a round off error at the last digit.</p>
<pre><code class="language-sh">echo &quot;quit&quot; | ./bc/bc -l Test/checklib.b
</code></pre>
<p>Install the package:</p>
<pre><code class="language-sh">make install
</code></pre>
<blockquote>
<h2><a class="header" href="#contents-of-bc" id="contents-of-bc">Contents of Bc</a></h2>
<p><strong>Installed Programs:</strong> bc and dc</p>
<table><thead><tr><th align="left">Installed</th><th align="left">Description</th></tr></thead><tbody>
<tr><td align="left"><strong>bc</strong></td><td align="left">A command line calculator</td></tr>
<tr><td align="left"><strong>dc</strong></td><td align="left">A reverse-polish command line calculator</td></tr>
</tbody></table>
</blockquote>
<blockquote>
<h1><a class="header" href="#binutils-232" id="binutils-232">Binutils-2.32</a></h1>
<p>The Binutils package contains a linker, an assembler, and other tools for handling object files.</p>
<p><strong>Approximate Build Time:</strong> 6.9 SBU</p>
<p><strong>Required Disk Space:</strong> 4.9 MB</p>
</blockquote>
<h1><a class="header" href="#installation-of-binutils-1" id="installation-of-binutils-1">Installation of Binutils</a></h1>
<p>Verify that the PTYs are working properly inside the chroot environment by performing a simple test:</p>
<pre><code class="language-sh">expect -c &quot;spawn ls&quot;
</code></pre>
<p>This command should output the following:</p>
<pre><code class="language-sh">spawn ls
</code></pre>
<p>If, instead, the output includes the message below, then the environment is not set up for proper PTY operation. This issue needs to be resolved before running the test suites for Binutils and GCC:</p>
<pre><code class="language-sh">The system has no more ptys.
Ask your system administrator to create more.
</code></pre>
<p>mkdir -v build
cd build</p>
<p>The Binutils documentation recommends building Binutils in a dedicated build directory:</p>
<p>Prepare Binutils for compilation:</p>
<pre><code class="language-sh">../configure --prefix=/usr       \
             --enable-gold       \
             --enable-ld=default \
             --enable-plugins    \
             --enable-shared     \
             --disable-werror    \
             --enable-64-bit-bfd \
             --with-system-zlib
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-configure-parameters" id="the-meaning-of-the-configure-parameters">The meaning of the configure parameters:</a></h3>
<blockquote>
<p><strong>--enable-gold</strong></p>
<blockquote>
<p>Build the gold linker and install it as ld.gold (along side the default linker).
<strong>--enable-ld=default</strong></p>
</blockquote>
<blockquote>
<p>Build the original bdf linker and install it as both ld (the default linker) and ld.bfd.</p>
</blockquote>
<p><strong>--enable-plugins</strong></p>
<blockquote>
<p>Enables plugin support for the linker.</p>
</blockquote>
<p><strong>--enable-64-bit-bfd</strong></p>
<blockquote>
<p>Enables 64-bit support (on hosts with narrower word sizes). May not be needed on 64-bit systems, but does no harm.</p>
</blockquote>
<p><strong>--with-system-zlib</strong></p>
<blockquote>
<p>Use the installed zlib library rather than building the included version.</p>
</blockquote>
</blockquote>
<p>Compile the package:</p>
<pre><code class="language-sh">make tooldir=/usr
</code></pre>
<h3><a class="header" href="#the-meaning-of-the-make-parameters-1" id="the-meaning-of-the-make-parameters-1">The meaning of the make parameters:</a></h3>
<blockquote>
<p><strong>tooldir=/usr</strong></p>
<blockquote>
<p>Normally, the tooldir (the directory where the executables will ultimately be located) is set to $(<code>exec_prefix</code>)/$(<code>target_alias</code>). For example, x86_64 machines would expand that to <code>/usr/x86_64-unknown-linux-gnu</code>. Because this is a custom system, this target-specific directory in <code>/usr</code> is not required. $(<code>exec_prefix</code>)/$(<code>target_alias</code>) would be used if the system was used to cross-compile (for example, compiling a package on an Intel machine that generates code that can be executed on PowerPC machines).</p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>IMPORTANT</strong></p>
<blockquote>
<p>The test suite for Binutils in this section is considered critical. Do not skip it under any circumstances.</p>
</blockquote>
</blockquote>
<p>To test the results, issue:</p>
<pre><code class="language-sh">make -k check
</code></pre>
<p>One test, debug_msg.sh, is known to fail.</p>
<p>Install the package:</p>
<pre><code class="language-sh">make tooldir=/usr install
</code></pre>
<blockquote>
<h2><a class="header" href="#contents-of-binutils" id="contents-of-binutils">Contents of Binutils</a></h2>
<p><strong>Installed Programs:</strong> addr2line, ar, as, c++filt, elfedit, gprof, ld, ld.bfd, ld.gold, nm, objcopy, objdump, ranlib, readelf, size, strings, and strip</p>
<p><strong>Installed Libraries:</strong> libbfd.{a,so} and libopcodes.{a,so}</p>
<p><strong>Installed Directories:</strong> /usr/lib/ldscripts</p>
<table><thead><tr><th align="left">Installed</th><th align="left">Description</th></tr></thead><tbody>
<tr><td align="left">** addr2line **</td><td align="left">Translates program addresses to file names and line numbers; given an address and the name of an executable, it uses the debugging information in the executable to determine which source file and line number are associated with the address</td></tr>
<tr><td align="left"><strong>ar</strong></td><td align="left">Creates, modifies, and extracts from archives</td></tr>
<tr><td align="left"><strong>as</strong></td><td align="left">An assembler that assembles the output of <strong>gcc</strong> into object files</td></tr>
<tr><td align="left"><strong>c++filt</strong></td><td align="left">Used by the linker to de-mangle C++ and Java symbols and to keep overloaded functions from clashing</td></tr>
<tr><td align="left"><strong>elfedit</strong></td><td align="left">Updates the ELF header of ELF files</td></tr>
<tr><td align="left"><strong>gprof</strong></td><td align="left">Displays call graph profile data</td></tr>
<tr><td align="left"><strong>ld</strong></td><td align="left">A linker that combines a number of object and archive files into a single file, relocating their data and tying up symbol references</td></tr>
<tr><td align="left"><strong>ld.gold</strong></td><td align="left">A cut down version of ld that only supports the elf object file format</td></tr>
<tr><td align="left"><strong>ld.bfd</strong></td><td align="left">Hard link to <strong>ld</strong></td></tr>
<tr><td align="left"><strong>nm</strong></td><td align="left">Lists the symbols occurring in a given object file</td></tr>
<tr><td align="left"><strong>objcopy</strong></td><td align="left">Translates one type of object file into another</td></tr>
<tr><td align="left"><strong>objdump</strong></td><td align="left">Displays information about the given object file, with options controlling the particular information to display; the information shown is useful to programmers who are working on the compilation tools</td></tr>
<tr><td align="left"><strong>ranlib</strong></td><td align="left">Generates an index of the contents of an archive and stores it in the archive; the index lists all of the symbols defined by archive members that are relocatable object files</td></tr>
<tr><td align="left"><strong>readelf</strong></td><td align="left">Displays information about ELF type binaries</td></tr>
<tr><td align="left"><strong>size</strong></td><td align="left">Lists the section sizes and the total size for the given object files</td></tr>
<tr><td align="left"><strong>strings</strong></td><td align="left">Outputs, for each given file, the sequences of printable characters that are of at least the specified length (defaulting to four); for object files, it prints, by default, only the strings from the initializing and loading sections while for other types of files, it scans the entire file</td></tr>
<tr><td align="left"><strong>strip</strong></td><td align="left">Discards symbols from object files</td></tr>
<tr><td align="left">libbfd</td><td align="left">The Binary File Descriptor library</td></tr>
<tr><td align="left">libopcodes</td><td align="left">A library for dealing with opcodes—the “readable text” versions of instructions for the processor; it is used for building utilities like <strong>objdump</strong></td></tr>
</tbody></table>
</blockquote>
<h1><a class="header" href="#gmp-612" id="gmp-612">GMP-6.1.2</a></h1>
<h1><a class="header" href="#mpfr-402" id="mpfr-402">MPFR-4.0.2</a></h1>
<h1><a class="header" href="#mpc-110" id="mpc-110">MPC-1.1.0</a></h1>
<h1><a class="header" href="#shadow-46" id="shadow-46">Shadow-4.6</a></h1>
<h1><a class="header" href="#gcc-820" id="gcc-820">GCC-8.2.0</a></h1>
<h1><a class="header" href="#bzip2-106-1" id="bzip2-106-1">Bzip2-1.0.6</a></h1>
<h1><a class="header" href="#pkg-config-0292" id="pkg-config-0292">Pkg-config-0.29.2</a></h1>
<h1><a class="header" href="#ncurses-61-1" id="ncurses-61-1">Ncurses-6.1</a></h1>
<h1><a class="header" href="#attr-2448" id="attr-2448">Attr-2.4.48</a></h1>
<h1><a class="header" href="#acl-2253" id="acl-2253">Acl-2.2.53</a></h1>
<h1><a class="header" href="#libcap-226" id="libcap-226">Libcap-2.26</a></h1>
<h1><a class="header" href="#sed-47-1" id="sed-47-1">Sed-4.7</a></h1>
<h1><a class="header" href="#psmisc-232" id="psmisc-232">Psmisc-23.2</a></h1>
<h1><a class="header" href="#iana-etc-230" id="iana-etc-230">Iana-Etc-2.30</a></h1>
<h1><a class="header" href="#bison-332-1" id="bison-332-1">Bison-3.3.2</a></h1>
<h1><a class="header" href="#flex-264" id="flex-264">Flex-2.6.4</a></h1>
<h1><a class="header" href="#grep-33-1" id="grep-33-1">Grep-3.3</a></h1>
<h1><a class="header" href="#bash-50-1" id="bash-50-1">Bash-5.0</a></h1>
<h1><a class="header" href="#libtool-246" id="libtool-246">Libtool-2.4.6</a></h1>
<h1><a class="header" href="#gdbm-1181" id="gdbm-1181">GDBM-1.18.1</a></h1>
<h1><a class="header" href="#gperf-31" id="gperf-31">Gperf-3.1</a></h1>
<h1><a class="header" href="#expat-226" id="expat-226">Expat-2.2.6</a></h1>
<h1><a class="header" href="#inetutils-194" id="inetutils-194">Inetutils-1.9.4</a></h1>
<h1><a class="header" href="#perl-5281-1" id="perl-5281-1">Perl-5.28.1</a></h1>
<h1><a class="header" href="#xmlparser-244" id="xmlparser-244">XML::Parser-2.44</a></h1>
<h1><a class="header" href="#intltool-0510" id="intltool-0510">Intltool-0.51.0</a></h1>
<h1><a class="header" href="#autoconf-269" id="autoconf-269">Autoconf-2.69</a></h1>
<h1><a class="header" href="#automake-1161" id="automake-1161">Automake-1.16.1</a></h1>
<h1><a class="header" href="#xz-524-1" id="xz-524-1">Xz-5.2.4</a></h1>
<h1><a class="header" href="#kmod-26" id="kmod-26">Kmod-26</a></h1>
<h1><a class="header" href="#gettext-01981-1" id="gettext-01981-1">Gettext-0.19.8.1</a></h1>
<h1><a class="header" href="#libelf-from-elfutils-0176" id="libelf-from-elfutils-0176">Libelf from Elfutils-0.176</a></h1>
<h1><a class="header" href="#libffi-321" id="libffi-321">Libffi-3.2.1</a></h1>
<h1><a class="header" href="#openssl-111a" id="openssl-111a">OpenSSL-1.1.1a</a></h1>
<h1><a class="header" href="#python-372-1" id="python-372-1">Python-3.7.2</a></h1>
<h1><a class="header" href="#ninja-190" id="ninja-190">Ninja-1.9.0</a></h1>
<h1><a class="header" href="#meson-0492" id="meson-0492">Meson-0.49.2</a></h1>
<h1><a class="header" href="#coreutils-830-1" id="coreutils-830-1">Coreutils-8.30</a></h1>
<h1><a class="header" href="#check-0120" id="check-0120">Check-0.12.0</a></h1>
<h1><a class="header" href="#diffutils-37-1" id="diffutils-37-1">Diffutils-3.7</a></h1>
<h1><a class="header" href="#gawk-421-1" id="gawk-421-1">Gawk-4.2.1</a></h1>
<h1><a class="header" href="#findutils-460-1" id="findutils-460-1">Findutils-4.6.0</a></h1>
<h1><a class="header" href="#groff-1224" id="groff-1224">Groff-1.22.4</a></h1>
<h1><a class="header" href="#grub-202" id="grub-202">GRUB-2.02</a></h1>
<h1><a class="header" href="#less-530" id="less-530">Less-530</a></h1>
<h1><a class="header" href="#gzip-110-1" id="gzip-110-1">Gzip-1.10</a></h1>
<h1><a class="header" href="#iproute2-4200" id="iproute2-4200">IPRoute2-4.20.0</a></h1>
<h1><a class="header" href="#kbd-204" id="kbd-204">Kbd-2.0.4</a></h1>
<h1><a class="header" href="#libpipeline-151" id="libpipeline-151">Libpipeline-1.5.1</a></h1>
<h1><a class="header" href="#make-421-1" id="make-421-1">Make-4.2.1</a></h1>
<h1><a class="header" href="#patch-276-1" id="patch-276-1">Patch-2.7.6</a></h1>
<h1><a class="header" href="#man-db-285" id="man-db-285">Man-DB-2.8.5</a></h1>
<h1><a class="header" href="#tar-131-1" id="tar-131-1">Tar-1.31</a></h1>
<h1><a class="header" href="#texinfo-65-1" id="texinfo-65-1">Texinfo-6.5</a></h1>
<h1><a class="header" href="#vim-81" id="vim-81">Vim-8.1</a></h1>
<h1><a class="header" href="#systemd-240" id="systemd-240">Systemd-240</a></h1>
<h1><a class="header" href="#d-bus-11212" id="d-bus-11212">D-Bus-1.12.12</a></h1>
<h1><a class="header" href="#procps-ng-3315" id="procps-ng-3315">Procps-ng-3.3.15</a></h1>
<h1><a class="header" href="#util-linux-2331-1" id="util-linux-2331-1">Util-linux-2.33.1</a></h1>
<h1><a class="header" href="#e2fsprogs-1445" id="e2fsprogs-1445">E2fsprogs-1.44.5</a></h1>
<h1><a class="header" href="#about-debugging-symbols" id="about-debugging-symbols">About Debugging Symbols</a></h1>
<h1><a class="header" href="#stripping-again" id="stripping-again">Stripping Again</a></h1>
<h1><a class="header" href="#cleaning-up" id="cleaning-up">Cleaning Up</a></h1>
<h1><a class="header" href="#system-configuration" id="system-configuration">System Configuration</a></h1>
<h3><a class="header" href="#table-of-contents-6" id="table-of-contents-6">Table of Contents</a></h3>
<ul>
<li><a href="07-System-Configuration/./01-Introduction.html">Introduction</a></li>
<li><a href="07-System-Configuration/./02-General-Network-Configuration.html">General Network Configuration</a></li>
<li><a href="07-System-Configuration/./03-Overview-of-Device-and-Module-Handling.html">Overview of Device and Module Handling</a></li>
<li><a href="07-System-Configuration/./04-Managing-Devices.html">Managing Devices</a></li>
<li><a href="07-System-Configuration/./05-Configuring-the-system-clock.html">Configuring the system clock</a></li>
<li><a href="07-System-Configuration/./06-Configuring-the-Linux-Console.html">Configuring the Linux Console</a></li>
<li><a href="07-System-Configuration/./07-Configuring-the-System-Locale.html">Configuring the System Locale</a></li>
<li><a href="07-System-Configuration/./08-Creating-the-slash-etc-slash-inputrc-File.html">Creating the /etc/inputrc File</a></li>
<li><a href="07-System-Configuration/./09-Creating-the-slash-etc-slash-shells-File.html">Creating the /etc/shells File</a></li>
<li><a href="07-System-Configuration/./10-Systemd-Usage-and-Configuration.html">Systemd Usage and Configuration</a></li>
</ul>
<h1><a class="header" href="#introduction-6" id="introduction-6">Introduction</a></h1>
<p>This chapter discusses configuration files and systemd services. First, the general configuration files needed to set up networking are presented.</p>
<ul>
<li>
<p><a href="07-System-Configuration/./02-General-Network-Configuration.html">Section 7.2, “General Network Configuration”</a>.</p>
</li>
<li>
<p><a href="07-System-Configuration/./02-General-Network-Configuration.html">Section 7.2.3, “Configuring the system hostname”</a>.</p>
</li>
<li>
<p><a href="07-System-Configuration/./02-General-Network-Configuration.html">Section 7.2.4, “Customizing the /etc/hosts File”</a>.</p>
</li>
</ul>
<p>Second, issues that affect the proper setup of devices are discussed.</p>
<ul>
<li>
<p><a href="07-System-Configuration/./03-Overview-of-Device-and-Module-Handling.html">Section 7.3, “Overview of Device and Module Handling”</a>.</p>
</li>
<li>
<p><a href="07-System-Configuration/./04-Managing-Devices.html">Section 7.4, “Managing Devices”</a>.</p>
</li>
</ul>
<p>Third, configuring the system clock and keyboard layout.</p>
<ul>
<li>
<p><a href="07-System-Configuration/./05-Configuring-the-system-clock.html">Section 7.5, “Configuring the system clock”</a>.</p>
</li>
<li>
<p><a href="07-System-Configuration/./06-Configuring-the-Linux-Console.html">Section 7.6, “Configuring the Linux Console”</a>.</p>
</li>
</ul>
<p>Fourth, a brief introduction to the scripts and configuration files used when the user logs into the system.</p>
<ul>
<li>
<p><a href="07-System-Configuration/./07-Configuring-the-System-Locale.html">Section 7.7, “Configuring the System Locale”</a>.</p>
</li>
<li>
<p><a href="07-System-Configuration/./08-Creating-the-slash-etc-slash-inputrc-File.html">Section 7.8, “Creating the /etc/inputrc File”</a>.</p>
</li>
</ul>
<p>And finally, configuring the systemd behavior.</p>
<ul>
<li><a href="07-System-Configuration/./10-Systemd-Usage-and-Configuration.html">Section 7.10, “Systemd Usage and Configuration”</a>.</li>
</ul>
<h1><a class="header" href="#general-network-configuration" id="general-network-configuration">General Network Configuration</a></h1>
<p>This section only applies if a network card is to be configured.</p>
<h1><a class="header" href="#network-interface-configuration-files" id="network-interface-configuration-files">Network Interface Configuration Files</a></h1>
<p>Starting with version 209, systemd ships a network configuration daemon called <strong>systemd-networkd</strong> which can be used for basic network configuration. Additionally, since version 213, DNS name resolution can be handled by <strong>systemd-resolved</strong> in place of a static <code>/etc/resolv.conf</code> file. Both services are enabled by default.</p>
<p>Configuration files for <strong>systemd-networkd</strong> (and <strong>systemd-resolved</strong>) can be placed in <code>/usr/lib/systemd/network</code> or <code>/etc/systemd/network</code>. Files in <code>/etc/systemd/network</code> have a higher priority than the ones in <code>/usr/lib/systemd/network</code>. There are three types of configuration files: .link, .netdev and .network files. For detailed descriptions and example contents of these configuration files, consult the <code>systemd-link(5)</code>, <code>systemd-netdev(5)</code> and <code>systemd-network(5)</code> manual pages.</p>
<h1><a class="header" href="#network-device-naming" id="network-device-naming">Network Device Naming</a></h1>
<p>Udev normally assigns network card interface names based on system physical characteristics such as enp2s1. If you are not sure what your interface name is, you can always run <strong>ip link</strong> after you have booted your system.</p>
<p>For most systems, there is only one network interface for each type of connection. For example, the classic interface name for a wired connection is eth0. A wireless connection will usually have the name wifi0 or wlan0.</p>
<p>If you prefer to use the classic or customized network interface names, there are three alternative ways to do that:</p>
<ul>
<li>
<p>Mask udev's .link file for the default policy:</p>
<pre><code class="language-sh">ln -s /dev/null /etc/systemd/network/99-default.link
</code></pre>
</li>
<li>
<p>Create a manual naming scheme, for example by naming the interfaces something like &quot;internet0&quot;, &quot;dmz0&quot;, or &quot;lan0&quot;. For that, create .link files in /etc/systemd/network/, that choose an explicit name or a better naming scheme for one, some, or all of your interfaces. For example:</p>
<pre><code class="language-sh">cat &gt; /etc/systemd/network/10-ether0.link &lt;&lt; &quot;EOF&quot;
[Match]

# Change the MAC address as appropriate for your network device

MACAddress=12:34:45:78:90:AB

[Link]
Name=ether0
EOF
</code></pre>
<p>
<p>See the man page systemd.link(5) for more information. <p></p>
</li>
<li>
<p>In <code>/boot/grub/grub.cfg</code>, pass the option net.ifnames=0 on the kernel command line.</p>
</li>
</ul>
<h1><a class="header" href="#static-ip-configuration" id="static-ip-configuration">Static IP Configuration</a></h1>
<p>The command below creates a basic configuration file for a Static IP setup (using both systemd-networkd and systemd-resolved):</p>
<pre><code class="language-sh">cat &gt; /etc/systemd/network/10-eth-static.network &lt;&lt; &quot;EOF&quot;
[Match]
Name=&lt;network-device-name&gt;

[Network]
Address=192.168.0.2/24
Gateway=192.168.0.1
DNS=192.168.0.1
Domains=&lt;Your Domain Name&gt;
EOF
</code></pre>
<p>Multiple DNS entries can be added if you have more than one DNS server. Do not include DNS or Domains entries if you intend to use a static <code>/etc/resolv.conf</code> file.</p>
<h1><a class="header" href="#dhcp-configuration" id="dhcp-configuration">DHCP Configuration</a></h1>
<p>The command below creates a basic configuration file for an IPv4 DHCP setup:</p>
<pre><code class="language-sh">cat &gt; /etc/systemd/network/10-eth-dhcp.network &lt;&lt; &quot;EOF&quot;
[Match]
Name=&lt;network-device-name&gt;

[Network]
DHCP=ipv4

[DHCP]
UseDomains=true
EOF
</code></pre>
<h1><a class="header" href="#creating-the-etcresolvconf-file" id="creating-the-etcresolvconf-file">Creating the /etc/resolv.conf File</a></h1>
<p>If the system is going to be connected to the Internet, it will need some means of Domain Name Service (DNS) name resolution to resolve Internet domain names to IP addresses, and vice versa. This is best achieved by placing the IP address of the DNS server, available from the ISP or network administrator, into <code>/etc/resolv.conf</code>.</p>
<h1><a class="header" href="#systemd-resolved-configuration" id="systemd-resolved-configuration">systemd-resolved Configuration</a></h1>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>If using another means to configure your network interfaces (ex: ppp, network-manager, etc.), or if using any type of local resolver (ex: bind, dnsmasq, etc.), or any other software that generates an /etc/resolv.conf (ex: resolvconf), the systemd-resolved service should not be used.</p>
</blockquote>
</blockquote>
<p>When using <strong>systemd-resolved</strong> for DNS configuration, it creates the file <code>/run/systemd/resolve/resolv.conf</code>. Create a symlink in <code>/etc</code> to use the generated file:</p>
<h1><a class="header" href="#static-resolvconf-configuration" id="static-resolvconf-configuration">Static resolv.conf Configuration</a></h1>
<p>If a static <code>/etc/resolv.conf</code> is desired, create it by running the following command:</p>
<pre><code class="language-sh">cat &gt; /etc/resolv.conf &lt;&lt; &quot;EOF&quot;
# Begin /etc/resolv.conf

domain &lt;Your Domain Name&gt;
nameserver _&lt;IP address of your primary nameserver&gt;_
nameserver _&lt;IP address of your secondary nameserver&gt;_

# End /etc/resolv.conf
EOF
</code></pre>
<p>The domain statement can be omitted or replaced with a <code>search</code> statement. See the man page for resolv.conf for more details.</p>
<p>Replace <code>&lt;IP address of the nameserver&gt;</code> with the IP address of the DNS most appropriate for the setup. There will often be more than one entry (requirements demand secondary servers for fallback capability). If you only need or want one DNS server, remove the second <em>nameserver</em> line from the file. The IP address may also be a router on the local network.</p>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>The Google Public IPv4 DNS addresses are <em>8.8.8.8</em> and <em>8.8.4.4</em> for IPv4, and <em>2001:4860:4860::8888</em> and <em>2001:4860:4860::8844</em> for IPv6.</p>
</blockquote>
</blockquote>
<h1><a class="header" href="#configuring-the-system-hostname" id="configuring-the-system-hostname">Configuring the system hostname</a></h1>
<p>During the boot process, the file <code>/etc/hostname</code> is used for establishing the system's hostname.</p>
<p>Create the <code>/etc/hostname</code> file and enter a hostname by running:</p>
<pre><code class="language-sh">echo &quot;&lt;lfs&gt;&quot; &gt; /etc/hostname
</code></pre>
<p><em>&lt;lfs&gt;</em> needs to be replaced with the name given to the computer. Do not enter the Fully Qualified Domain Name (FQDN) here. That information is put in the <code>/etc/hosts</code> file.</p>
<h1><a class="header" href="#customizing-the-etchosts-file" id="customizing-the-etchosts-file">Customizing the /etc/hosts File</a></h1>
<p>Decide on a fully-qualified domain name (FQDN), and possible aliases for use in the <code>/etc/hosts</code> file. If using static addresses, you'll also need to decide on an IP address. The syntax for a hosts file entry is:</p>
<pre><code class="language-sh">IP_address myhost.example.org aliases
</code></pre>
<p>Unless the computer is to be visible to the Internet (i.e., there is a registered domain and a valid block of assigned IP addresses—most users do not have this), make sure that the IP address is in the private network IP address range. Valid ranges are:</p>
<pre><code class="language-sh">Private Network Address Range      Normal Prefix
10.0.0.1 - 10.255.255.254           8
172.x.0.1 - 172.x.255.254           16
192.168.y.1 - 192.168.y.254         24
</code></pre>
<p>x can be any number in the range 16-31. y can be any number in the range 0-255.</p>
<p>A valid private IP address could be 192.168.1.1. A valid FQDN for this IP could be lfs.example.org.</p>
<p>Even if not using a network card, a valid FQDN is still required. This is necessary for certain programs to operate correctly.</p>
<p>If using DHCP, DHCPv6, IPv6 Autoconfiguration, or if a network card is not going to be configured, create the <code>/etc/hosts</code>file by running the following command:</p>
<pre><code class="language-sh">cat &gt; /etc/hosts &lt;&lt; &quot;EOF&quot;
# Begin /etc/hosts

127.0.0.1 localhost
127.0.1.1 _&lt;FQDN&gt;_ _&lt;HOSTNAME&gt;_
::1       localhost ip6-localhost ip6-loopback
ff02::1   ip6-allnodes
ff02::2   ip6-allrouters

# End /etc/hosts
EOF
</code></pre>
<p>The ::1 entry is the IPv6 counterpart of 127.0.0.1 and represents the IPv6 loopback interface. 127.0.1.1 is a loopback entry reserved specifically for the FQDN.</p>
<p>If using a static address, create the <code>/etc/hosts</code> file by running this command instead:</p>
<pre><code class="language-sh">cat &gt; /etc/hosts &lt;&lt; &quot;EOF&quot;
# Begin /etc/hosts

127.0.0.1 localhost
127.0.1.1 _&lt;FQDN&gt;_ _&lt;HOSTNAME&gt;_
_&lt;192.168.0.2&gt;_ _&lt;FQDN&gt;_ _&lt;HOSTNAME&gt;_ [alias1] [alias2] ...
::1       localhost ip6-localhost ip6-loopback
ff02::1   ip6-allnodes
ff02::2   ip6-allrouters

# End /etc/hosts
EOF
</code></pre>
<p>The <em>&lt;192.168.0.2&gt;</em>, <em>&lt;FQDN&gt;</em>, and <em>&lt;HOSTNAME&gt;</em> values need to be changed for specific uses or requirements (if assigned an IP address by a network/system administrator and the machine will be connected to an existing network). The optional alias name(s) can be omitted.</p>
<h1><a class="header" href="#overview-of-device-and-module-handling" id="overview-of-device-and-module-handling">Overview of Device and Module Handling</a></h1>
<p>In <a href="07-System-Configuration/./06-Installing-Basic-System-Software/index.html">Chapter 6</a>, we installed the Udev package when systemd was built. Before we go into the details regarding how this works, a brief history of previous methods of handling devices is in order.</p>
<p>Linux systems in general traditionally used a static device creation method, whereby a great many device nodes were created under <code>/dev</code> (sometimes literally thousands of nodes), regardless of whether the corresponding hardware devices actually existed. This was typically done via a <strong>MAKEDEV</strong> script, which contains a number of calls to the <strong>mknod</strong> program with the relevant major and minor device numbers for every possible device that might exist in the world.</p>
<p>Using the Udev method, only those devices which are detected by the kernel get device nodes created for them. Because these device nodes will be created each time the system boots, they will be stored on a <em>devtmpfs</em> file system (a virtual file system that resides entirely in system memory). Device nodes do not require much space, so the memory that is used is negligible.</p>
<h1><a class="header" href="#history" id="history">History</a></h1>
<p>In February 2000, a new filesystem called <em>devfs</em> was merged into the 2.3.46 kernel and was made available during the 2.4 series of stable kernels. Although it was present in the kernel source itself, this method of creating devices dynamically never received overwhelming support from the core kernel developers.</p>
<p>The main problem with the approach adopted by <em>devfs</em> was the way it handled device detection, creation, and naming. The latter issue, that of device node naming, was perhaps the most critical. It is generally accepted that if device names are allowed to be configurable, then the device naming policy should be up to a system administrator, not imposed on them by any particular developer(s). The <em>devfs</em> file system also suffered from race conditions that were inherent in its design and could not be fixed without a substantial revision to the kernel. It was marked as deprecated for a long period – due to a lack of maintenance – and was finally removed from the kernel in June, 2006.</p>
<p>With the development of the unstable 2.5 kernel tree, later released as the 2.6 series of stable kernels, a new virtual filesystem called <em>sysfs</em> came to be. The job of <em>sysfs</em> is to export a view of the system's hardware configuration to userspace processes. With this userspace-visible representation, the possibility of developing a userspace replacement for <em>devfs</em> became much more realistic.</p>
<h1><a class="header" href="#udev-implementation" id="udev-implementation">Udev Implementation</a></h1>
<h2><a class="header" href="#sysfs" id="sysfs">Sysfs</a></h2>
<p>The <em>sysfs</em> filesystem was mentioned briefly above. One may wonder how <em>sysfs</em> knows about the devices present on a system and what device numbers should be used for them. Drivers that have been compiled into the kernel directly register their objects with a <em>sysfs</em> (devtmpfs internally) as they are detected by the kernel. For drivers compiled as modules, this registration will happen when the module is loaded. Once the <em>sysfs</em> filesystem is mounted (on <code>/sys</code>), data which the drivers register with <em>sysfs</em> are available to userspace processes and to udevd for processing (including modifications to device nodes).</p>
<h2><a class="header" href="#device-node-creation" id="device-node-creation">Device Node Creation</a></h2>
<p>Device files are created by the kernel by the <em>devtmpfs</em> filesystem. Any driver that wishes to register a device node will go through the <em>devtmpfs</em> (via the driver core) to do it. When a <em>devtmpfs</em> instance is mounted on <code>/dev</code>, the device node will initially be created with a fixed name, permissions, and owner.</p>
<p>A short time later, the kernel will send a uevent to <strong>udevd</strong>. Based on the rules specified in the files within the <code>/etc/udev/rules.d</code>, <code>/lib/udev/rules.d</code>, and <code>/run/udev/rules.d</code> directories, <strong>udevd</strong> will create additional symlinks to the device node, or change its permissions, owner, or group, or modify the internal <strong>udevd</strong> database entry (name) for that object.</p>
<p>The rules in these three directories are numbered and all three directories are merged together. If <strong>udevd</strong> can't find a rule for the device it is creating, it will leave the permissions and ownership at whatever <em>devtmpfs</em> used initially.</p>
<h2><a class="header" href="#module-loading" id="module-loading">Module Loading</a></h2>
<p>Device drivers compiled as modules may have aliases built into them. Aliases are visible in the output of the <strong>modinfo</strong> program and are usually related to the bus-specific identifiers of devices supported by a module. For example, the snd-fm801 driver supports PCI devices with vendor ID 0x1319 and device ID 0x0801, and has an alias of “pci:v00001319d00000801sv<em>sd</em>bc04sc01i*”. For most devices, the bus driver exports the alias of the driver that would handle the device via sysfs. E.g., the <code>/sys/bus/pci/devices/0000:00:0d.0/modalias</code> file might contain the string “pci:v00001319d00000801sv00001319sd00001319bc04sc01i00”. The default rules provided with Udev will cause <strong>udevd</strong> to call out to <strong>/sbin/modprobe</strong> with the contents of the MODALIAS uevent environment variable (which should be the same as the contents of the <code>modalias</code> file in sysfs), thus loading all modules whose aliases match this string after wildcard expansion.</p>
<p>In this example, this means that, in addition to <em>snd-fm801</em>, the obsolete (and unwanted) forte driver will be loaded if it is available. See below for ways in which the loading of unwanted drivers can be prevented.</p>
<p>The kernel itself is also able to load modules for network protocols, filesystems and NLS support on demand.</p>
<h2><a class="header" href="#handling-hotpluggabledynamic-devices" id="handling-hotpluggabledynamic-devices">Handling Hotpluggable/Dynamic Devices</a></h2>
<p>When you plug in a device, such as a Universal Serial Bus (USB) MP3 player, the kernel recognizes that the device is now connected and generates a uevent. This uevent is then handled by <strong>udevd</strong> as described above.</p>
<h1><a class="header" href="#problems-with-loading-modules-and-creating-devices" id="problems-with-loading-modules-and-creating-devices">Problems with Loading Modules and Creating Devices</a></h1>
<p>There are a few possible problems when it comes to automatically creating device nodes.</p>
<h2><a class="header" href="#a-kernel-module-is-not-loaded-automatically" id="a-kernel-module-is-not-loaded-automatically">A kernel module is not loaded automatically</a></h2>
<p>Udev will only load a module if it has a bus-specific alias and the bus driver properly exports the necessary aliases to <em>sysfs</em>. In other cases, one should arrange module loading by other means. With Linux-4.20.12, Udev is known to load properly-written drivers for INPUT, IDE, PCI, USB, SCSI, SERIO, and FireWire devices.</p>
<p>To determine if the device driver you require has the necessary support for Udev, run <strong>modinfo</strong> with the module name as the argument. Now try locating the device directory under <code>/sys/bus</code> and check whether there is a modalias file there.</p>
<p>If the <code>modalias</code> file exists in <em>sysfs</em>, the driver supports the device and can talk to it directly, but doesn't have the alias, it is a bug in the driver. Load the driver without the help from Udev and expect the issue to be fixed later.</p>
<p>If there is no <code>modalias</code> file in the relevant directory under <code>/sys/bus</code>, this means that the kernel developers have not yet added modalias support to this bus type. With Linux-4.20.12, this is the case with ISA busses. Expect this issue to be fixed in later kernel versions.</p>
<p>Udev is not intended to load “wrapper” drivers such as <em>snd-pcm-oss</em> and non-hardware drivers such as <em>loop</em> at all.</p>
<h2><a class="header" href="#a-kernel-module-is-not-loaded-automatically-and-udev-is-not-intended-to-load-it" id="a-kernel-module-is-not-loaded-automatically-and-udev-is-not-intended-to-load-it">A kernel module is not loaded automatically, and Udev is not intended to load it</a></h2>
<p>If the “wrapper” module only enhances the functionality provided by some other module (e.g., <em>snd-pcm-oss</em> enhances the functionality of <em>snd-pcm</em> by making the sound cards available to OSS applications), configure <strong>modprobe</strong> to load the wrapper after Udev loads the wrapped module. To do this, add a “softdep” line to the corresponding <em><code>/etc/modprobe.d/&lt;filename&gt;.conf</code></em> file. For example:</p>
<pre><code class="language-sh">softdep snd-pcm post: snd-pcm-oss
</code></pre>
<p>Note that the “softdep” command also allows <code>pre:</code> dependencies, or a mixture of both <code>pre:</code> and <code>post:.</code> See the <code>modprobe.d(5)</code> manual page for more information on “softdep” syntax and capabilities.</p>
<p>If the module in question is not a wrapper and is useful by itself, configure the modules <strong>bootscript</strong> to load this module on system boot. To do this, add the module name to the <code>/etc/sysconfig/modules</code> file on a separate line. This works for wrapper modules too, but is suboptimal in that case.</p>
<h2><a class="header" href="#udev-loads-some-unwanted-module" id="udev-loads-some-unwanted-module">Udev loads some unwanted module</a></h2>
<p>Either don't build the module, or blacklist it in a <code>/etc/modprobe.d/blacklist.conf</code> file as done with the forte module in the example below:</p>
<pre><code class="language-sh">blacklist forte
</code></pre>
<p>Blacklisted modules can still be loaded manually with the explicit <strong>modprobe</strong> command.</p>
<h2><a class="header" href="#udev-creates-a-device-incorrectly-or-makes-a-wrong-symlink" id="udev-creates-a-device-incorrectly-or-makes-a-wrong-symlink">Udev creates a device incorrectly, or makes a wrong symlink</a></h2>
<p>This usually happens if a rule unexpectedly matches a device. For example, a poorly-written rule can match both a SCSI disk (as desired) and the corresponding SCSI generic device (incorrectly) by vendor. Find the offending rule and make it more specific, with the help of the <strong>udevadm info</strong> command.</p>
<h2><a class="header" href="#udev-rule-works-unreliably" id="udev-rule-works-unreliably">Udev rule works unreliably</a></h2>
<p>This may be another manifestation of the previous problem. If not, and your rule uses <em>sysfs</em> attributes, it may be a kernel timing issue, to be fixed in later kernels. For now, you can work around it by creating a rule that waits for the used <em>sysfs</em> attribute and appending it to the <code>/etc/udev/rules.d/10-wait_for_sysfs.rules</code>file (create this file if it does not exist). Please notify the LFS Development list if you do so and it helps.</p>
<h2><a class="header" href="#udev-does-not-create-a-device" id="udev-does-not-create-a-device">Udev does not create a device</a></h2>
<p>Further text assumes that the driver is built statically into the kernel or already loaded as a module, and that you have already checked that Udev doesn't create a misnamed device.</p>
<p>Udev has no information needed to create a device node if a kernel driver does not export its data to <em>sysfs</em>. This is most common with third party drivers from outside the kernel tree. Create a static device node in <code>/lib/udev/devices</code> with the appropriate major/minor numbers (see the file <code>devices.txt</code> inside the kernel documentation or the documentation provided by the third party driver vendor). The static device node will be copied to <code>/dev</code> by <strong>udev</strong>.</p>
<h2><a class="header" href="#device-naming-order-changes-randomly-after-rebooting" id="device-naming-order-changes-randomly-after-rebooting">Device naming order changes randomly after rebooting</a></h2>
<p>This is due to the fact that Udev, by design, handles uevents and loads modules in parallel, and thus in an unpredictable order. This will never be “fixed”. You should not rely upon the kernel device names being stable. Instead, create your own rules that make symlinks with stable names based on some stable attributes of the device, such as a serial number or the output of various *_id utilities installed by Udev. See <a href="07-System-Configuration/./04-Managing-Devices.html">Section 7.4, “Managing Devices”</a> and <a href="07-System-Configuration/./02-General-Network-Configuration.html">Section 7.2, “General Network Configuration”</a> for examples.</p>
<h1><a class="header" href="#useful-reading" id="useful-reading">Useful Reading</a></h1>
<p>Additional helpful documentation is available at the following sites:</p>
<ul>
<li>
<p>A Userspace Implementation of <em>devfs</em> http://www.kroah.com/linux/talks/ols_2003_udev_paper/Reprint-Kroah-Hartman-OLS2003.pdf</p>
</li>
<li>
<p>The <em>sysfs</em> Filesystem http://www.kernel.org/pub/linux/kernel/people/mochel/doc/papers/ols-2005/mochel.pdf</p>
</li>
</ul>
<h1><a class="header" href="#managing-devices" id="managing-devices">Managing Devices</a></h1>
<p>As explained in <a href="07-System-Configuration/./03-Overview-of-Device-and-Module-Handling.html">Section 7.3, “Overview of Device and Module Handling”</a>, the order in which devices with the same function appear in <code>/dev</code> is essentially random. E.g., if you have a USB web camera and a TV tuner, sometimes <code>/dev/video0</code> refers to the camera and <code>/dev/video1</code> refers to the tuner, and sometimes after a reboot the order changes to the opposite one. For all classes of hardware except sound cards and network cards, this is fixable by creating Udev rules for custom persistent symlinks. The case of network cards is covered separately in <a href="07-System-Configuration/./02-General-Network-Configuration.html">Section 7.2, “General Network Configuration”</a>, and sound card configuration can be found in <a href="http://www.linuxfromscratch.org/blfs/view/8.4/postlfs/devices.html">BLFS</a>.</p>
<p>For each of your devices that is likely to have this problem (even if the problem doesn't exist in your current Linux distribution), find the corresponding directory under <code>/sys/class</code> or <code>/sys/block</code>. For video devices, this may be <code>/sys/class/video4linux/videoX</code>. Figure out the attributes that identify the device uniquely (usually, vendor and product IDs and/or serial numbers work):</p>
<pre><code class="language-sh">udevadm info -a -p /sys/class/video4linux/video0
</code></pre>
<p>Then write rules that create the symlinks, e.g.:</p>
<pre><code class="language-sh">cat &gt; /etc/udev/rules.d/83-duplicate_devs.rules &lt;&lt; &quot;EOF&quot;

# Persistent symlinks for webcam and tuner
KERNEL==&quot;video*&quot;, ATTRS{idProduct}==&quot;1910&quot;, ATTRS{idVendor}==&quot;0d81&quot;, \
   SYMLINK+=&quot;webcam&quot;
KERNEL==&quot;video*&quot;, ATTRS{device}==&quot;0x036f&quot;, ATTRS{vendor}==&quot;0x109e&quot;, \
   SYMLINK+=&quot;tvtuner&quot;

EOF
</code></pre>
<p>The result is that <code>/dev/video0</code> and <code>/dev/video1</code> devices still refer randomly to the tuner and the web camera (and thus should never be used directly), but there are symlinks <code>/dev/tvtuner</code> and <code>/dev/webcam</code> that always point to the correct device.</p>
<h1><a class="header" href="#configuring-the-system-clock" id="configuring-the-system-clock">Configuring the system clock</a></h1>
<p>This section discusses how to configure the <strong>systemd-timedated</strong> system service, which configures system clock and timezone.</p>
<p>If you cannot remember whether or not the hardware clock is set to UTC, find out by running the <strong>hwclock --localtime --show</strong> command. This will display what the current time is according to the hardware clock. If this time matches whatever your watch says, then the hardware clock is set to local time. If the output from <strong>hwclock</strong> is not local time, chances are it is set to UTC time. Verify this by adding or subtracting the proper amount of hours for the timezone to the time shown by hwclock. For example, if you are currently in the MST timezone, which is also known as GMT -0700, add seven hours to the local time.</p>
<p><strong>systemd-timedated</strong> reads <code>/etc/adjtime</code>, and depending on the contents of the file, it sets the clock to either UTC or local time.</p>
<p>Create the <code>/etc/adjtime</code> file with the following contents if your hardware clock is set to local time:</p>
<pre><code class="language-sh">cat &gt; /etc/adjtime &lt;&lt; &quot;EOF&quot;
0.0 0 0.0
0
LOCAL
EOF
</code></pre>
<p>If <code>/etc/adjtime</code> isn't present at first boot, <strong>systemd-timedated</strong> will assume that hardware clock is set to UTC and adjust the file according to that.</p>
<p>You can also use the <strong>timedatectl</strong> utility to tell <strong>systemd-timedated</strong> if your hardware clock is set to UTC or local time:</p>
<pre><code class="language-sh">timedatectl set-local-rtc 1
</code></pre>
<p><strong>timedatectl</strong> can also be used to change system time and time zone.</p>
<p>To change your current system time, issue:</p>
<pre><code class="language-sh">timedatectl set-time YYYY-MM-DD HH:MM:SS
</code></pre>
<p>Hardware clock will also be updated accordingly.</p>
<p>To change your current time zone, issue:</p>
<pre><code class="language-sh">timedatectl set-timezone TIMEZONE
</code></pre>
<p>You can get a list of available time zones by running:</p>
<pre><code class="language-sh">timedatectl list-timezones
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>Please note that the <strong>timedatectl</strong> command can be used only on a system booted with systemd.</p>
</blockquote>
</blockquote>
<h1><a class="header" href="#network-time-synchronization" id="network-time-synchronization">Network Time Synchronization</a></h1>
<p>Starting with version 213, systemd ships a daemon called <strong>systemd-timesyncd</strong> which can be used to synchronize the system time with remote NTP servers.</p>
<p>The daemon is not intended as a replacement for the well established NTP daemon, but as a client only implementation of the SNTP protocol which can be used for less advanced tasks and on resource limited systems.</p>
<p>Starting with systemd version 216, the <strong>systemd-timesyncd</strong> daemon is enabled by default. If you want to disable it, issue the following command:</p>
<pre><code class="language-sh">systemctl disable systemd-timesyncd
</code></pre>
<p>The <code>/etc/systemd/timesyncd.conf</code> file can be used to change the NTP servers that <strong>systemd-timesyncd</strong> synchronizes with.</p>
<p>Please note that when system clock is set to Local Time, <strong>systemd-timesyncd</strong> won't update hardware clock.</p>
<h1><a class="header" href="#configuring-the-linux-console" id="configuring-the-linux-console">Configuring the Linux Console</a></h1>
<p>This section discusses how to configure the <strong>systemd-vconsole-setup</strong> system service, which configures the virtual console font and console keymap.</p>
<p>The <strong>systemd-vconsole-setup</strong> service reads the <code>/etc/vconsole.conf</code> file for configuration information. Decide which keymap and screen font will be used. Various language-specific HOWTOs can also help with this, see <a href="http://www.tldp.org/HOWTO/HOWTO-INDEX/other-lang.html">http://www.tldp.org/HOWTO/HOWTO-INDEX/other-lang.html</a>. Examine <strong>localectl list-keymaps</strong> output for a list of valid console keymaps. Look in <code>/usr/share/consolefonts</code> directory for valid screen fonts.</p>
<p>The <code>/etc/vconsole.conf</code> file should contain lines of the form: VARIABLE=&quot;value&quot;. The following variables are recognized:</p>
<dl class="variablelist">
    <dt>
    <span class="term"><b>KEYMAP</b></span>
    </dt>
    <dd>
    <p>
        This variable specifies the key mapping table for the keyboard.
        If unset, it defaults to <code class="literal">us</code>.
    </p>
    </dd>
    <dt>
    <span class="term"><b>KEYMAP_TOGGLE</b></span>
    </dt>
    <dd>
    <p>
        This variable can be used to configure a second toggle keymap
        and is unset by default.
    </p>
    </dd>
    <dt>
    <span class="term"><b>FONT</b></span>
    </dt>
    <dd>
    <p>
        This variable specifies the font used by the virtual console.
    </p>
    </dd>
    <dt>
    <span class="term"><b>FONT_MAP</b></span>
    </dt>
    <dd>
    <p>
        This variable specifies the console map to be used.
    </p>
    </dd>
    <dt>
    <span class="term"><b>FONT_UNIMAP</b></span>
    </dt>
    <dd>
    <p>
        This variable specifies the Unicode font map.
    </p>
    </dd>
</dl>
<p>An example for a German keyboard and console is given below:</p>
<pre><code class="language-sh">cat &gt; /etc/vconsole.conf &lt;&lt; &quot;EOF&quot;
KEYMAP=de-latin1
FONT=Lat2-Terminus16
EOF
</code></pre>
<p>You can change KEYMAP value at runtime by using the <strong>localectl</strong> utility:</p>
<pre><code class="language-sh">localectl set-keymap MAP
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>Please note that the <strong>localectl</strong> command can be used only on a system booted with systemd.</p>
</blockquote>
</blockquote>
<p>You can also use <strong>localectl</strong> utility with the corresponding parameters to change X11 keyboard layout, model, variant and options:</p>
<pre><code class="language-sh">localectl set-x11-keymap LAYOUT [MODEL] [VARIANT] [OPTIONS]
</code></pre>
<p>To list possible values for localectl set-x11-keymap parameters, run localectl with parameters listed below:</p>
<dl class="variablelist">
    <dt>
    <span class="term"><b>list-x11-keymap-models</b></span>
    </dt>
    <dd>
    <p>
        Show known X11 keyboard mapping models.
    </p>
    </dd>
    <dt>
    <span class="term"><b>list-x11-keymap-layouts</b></span>
    </dt>
    <dd>
    <p>
        Show known X11 keyboard mapping layouts.
    </p>
    </dd>
    <dt>
    <span class="term"><b>list-x11-keymap-variants</b></span>
    </dt>
    <dd>
    <p>
        Show known X11 keyboard mapping variants.
    </p>
    </dd>
    <dt>
    <span class="term"><b>list-x11-keymap-options</b></span>
    </dt>
    <dd>
    <p>
        Show known X11 keyboard mapping options.
    </p>
    </dd>
</dl>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>Using any of the parameters listed above requires the XKeyboard Config package from BLFS.</p>
</blockquote>
</blockquote>
<h1><a class="header" href="#configuring-the-system-locale" id="configuring-the-system-locale">Configuring the System Locale</a></h1>
<p>The <code>/etc/locale.conf</code> below sets some environment variables necessary for native language support. Setting them properly results in:</p>
<ul>
<li>
<p>The output of programs translated into the native language</p>
</li>
<li>
<p>Correct classification of characters into letters, digits and other classes. This is necessary for <strong>bash</strong> to properly accept non-ASCII characters in command lines in non-English locales</p>
</li>
<li>
<p>The correct alphabetical sorting order for the country</p>
</li>
<li>
<p>Appropriate default paper size</p>
</li>
<li>
<p>Correct formatting of monetary, time, and date values</p>
</li>
</ul>
<p>Replace <em>&lt;ll&gt;</em> below with the two-letter code for the desired language (e.g., “en”) and <em>&lt;CC&gt;</em> with the two-letter code for the appropriate country (e.g., “GB”). <em>&lt;charmap&gt;</em> should be replaced with the canonical charmap for your chosen locale. Optional modifiers such as “@euro” may also be present.</p>
<p>The list of all locales supported by Glibc can be obtained by running the following command:</p>
<pre><code class="language-sh">locale -a
</code></pre>
<p>Charmaps can have a number of aliases, e.g., “ISO-8859-1” is also referred to as “iso8859-1” and “iso88591”. Some applications cannot handle the various synonyms correctly (e.g., require that “UTF-8” is written as “UTF-8”, not “utf8”), so it is safest in most cases to choose the canonical name for a particular locale. To determine the canonical name, run the following command, where <em>&lt;locale name&gt;</em> is the output given by <strong>locale -a</strong> for your preferred locale (“en_GB.iso88591” in our example).</p>
<pre><code class="language-sh">LC_ALL=&lt;locale name&gt; locale charmap
</code></pre>
<p>For the “en_GB.iso88591” locale, the above command will print:</p>
<pre><code class="language-sh">ISO-8859-1
</code></pre>
<p>This results in a final locale setting of “en_GB.ISO-8859-1”. It is important that the locale found using the heuristic above is tested prior to it being added to the Bash startup files:</p>
<pre><code class="language-sh">LC_ALL=&lt;locale name&gt; locale language
LC_ALL=&lt;locale name&gt; locale charmap
LC_ALL=&lt;locale name&gt; locale int_curr_symbol
LC_ALL=&lt;locale name&gt; locale int_prefix
</code></pre>
<p>The above commands should print the language name, the character encoding used by the locale, the local currency, and the prefix to dial before the telephone number in order to get into the country. If any of the commands above fail with a message similar to the one shown below, this means that your locale was either not installed in Chapter 6 or is not supported by the default installation of Glibc.</p>
<pre><code class="language-sh">locale: Cannot set LC_* to default locale: No such file or directory
</code></pre>
<p>If this happens, you should either install the desired locale using the <strong>localedef</strong> command, or consider choosing a different locale. Further instructions assume that there are no such error messages from Glibc.</p>
<p>Some packages beyond LFS may also lack support for your chosen locale. One example is the X library (part of the X Window System), which outputs the following error message if the locale does not exactly match one of the character map names in its internal files:</p>
<pre><code class="language-sh">Warning: locale not supported by Xlib, locale set to C
</code></pre>
<p>In several cases Xlib expects that the character map will be listed in uppercase notation with canonical dashes. For instance, &quot;ISO-8859-1&quot; rather than &quot;iso88591&quot;. It is also possible to find an appropriate specification by removing the charmap part of the locale specification. This can be checked by running the <strong>locale charmap</strong> command in both locales. For example, one would have to change &quot;de_DE.ISO-8859-15@euro&quot; to &quot;de_DE@euro&quot; in order to get this locale recognized by Xlib.</p>
<p>Other packages can also function incorrectly (but may not necessarily display any error messages) if the locale name does not meet their expectations. In those cases, investigating how other Linux distributions support your locale might provide some useful information.</p>
<p>Once the proper locale settings have been determined, create the <code>/etc/locale.conf</code> file:</p>
<pre><code class="language-sh">cat &gt; /etc/locale.conf &lt;&lt; &quot;EOF&quot;
LANG=&lt;ll&gt;_&lt;CC&gt;.&lt;charmap&gt;&lt;@modifiers&gt;
EOF
</code></pre>
<p>Note that you can modify <code>/etc/locale.conf</code> with the systemd <strong>localectl</strong> utility. To use <strong>localectl</strong> for the example above, run:</p>
<pre><code class="language-sh">localectl set-locale LANG=&quot;&lt;ll&gt;_&lt;CC&gt;.&lt;charmap&gt;&lt;@modifiers&gt;&quot;
</code></pre>
<p>You can also specify other language specific environment variables such as <strong>LANG</strong>, <strong>LC_CTYPE</strong>, <strong>LC_NUMERIC</strong> or any other environment variable from locale output. Just separate them with a space. An example where <strong>LANG</strong> is set as en_US.UTF-8 but <strong>LC_CTYPE</strong> is set as just en_US is:</p>
<pre><code class="language-sh">localectl set-locale LANG=&quot;en_US.UTF-8&quot; LC_CTYPE=&quot;en_US&quot;
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>Please note that the <strong>localectl</strong> command can be used only on a system booted with systemd.</p>
</blockquote>
</blockquote>
<p>The “C” (default) and “en_US” (the recommended one for United States English users) locales are different. “C” uses the US-ASCII 7-bit character set, and treats bytes with the high bit set as invalid characters. That's why, e.g., the <strong>ls</strong> command substitutes them with question marks in that locale. Also, an attempt to send mail with such characters from Mutt or Pine results in non-RFC-conforming messages being sent (the charset in the outgoing mail is indicated as “unknown 8-bit”). So you can use the “C” locale only if you are sure that you will never need 8-bit characters.</p>
<p>UTF-8 based locales are not supported well by many programs. Work is in progress to document and, if possible, fix such problems, see <a href="http://www.linuxfromscratch.org/blfs/view/8.4/introduction/locale-issues.html">http://www.linuxfromscratch.org/blfs/view/8.4/introduction/locale-issues.html</a>.</p>
<h1><a class="header" href="#creating-the-etcinputrc-file" id="creating-the-etcinputrc-file">Creating the /etc/inputrc File</a></h1>
<p>The <code>inputrc</code> file is the configuration file for the Readline library, which provides editing capabilities while the user is entering a line from the terminal. It works by translating keyboard inputs into specific actions. Readline is used by Bash and most other shells as well as many other applications.</p>
<p>Most people do not need user-specific functionality so the command below creates a global <code>/etc/inputrc</code> used by everyone who logs in. If you later decide you need to override the defaults on a per-user basis, you can create a <code>.inputrc</code> file in the user's home directory with the modified mappings.</p>
<p>For more information on how to edit the <code>inputrc</code> file, see <strong>info bash</strong> under the <em>Readline Init File</em> section. info readline is also a good source of information.</p>
<p>Below is a generic global <code>inputrc</code> along with comments to explain what the various options do. Note that comments cannot be on the same line as commands. Create the file using the following command:</p>
<pre><code class="language-sh">cat &gt; /etc/inputrc &lt;&lt; &quot;EOF&quot;
# Begin /etc/inputrc
# Modified by Chris Lynn &lt;roryo@roryo.dynup.net&gt;

# Allow the command prompt to wrap to the next line
set horizontal-scroll-mode Off

# Enable 8bit input
set meta-flag On
set input-meta On

# Turns off 8th bit stripping
set convert-meta Off

# Keep the 8th bit for display
set output-meta On

# none, visible or audible
set bell-style none

# All of the following map the escape sequence of the value
# contained in the 1st argument to the readline specific functions
&quot;\eOd&quot;: backward-word
&quot;\eOc&quot;: forward-word

# for linux console
&quot;\e[1~&quot;: beginning-of-line
&quot;\e[4~&quot;: end-of-line
&quot;\e[5~&quot;: beginning-of-history
&quot;\e[6~&quot;: end-of-history
&quot;\e[3~&quot;: delete-char
&quot;\e[2~&quot;: quoted-insert

# for xterm
&quot;\eOH&quot;: beginning-of-line
&quot;\eOF&quot;: end-of-line

# for Konsole
&quot;\e[H&quot;: beginning-of-line
&quot;\e[F&quot;: end-of-line

# End /etc/inputrc
EOF
</code></pre>
<h1><a class="header" href="#creating-the-etcshells-file" id="creating-the-etcshells-file">Creating the /etc/shells File</a></h1>
<p>The shells file contains a list of login shells on the system. Applications use this file to determine whether a shell is valid. For each shell a single line should be present, consisting of the shell's path, relative to the root of the directory structure (/).</p>
<p>For example, this file is consulted by chsh to determine whether an unprivileged user may change the login shell for her own account. If the command name is not listed, the user will be denied of change.</p>
<p>It is a requirement for applications such as GDM which does not populate the face browser if it can't find <code>/etc/shells</code>, or FTP daemons which traditionally disallow access to users with shells not included in this file.</p>
<pre><code class="language-sh">cat &gt; /etc/shells &lt;&lt; &quot;EOF&quot;
# Begin /etc/shells

/bin/sh
/bin/bash

# End /etc/shells
EOF
</code></pre>
<h1><a class="header" href="#systemd-usage-and-configuration" id="systemd-usage-and-configuration">Systemd Usage and Configuration</a></h1>
<h2><a class="header" href="#basic-configuration" id="basic-configuration">Basic Configuration</a></h2>
<p>The <code>/etc/systemd/system.conf</code> file contains a set of options to control basic systemd operations. The default file has all entries commented out with the default settings indicated. This file is where the log level may be changed as well as some basic logging settings. See the <code>systemd-system.conf(5)</code> manual page for details on each configuration option.</p>
<h2><a class="header" href="#disabling-screen-clearing-at-boot-time" id="disabling-screen-clearing-at-boot-time">Disabling Screen Clearing at Boot Time</a></h2>
<p>The normal behavior for systemd is to clear the screen at the end of the boot sequence. If desired, this behavior may be changed by running the following command:</p>
<pre><code class="language-sh">mkdir -pv /etc/systemd/system/getty@tty1.service.d

cat &gt; /etc/systemd/system/getty@tty1.service.d/noclear.conf &lt;&lt; EOF
[Service]
TTYVTDisallocate=no
EOF
</code></pre>
<p>The boot messages can always be reviewed by using the <strong>journalctl -b</strong> command as the root user.</p>
<h2><a class="header" href="#disabling-tmpfs-for-tmp" id="disabling-tmpfs-for-tmp">Disabling tmpfs for /tmp</a></h2>
<p>By default, <code>/tmp</code> is created as a tmpfs. If this is not desired, it can be overridden by the following:</p>
<pre><code class="language-sh">ln -sfv /dev/null /etc/systemd/system/tmp.mount
</code></pre>
<p>Alternatively, if a a separate partition for <code>/tmp</code> is desired, specify that partition in an <code>/etc/fstab</code> entry.</p>
<blockquote>
<p><strong>Warning</strong></p>
<blockquote>
<p>Do not create the symbolic link above if a separate partition is used for <code>/tmp</code>. This will prevent the root file system (/) from being remounted r/w and make the system unusable when booted.</p>
</blockquote>
</blockquote>
<h2><a class="header" href="#configuring-automatic-file-creation-and-deletion" id="configuring-automatic-file-creation-and-deletion">Configuring Automatic File Creation and Deletion</a></h2>
<p>There are several services that create or delete files or directories:</p>
<ul>
<li>systemd-tmpfiles-clean.service</li>
<li>systemd-tmpfiles-setup-dev.service</li>
<li>systemd-tmpfiles-setup.service</li>
</ul>
<p>The system location for the configuration files is <code>/usr/lib/tmpfiles.d/\*.conf</code>. The local configuration files are in <code>/etc/tmpfiles.d</code>. Files in <code>/etc/tmpfiles.d override</code> files with the same name in <code>/usr/lib/tmpfiles.d</code>. See <code>tmpfiles.d(5)</code> manual page for file format details.</p>
<p>Note that the syntax for the <code>/usr/lib/tmpfiles.d/\*.conf</code> files can be confusing. For example, the default deletion of files in the <code>/tmp</code> directory is located in <code>/usr/lib/tmpfiles.d/tmp.conf</code> with the line:</p>
<pre><code class="language-sh">q /tmp 1777 root root 10d
</code></pre>
<p>The type field, q, discusses creating a subvolume with quotas which is really only applicable to btrfs filesystems. It references type v which in turn references type d (directory). This then creates the specified directory if is is not present and adjusts the permissions and ownership as specified. Contents of the directory will be subject to time based cleanup if the age argument is specified.</p>
<p>If the default parameters are not desired, then the file should be copied to <code>/etc/tmpfiles.d</code> and edited as desired. For example:</p>
<pre><code class="language-sh">mkdir -p /etc/tempfiles.d
cp /usr/lib/tmpfiles.d/tmp.conf /etc/tempfiles.d
</code></pre>
<h2><a class="header" href="#overriding-default-services-behavior" id="overriding-default-services-behavior">Overriding Default Services Behavior</a></h2>
<p>The parameter of a unit can be overriden by creating a directory and a configuration file in <code>/etc/systemd/system</code>. For example:</p>
<pre><code class="language-sh">mkdir -pv /etc/systemd/system/foobar.service.d

cat &gt; /etc/systemd/system/foobar.service.d/foobar.conf &lt;&lt; EOF
[Service]
Restart=always
RestartSec=30
EOF
</code></pre>
<p>See <code>systemd.unit(5)</code> manual page for more information. After creating the configuration file, run <strong>systemctl daemon-reload</strong> and <strong>systemctl restart foobar</strong> to activate the changes to a service.</p>
<h2><a class="header" href="#debugging-the-boot-sequence" id="debugging-the-boot-sequence">Debugging the Boot Sequence</a></h2>
<p>Rather than plain shell scripts used in SysVinit or BSD style init systems, systemd uses a unified format for different types of startup files (or units). The command <strong>systemctl</strong> is used to enable, disable, control state, and obtain status of unit files. Here are some examples of frequently used commands:</p>
<ul>
<li>
<p><strong>systemctl list-units -t <service> [--all]:</strong> lists loaded unit files of type service.</p>
</li>
<li>
<p><strong>systemctl list-units -t <target> [--all]:</strong> lists loaded unit files of type target.</p>
</li>
<li>
<p><strong>systemctl show -p Wants &lt;multi-user.target&gt;:</strong> shows all units that depend on the multi-user target. Targets are special unit files that are anogalous to runlevels under SysVinit.</p>
</li>
<li>
<p><strong>systemctl status &lt;servicename.service&gt;:</strong> shows the status of the servicename service. The .service extension can be omitted if there are no other unit files with the same name, such as .socket files (which create a listening socket that provides similar functionality to inetd/xinetd).</p>
</li>
</ul>
<h2><a class="header" href="#working-with-the-systemd-journal" id="working-with-the-systemd-journal">Working with the Systemd Journal</a></h2>
<p>Logging on a system booted with systemd is handled with systemd-journald (by default), rather than a typical unix syslog daemon. You can also add a normal syslog daemon and have both work side by side if desired. The systemd-journald program stores journal entries in a binary format rather than a plain text log file. To assist with parsing the file, the command journalctl is provided. Here are some examples of frequently used commands:</p>
<ul>
<li>
<p><strong>journalctl -r:</strong> shows all contents of the journal in reverse chronological order.</p>
</li>
<li>
<p><strong>journalctl -u UNIT:</strong> shows the journal entries associated with the specified UNIT file.</p>
</li>
<li>
<p><strong>journalctl -b[=ID] -r:</strong> shows the journal entries since last successful boot (or for boot ID) in reverse chronological order.</p>
</li>
<li>
<p><strong>journalctl -f:</strong> povides functionality similar to tail -f (follow).</p>
</li>
</ul>
<h2><a class="header" href="#long-running-processes" id="long-running-processes">Long Running Processes</a></h2>
<p>Beginning with systemd-230, all user processes are killed when a user session is ended, even if nohup is used, or the process uses the <code>daemon()</code> or <code>setsid()</code> functions. This is a deliberate change from a historically permissive environment to a more restrictive one. The new behavior may cause issues if you depend on long running programs (e.g., <strong>screen</strong> or <strong>tmux</strong>) to remain active after ending your user session. There are three ways to enable lingering processes to remain after a user session is ended.</p>
<ul>
<li>
<p><em>Enable process lingering for only selected users:</em> Normal users have permission to enable process lingering with the command <strong>loginctl enable-linger</strong> for their own user. System administrators can use the same command with a user argument to enable for a user. That user can then use the <strong>systemd-run</strong> command to start long running processes. For example: <strong>systemd-run --scope --user /usr/bin/screen</strong>. If you enable lingering for your user, the user@.service will remain even after all login sessions are closed, and will automatically start at system boot. This has the advantage of explicitly allowing and disallowing processes to run after the user session has ended, but breaks backwards compatibility with tools like <strong>nohup</strong> and utilities that use <code>deamon()</code>.</p>
</li>
<li>
<p><em>Enable system-wide process lingering:</em> You can set <em>KillUserProcesses=no</em> in <code>/etc/logind.conf</code> to enable process lingering globally for all users. This has the benefit of leaving the old method available to all users at the expense of explicit control.</p>
</li>
<li>
<p><em>Disable at build-time:</em> You can enable lingering by default while building systemd by adding the switch <em>-Ddefault-kill-user-processes=no</em> to the <strong>meson</strong> command for systemd. This completely disables the ability of systemd to kill user processes at session end.</p>
</li>
</ul>
<h1><a class="header" href="#making-the-lfs-system-bootable" id="making-the-lfs-system-bootable">Making the LFS System Bootable</a></h1>
<h3><a class="header" href="#table-of-contents-7" id="table-of-contents-7">Table of Contents</a></h3>
<ul>
<li><a href="08-Making-the-LFS-System-Bootable/./01-Introduction.html">Introduction</a></li>
<li><a href="08-Making-the-LFS-System-Bootable/./02-Creating-the-slash-etc-slash-fstab-File.html">Creating the /etc/fstab File</a></li>
<li><a href="08-Making-the-LFS-System-Bootable/./03-Linux-4.20.12.html">Linux-4.20.12</a></li>
<li><a href="08-Making-the-LFS-System-Bootable/./04-Using-GRUB-to-Set-Up-the-Boot-Process.html">Using GRUB to Set Up the Boot Process</a></li>
</ul>
<h1><a class="header" href="#introduction-7" id="introduction-7">Introduction</a></h1>
<p>It is time to make the LFS system bootable. This chapter discusses creating an fstab file, building a kernel for the new LFS system, and installing the GRUB boot loader so that the LFS system can be selected for booting at startup.</p>
<h1><a class="header" href="#creating-the-etcfstab-file" id="creating-the-etcfstab-file">Creating the /etc/fstab File</a></h1>
<p>The <code>/etc/fstab</code> file is used by some programs to determine where file systems are to be mounted by default, in which order, and which must be checked (for integrity errors) prior to mounting. Create a new file systems table like this:</p>
<pre><code class="language-sh">cat &gt; /etc/fstab &lt;&lt; &quot;EOF&quot;
# Begin /etc/fstab

# file system  mount-point  type     options             dump  fsck
#                                                              order

/dev/&lt;xxx&gt;     /            &lt;fff&gt;    defaults            1     1
/dev/&lt;yyy&gt;     swap         swap     pri=1               0     0

# End /etc/fstab
EOF
</code></pre>
<p>Replace <em>&lt;xxx&gt;</em>, <em>&lt;yyy&gt;</em>, and <em>&lt;fff&gt;</em> with the values appropriate for the system, for example, <code>sda2</code>, <code>sda5</code>, and <code>ext4</code>. For details on the six fields in this file, see <strong>man 5 fstab</strong>.</p>
<p>Filesystems with MS-DOS or Windows origin (i.e. vfat, ntfs, smbfs, cifs, iso9660, udf) need a special option, utf8, in order for non-ASCII characters in file names to be interpreted properly. For non-UTF-8 locales, the value of <code>iocharset</code> should be set to be the same as the character set of the locale, adjusted in such a way that the kernel understands it. This works if the relevant character set definition (found under File systems -&gt; Native Language Support when configuring the kernel) has been compiled into the kernel or built as a module. However, if the character set of the locale is UTF-8, the corresponding option <code>iocharset=utf8</code> would make the file system case sensitive. To fix this, use the special option utf8 instead of <code>iocharset=utf8</code>, for UTF-8 locales. The “codepage” option is also needed for vfat and smbfs filesystems. It should be set to the codepage number used under MS-DOS in your country. For example, in order to mount USB flash drives, a ru_RU.KOI8-R user would need the following in the options portion of its mount line in <code>/etc/fstab</code>:</p>
<pre><code class="language-sh">noauto,user,quiet,showexec,codepage=866,iocharset=koi8r
</code></pre>
<p>The corresponding options fragment for ru_RU.UTF-8 users is:</p>
<pre><code class="language-sh">noauto,user,quiet,showexec,codepage=866,utf8
</code></pre>
<p>Note that using <code>iocharset</code> is the default for <code>iso8859-1</code> (which keeps the file system case insensitive), and the <code>utf8</code> option tells the kernel to convert the file names using UTF-8 so they can be interpreted in the UTF-8 locale.</p>
<p>It is also possible to specify default codepage and iocharset values for some filesystems during kernel configuration. The relevant parameters are named “Default NLS Option” (<code>CONFIG_NLS_DEFAULT</code>), “Default Remote NLS Option” (<code>CONFIG_SMB_NLS_DEFAULT</code>), “Default codepage for FAT” (<code>CONFIG_FAT_DEFAULT_CODEPAGE</code>), and “Default iocharset for FAT” (<code>CONFIG_FAT_DEFAULT_IOCHARSET</code>). There is no way to specify these settings for the ntfs filesystem at kernel compilation time.</p>
<p>It is possible to make the ext3 filesystem reliable across power failures for some hard disk types. To do this, add the <code>barrier=1</code> mount option to the appropriate entry in <code>/etc/fstab</code>. To check if the disk drive supports this option, run <a href="http://www.linuxfromscratch.org/blfs/view/8.4/general/hdparm.html">hdparm</a> on the applicable disk drive. For example, if:</p>
<pre><code class="language-sh">hdparm -I /dev/sda | grep NCQ
</code></pre>
<p>returns non-empty output, the option is supported.</p>
<p>Note: Logical Volume Management (LVM) based partitions cannot use the <code>barrier</code> option</p>
<blockquote>
<h1><a class="header" href="#linux-42012" id="linux-42012">Linux-4.20.12</a></h1>
<p>The Linux package contains the Linux kernel.</p>
<p><strong>Approximate Build Time:</strong> 4.4 - 66.0 SBU (typically about 6 SBU)</p>
<p><strong>Required Disk Space:</strong> 960 - 4250 MB (typically about 1100 MB)</p>
</blockquote>
<h1><a class="header" href="#installation-of-the-kernel" id="installation-of-the-kernel">Installation of the kernel</a></h1>
<p>Building the kernel involves a few steps—configuration, compilation, and installation. Read the <code>README</code> file in the kernel source tree for alternative methods to the way this book configures the kernel.</p>
<p>Prepare for compilation by running the following command:</p>
<pre><code class="language-sh">make mrproper
</code></pre>
<p>This ensures that the kernel tree is absolutely clean. The kernel team recommends that this command be issued prior to each kernel compilation. Do not rely on the source tree being clean after un-tarring.</p>
<p>Configure the kernel via a menu-driven interface. For general information on kernel configuration see <a href="http://www.linuxfromscratch.org/hints/downloads/files/kernel-configuration.txt">kernel configuration</a>. BLFS has some information regarding particular kernel configuration requirements of packages outside of LFS <a href="http://www.linuxfromscratch.org/blfs/view/8.4/longindex.html#kernel-config-index">here</a>. Additional information about configuring and building the kernel can be found <a href="http://www.kroah.com/lkn/">here</a>.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>A good starting place for setting up the kernel configuration is to run make defconfig. This will set the base configuration to a good state that takes your current system architecture into account.</p>
<p>Be sure to enable/disable/set the following features or the system might not work correctly or boot at all:</p>
<blockquote>
<pre><code class="language-sh">General setup --&gt;
   [ ] Enable deprecated sysfs features to support old userspace tools [CONFIG_SYSFS_DEPRECATED]
  [ ] Enable deprecated sysfs features by default [CONFIG_SYSFS_DEPRECATED_V2]
   [*] open by fhandle syscalls [CONFIG_FHANDLE]
   [ ] Auditing support [CONFIG_AUDIT]
   [*] Control Group support [CONFIG_CGROUPS]
Processor type and features  ---&gt;
   [*] Enable seccomp to safely compute untrusted bytecode [CONFIG_SECCOMP]
Networking support  ---&gt;
  Networking options  ---&gt;
   &lt;*&gt; The IPv6 protocol [CONFIG_IPV6]
Device Drivers  ---&gt;
  Generic Driver Options  ---&gt;
   [ ] Support for uevent helper [CONFIG_UEVENT_HELPER]
   [*] Maintain a devtmpfs filesystem to mount at /dev [CONFIG_DEVTMPFS]
   [ ] Fallback user-helper invocation for firmware loading [CONFIG_FW_LOADER_USER_HELPER]
Firmware Drivers  ---&gt;
   [*] Export DMI identification via sysfs to userspace [CONFIG_DMIID]
File systems  ---&gt;
   [*] Inotify support for userspace [CONFIG_INOTIFY_USER]
   &lt;*&gt; Kernel automounter version 4 support (also supports v3) [CONFIG_AUTOFS4_FS]
  Pseudo filesystems  ---&gt;
   [*] Tmpfs POSIX Access Control Lists [CONFIG_TMPFS_POSIX_ACL]
   [*] Tmpfs extended attributes [CONFIG_TMPFS_XATTR]
Kernel hacking  ---&gt;
       Choose kernel unwinder (Frame pointer unwinder)  ---&gt; [CONFIG_UNWINDER_FRAME_POINTER]
</code></pre>
</blockquote>
</blockquote>
<blockquote>
<p><strong>Note</strong></p>
<p>While &quot;The IPv6 Protocol&quot; is not strictly required, it is highly recommended by the systemd developers.</p>
</blockquote>
<blockquote>
<p><strong>Note</strong></p>
<p>If your host hardware is using UEFI, then the 'make defconfig' above should automatically add in some EFI-related kernel options.</p>
<p>In order to allow your LFS kernel to be booted from within your host's UEFI boot environment, your kernel must have this option selected:</p>
<blockquote>
<pre><code class="language-sh">Processor type and features  ---&gt;
   [*]   EFI stub support  [CONFIG_EFI_STUB]
</code></pre>
</blockquote>
<p>A fuller description of managing UEFI environments from within LFS is covered by the lfs-uefi.txt hint at http://www.linuxfromscratch.org/hints/downloads/files/lfs-uefi.txt.</p>
</blockquote>
<h3><a class="header" href="#the-rationale-for-the-above-configuration-items" id="the-rationale-for-the-above-configuration-items">The rationale for the above configuration items:</a></h3>
<blockquote>
<p><strong><em>Support for uevent helper</em></strong></p>
<blockquote>
<p>Having this option set may interfere with device management when using Udev/Eudev.</p>
</blockquote>
<p><strong><em>Maintain a devtmpfs</em></strong></p>
<blockquote>
<p>This will create automated device nodes which are populated by the kernel, even without Udev running. Udev then runs on top of this, managing permissions and adding symlinks. This configuration item is required for all users of Udev/Eudev.</p>
</blockquote>
</blockquote>
<pre><code class="language-sh">make menuconfig
</code></pre>
<h3><a class="header" href="#the-meaning-of-optional-make-environment-variables" id="the-meaning-of-optional-make-environment-variables">The meaning of optional make environment variables:</a></h3>
<blockquote>
<p><strong><em>LANG=&lt;host_LANG_value&gt; LC_ALL=</em></strong></p>
<blockquote>
<p>This establishes the locale setting to the one used on the host. This may be needed for a proper menuconfig ncurses interface line drawing on a UTF-8 linux text console.</p>
</blockquote>
<blockquote>
<p>If used, be sure to replace <em>&lt;host_LANG_value&gt;</em> by the value of the <strong>$LANG</strong> variable from your host. You can alternatively use instead the host's value of <strong>$LC_ALL</strong> or <strong>$LC_CTYPE</strong>.</p>
</blockquote>
</blockquote>
<p>Alternatively, <strong>make oldconfig</strong> may be more appropriate in some situations. See the <code>README</code> file for more information.</p>
<p>If desired, skip kernel configuration by copying the kernel config file, <code>.config</code>, from the host system (assuming it is available) to the unpacked <code>linux-4.20.12</code> directory. However, we do not recommend this option. It is often better to explore all the configuration menus and create the kernel configuration from scratch.</p>
<p>Compile the kernel image and modules:</p>
<pre><code class="language-sh">make
</code></pre>
<p>If using kernel modules, module configuration in <code>/etc/modprobe.d</code> may be required. Information pertaining to modules and kernel configuration is located in <a href="08-Making-the-LFS-System-Bootable/../07-System-Configuration/03-Overview-of-Device-and-Module-Handling">Section 7.3, “Overview of Device and Module Handling”</a> and in the kernel documentation in the <code>linux-4.20.12/Documentation</code> directory. Also, <code>modprobe.d(5)</code> may be of interest.</p>
<p>Install the modules, if the kernel configuration uses them:</p>
<pre><code class="language-sh">make modules_install
</code></pre>
<p>After kernel compilation is complete, additional steps are required to complete the installation. Some files need to be copied to the <code>/boot</code> directory.</p>
<blockquote>
<p><strong>Caution</strong></p>
<blockquote>
<p>If the host system has a separate <code>/boot</code> partition, the files copied below should go there. The easiest way to do that is to bind <code>/boot</code> on the host (outside chroot) to <code>/mnt/lfs/boot</code> before proceeding. As the root user in the <strong>host system</strong>:</p>
</blockquote>
<blockquote>
<pre><code class="language-sh">mount --bind /boot /mnt/lfs/boot
</code></pre>
</blockquote>
</blockquote>
<p>The path to the kernel image may vary depending on the platform being used. The filename below can be changed to suit your taste, but the stem of the filename should be <em>vmlinuz</em> to be compatible with the automatic setup of the boot process described in the next section. The following command assumes an x86 architecture:</p>
<pre><code class="language-sh">cp -iv arch/x86/boot/bzImage /boot/vmlinuz-4.20.12-lfs-8.4-systemd
</code></pre>
<p><code>System.map</code> is a symbol file for the kernel. It maps the function entry points of every function in the kernel API, as well as the addresses of the kernel data structures for the running kernel. It is used as a resource when investigating kernel problems. Issue the following command to install the map file:</p>
<pre><code class="language-sh">cp -iv System.map /boot/System.map-4.20.12
</code></pre>
<p>The kernel configuration file <code>.config</code>produced by the <strong>make menuconfig</strong> step above contains all the configuration selections for the kernel that was just compiled. It is a good idea to keep this file for future reference:</p>
<pre><code class="language-sh">cp -iv .config /boot/config-4.20.12
</code></pre>
<p>Install the documentation for the Linux kernel:</p>
<pre><code class="language-sh">install -d /usr/share/doc/linux-4.20.12
cp -r Documentation/* /usr/share/doc/linux-4.20.12
</code></pre>
<p>It is important to note that the files in the kernel source directory are not owned by <em>root</em>. Whenever a package is unpacked as user <em>root</em> (like we did inside chroot), the files have the user and group IDs of whatever they were on the packager's computer. This is usually not a problem for any other package to be installed because the source tree is removed after the installation. However, the Linux source tree is often retained for a long time. Because of this, there is a chance that whatever user ID the packager used will be assigned to somebody on the machine. That person would then have write access to the kernel source.</p>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>In many cases, the configuration of the kernel will need to be updated for packages that will be installed later in BLFS. Unlike other packages, it is not necessary to remove the kernel source tree after the newly built kernel is installed.</p>
</blockquote>
<blockquote>
<p>If the kernel source tree is going to be retained, run <strong>chown -R 0:0</strong> on the <code>linux-4.20.12</code> directory to ensure all files are owned by user <em>root</em>.</p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>Warning</strong></p>
<blockquote>
<p>Some kernel documentation recommends creating a symlink from <code>/usr/src/linux</code> pointing to the kernel source directory. This is specific to kernels prior to the 2.6 series and <strong><em>must not</em></strong> be created on an LFS system as it can cause problems for packages you may wish to build once your base LFS system is complete.</p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>Warning</strong></p>
<blockquote>
<p>The headers in the system's <code>include</code> directory (<code>/usr/include</code>) should <strong><em>always</em></strong> be the ones against which Glibc was compiled, that is, the sanitised headers installed in <a href="08-Making-the-LFS-System-Bootable/../06-Installing-Basic-System-Software/07-Linux-4.20.12-API-Headers.html">Section 6.7, “Linux-4.20.12 API Headers”</a>. Therefore, they should <strong><em>never</em></strong> be replaced by either the raw kernel headers or any other kernel sanitized headers.</p>
</blockquote>
</blockquote>
<h1><a class="header" href="#configuring-linux-module-load-order" id="configuring-linux-module-load-order">Configuring Linux Module Load Order</a></h1>
<p>Most of the time Linux modules are loaded automatically, but sometimes it needs some specific direction. The program that loads modules, <strong>modprobe</strong> or <strong>insmod</strong>, uses <code>/etc/modprobe.d/usb.conf</code> for this purpose. This file needs to be created so that if the USB drivers (ehci_hcd, ohci_hcd and uhci_hcd) have been built as modules, they will be loaded in the correct order; ehci_hcd needs to be loaded prior to ohci_hcd and uhci_hcd in order to avoid a warning being output at boot time.</p>
<p>Create a new file <code>/etc/modprobe.d/usb.conf</code> by running the following:</p>
<pre><code class="language-sh">install -v -m755 -d /etc/modprobe.d
cat &gt; /etc/modprobe.d/usb.conf &lt;&lt; &quot;EOF&quot;
# Begin /etc/modprobe.d/usb.conf

install ohci_hcd /sbin/modprobe ehci_hcd ; /sbin/modprobe -i ohci_hcd ; true
install uhci_hcd /sbin/modprobe ehci_hcd ; /sbin/modprobe -i uhci_hcd ; true

# End /etc/modprobe.d/usb.conf
EOF
</code></pre>
<blockquote>
<h2><a class="header" href="#contents-of-linux" id="contents-of-linux">Contents of Linux</a></h2>
<p><strong>Installed Programs:</strong> config-4.20.12, vmlinuz-4.20.12-lfs-8.4-systemd, and System.map-4.20.12and tclsh8.6</p>
<p><strong>Installed Directories:</strong> /lib/modules, /usr/share/doc/linux-4.20.12</p>
<table><thead><tr><th align="left">Installed</th><th>Descriptions</th></tr></thead><tbody>
<tr><td align="left">config-4.20.12</td><td>Contains all the configuration selections for the kernel</td></tr>
<tr><td align="left">vmlinuz-4.20.12-lfs-8.4-systemd</td><td>The engine of the Linux system. When turning on the computer, the kernel is the first part of the operating system that gets loaded. It detects and initializes all components of the computer's hardware, then makes these components available as a tree of files to the software and turns a single CPU into a multitasking machine capable of running scores of programs seemingly at the same time</td></tr>
<tr><td align="left">System.map-4.20.12</td><td>A list of addresses and symbols; it maps the entry points and addresses of all the functions and data structures in the kernel</td></tr>
</tbody></table>
</blockquote>
<h1><a class="header" href="#using-grub-to-set-up-the-boot-process" id="using-grub-to-set-up-the-boot-process">Using GRUB to Set Up the Boot Process</a></h1>
<h1><a class="header" href="#introduction-8" id="introduction-8">Introduction</a></h1>
<blockquote>
<p><strong>Warning</strong></p>
<blockquote>
<p>Configuring GRUB incorrectly can render your system inoperable without an alternate boot device such as a CD-ROM. This section is not required to boot your LFS system. You may just want to modify your current boot loader, e.g. Grub-Legacy, GRUB2, or LILO.</p>
</blockquote>
</blockquote>
<p>Ensure that an emergency boot disk is ready to “rescue” the computer if the computer becomes unusable (un-bootable). If you do not already have a boot device, you can create one. In order for the procedure below to work, you need to jump ahead to BLFS and install <strong>xorriso</strong> from the <a href="http://www.linuxfromscratch.org/blfs/view/8.4/multimedia/libisoburn.html">libisoburn</a> package.</p>
<pre><code class="language-sh">cd /tmp
grub-mkrescue --output=grub-img.iso
xorriso -as cdrecord -v dev=/dev/cdrw blank=as_needed grub-img.iso
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>To boot LFS on host systems that have UEFI enabled, the kernel needs to have been built with the CONFIG_EFI_STUB capabality described in the previous section. However, LFS can be booted using GRUB2 without such an addition. To do this, the UEFI Mode and Secure Boot capabilities in the host system's BIOS need to be turned off. For details, see the <a href="http://www.linuxfromscratch.org/hints/downloads/files/lfs-uefi.txt">lfs-uefi.txt hint</a>.</p>
</blockquote>
</blockquote>
<h1><a class="header" href="#grub-naming-conventions" id="grub-naming-conventions">GRUB Naming Conventions</a></h1>
<p>GRUB uses its own naming structure for drives and partitions in the form of (<em>hdn,m</em>), where <em>n</em> is the hard drive number and m is the partition number. The hard drive number starts from zero, but the partition number starts from one for normal partitions and five for extended partitions. Note that this is different from earlier versions where both numbers started from zero. For example, partition <code>sda1</code> is (<em>hd0,1</em>) to GRUB and <code>sdb3</code> is (<em>hd1,3</em>). In contrast to Linux, GRUB does not consider CD-ROM drives to be hard drives. For example, if using a CD on <code>hdb</code> and a second hard drive on <code>hdc</code>, that second hard drive would still be (<em>hd1</em>).</p>
<h1><a class="header" href="#setting-up-the-configuration" id="setting-up-the-configuration">Setting Up the Configuration</a></h1>
<p>GRUB works by writing data to the first physical track of the hard disk. This area is not part of any file system. The programs there access GRUB modules in the boot partition. The default location is <code>/boot/grub/</code>.</p>
<p>The location of the boot partition is a choice of the user that affects the configuration. One recommendation is to have a separate small (suggested size is 100 MB) partition just for boot information. That way each build, whether LFS or some commercial distro, can access the same boot files and access can be made from any booted system. If you choose to do this, you will need to mount the separate partition, move all files in the current <code>/boot</code> directory (e.g. the linux kernel you just built in the previous section) to the new partition. You will then need to unmount the partition and remount it as <code>/boot</code>. If you do this, be sure to update <code>/etc/fstab</code>.</p>
<p>Using the current lfs partition will also work, but configuration for multiple systems is more difficult.</p>
<p>Using the above information, determine the appropriate designator for the root partition (or boot partition, if a separate one is used). For the following example, it is assumed that the root (or separate boot) partition is <code>sda2</code>.</p>
<p>Install the GRUB files into <code>/boot/grub</code> and set up the boot track:</p>
<blockquote>
<p><strong>Warning</strong></p>
<blockquote>
<p>The following command will overwrite the current boot loader. Do not run the command if this is not desired, for example, if using a third party boot manager to manage the Master Boot Record (MBR).</p>
</blockquote>
</blockquote>
<pre><code class="language-sh">grub-install /dev/sda
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>If the system has been booted using UEFI, <strong>grub-install</strong> will try to install files for the <em>x86_64-efi</em> target, but those files have not been installed in chapter 6. If this is the case, add <code>--target i386-pc</code> to the command above.</p>
</blockquote>
</blockquote>
<h1><a class="header" href="#creating-the-grub-configuration-file" id="creating-the-grub-configuration-file">Creating the GRUB Configuration File</a></h1>
<p>Generate <code>/boot/grub/grub.cfg</code>:</p>
<pre><code class="language-sh">cat &gt; /boot/grub/grub.cfg &lt;&lt; &quot;EOF&quot;
# Begin /boot/grub/grub.cfg
set default=0
set timeout=5

insmod ext2
set root=(hd0,2)

menuentry &quot;GNU/Linux, Linux 4.20.12-lfs-8.4-systemd&quot; {
        linux   /boot/vmlinuz-4.20.12-lfs-8.4-systemd root=/dev/sda2 ro
}
EOF
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>From GRUB's perspective, the kernel files are relative to the partition used. If you used a separate <code>/boot</code> partition, remove <code>/boot</code> from the above <em>linux</em> line. You will also need to change the set <em>root</em> line to point to the boot partition.</p>
</blockquote>
</blockquote>
<p>GRUB is an extremely powerful program and it provides a tremendous number of options for booting from a wide variety of devices, operating systems, and partition types. There are also many options for customization such as graphical splash screens, playing sounds, mouse input, etc. The details of these options are beyond the scope of this introduction.</p>
<blockquote>
<p><strong>Caution</strong></p>
<blockquote>
<p>There is a command, <strong>grub-mkconfig</strong>, that can write a configuration file automatically. It uses a set of scripts in <code>/etc/grub.d/</code> and will destroy any customizations that you make. These scripts are designed primarily for non-source distributions and are not recommended for LFS. If you install a commercial Linux distribution, there is a good chance that this program will be run. Be sure to back up your <code>grub.cfg</code> file.</p>
</blockquote>
</blockquote>
<h1><a class="header" href="#the-end" id="the-end">The End</a></h1>
<h3><a class="header" href="#" id=""></a></h3>
<p>Table of Contents</p>
<ul>
<li><a href="09-The-End/./01-The-End.html">The End</a></li>
<li><a href="09-The-End/./02-Get-Counted.html">Get Counted</a></li>
<li><a href="09-The-End/./03-Rebooting-the-System.html">Rebooting the System</a></li>
<li><a href="09-The-End/./04-What-Now.html">What Now?</a></li>
</ul>
<h1><a class="header" href="#the-end-1" id="the-end-1">The End</a></h1>
<p>Well done! The new LFS system is installed! We wish you much success with your shiny new custom-built Linux system.</p>
<p>Create an <code>/etc/os-release</code> file required by systemd:</p>
<pre><code class="language-sh">cat &gt; /etc/os-release &lt;&lt; &quot;EOF&quot;
NAME=&quot;Linux From Scratch&quot;
VERSION=&quot;8.4-systemd&quot;
ID=lfs
PRETTY_NAME=&quot;Linux From Scratch 8.4-systemd&quot;
VERSION_CODENAME=&quot;&lt;your name here&gt;&quot;
EOF
</code></pre>
<p>Creating the file <code>/etc/lfs-release</code> is recommended for compatibility with the non-systemd branch. By having this file, it is very easy for you (and for us if you need to ask for help at some point) to find out which LFS version is installed on the system. Create this file by running:</p>
<pre><code class="language-sh">echo 8.4-systemd &gt; /etc/lfs-release
</code></pre>
<p>It is also a good idea to create a file to show the status of your new system with respect to the Linux Standards Base (LSB). To create this file, run:</p>
<pre><code class="language-sh">cat &gt; /etc/lsb-release &lt;&lt; &quot;EOF&quot;
DISTRIB_ID=&quot;Linux From Scratch&quot;
DISTRIB_RELEASE=&quot;8.4-systemd&quot;
DISTRIB_CODENAME=&quot;&lt;your name here&gt;&quot;
DISTRIB_DESCRIPTION=&quot;Linux From Scratch&quot;
EOF
</code></pre>
<p>Be sure to put some sort of customization for the field 'DISTRIB_CODENAME' to make the system uniquely yours.</p>
<h1><a class="header" href="#get-counted" id="get-counted">Get Counted</a></h1>
<p>Now that you have finished the book, do you want to be counted as an LFS user? Head over to <a href="http://www.linuxfromscratch.org/cgi-bin/lfscounter.php">here</a> and register as an LFS user by entering your name and the first LFS version you have used.</p>
<p>Let's reboot into LFS now.</p>
<h1><a class="header" href="#rebooting-the-system" id="rebooting-the-system">Rebooting the System</a></h1>
<p>Now that all of the software has been installed, it is time to reboot your computer. However, you should be aware of a few things. The system you have created in this book is quite minimal, and most likely will not have the functionality you would need to be able to continue forward. By installing a few extra packages from the BLFS book while still in our current chroot environment, you can leave yourself in a much better position to continue on once you reboot into your new LFS installation. Here are some suggestions:</p>
<ul>
<li>
<p>A text mode browser such as <a href="http://www.linuxfromscratch.org/blfs/view/8.4/basicnet/lynx.html">Lynx</a> will allow you to easily view the BLFS book in one virtual terminal, while building packages in another.</p>
</li>
<li>
<p>The <a href="http://www.linuxfromscratch.org/blfs/view/8.4/general/gpm.html">GPM</a> package will allow you to perform copy/paste actions in your virtual terminals.</p>
</li>
<li>
<p>If you are in a situation where static IP configuration does not meet your networking requirements, installing a package such as <a href="http://www.linuxfromscratch.org/blfs/view/8.4/basicnet/dhcpcd.html">dhcpcd</a> or the client portion of <a href="http://www.linuxfromscratch.org/blfs/view/8.4/basicnet/dhcp.html">dhcp</a> may be useful.</p>
</li>
<li>
<p>Installing <a href="http://www.linuxfromscratch.org/blfs/view/8.4/postlfs/sudo.html">sudo</a> may be useful for building packages as a non-root user and easily installing the resulting packages in your new system.</p>
</li>
<li>
<p>If you want to access your new system from a remote system within a comfortable GUI environment, install <a href="http://www.linuxfromscratch.org/blfs/view/8.4/postlfs/openssh.html">openssh</a>.</p>
</li>
<li>
<p>To make fetching files over the internet easier, install <a href="http://www.linuxfromscratch.org/blfs/view/8.4/basicnet/wget.html">wget</a>.</p>
</li>
<li>
<p>If one or more of your disk drives have a GUID partition table (GPT), either <a href="http://www.linuxfromscratch.org/blfs/view/8.4/postlfs/gptfdisk.html">gptfdisk</a> or <a href="http://www.linuxfromscratch.org/blfs/view/8.4/postlfs/parted.html">parted</a> will be useful.</p>
</li>
<li>
<p>Finally, a review of the following configuration files is also appropriate at this point.</p>
<ul>
<li>/etc/bashrc</li>
<li>/etc/dircolors</li>
<li>/etc/fstab</li>
<li>/etc/hosts</li>
<li>/etc/inputrc</li>
<li>/etc/profile</li>
<li>/etc/resolv.conf</li>
<li>/etc/vimrc</li>
<li>/root/.bash_profile</li>
<li>/root/.bashrc</li>
</ul>
</li>
</ul>
<p>Now that we have said that, let's move on to booting our shiny new LFS installation for the first time! First exit from the chroot environment:</p>
<pre><code class="language-sh">logout
</code></pre>
<p>Then unmount the virtual file systems:</p>
<pre><code class="language-sh">umount -v $LFS/dev/pts
umount -v $LFS/dev
umount -v $LFS/run
umount -v $LFS/proc
umount -v $LFS/sys
</code></pre>
<p>Unmount the LFS file system itself:</p>
<pre><code class="language-sh">umount -v $LFS
</code></pre>
<p>If multiple partitions were created, unmount the other partitions before unmounting the main one, like this:</p>
<pre><code class="language-sh">umount -v $LFS/usr
umount -v $LFS/home
umount -v $LFS
</code></pre>
<p>Now, reboot the system with:</p>
<pre><code class="language-sh">shutdown -r now
</code></pre>
<p>Assuming the GRUB boot loader was set up as outlined earlier, the menu is set to boot <em>LFS 8.4</em> automatically.</p>
<p>When the reboot is complete, the LFS system is ready for use and more software may be added to suit your needs.</p>
<h1><a class="header" href="#what-now" id="what-now">What Now?</a></h1>
<p>
        Thank you for reading this LFS book. We hope that you have found this
        book helpful and have learned more about the system creation process.
      </p>
      <p>
        Now that the LFS system is installed, you may be wondering
        <span class="quote">&ldquo;<span class="quote">What
        next?</span>&rdquo;</span> To answer that question, we have compiled
        a list of resources for you.
      </p>
      <div class="itemizedlist">
        <ul>
          <li class="listitem">
            <p>
              Maintenance
            </p>
            <p>
              Bugs and security notices are reported regularly for all
              software. Since an LFS system is compiled from source, it is up
              to you to keep abreast of such reports. There are several
              online resources that track such reports, some of which are
              shown below:
            </p>
            <div class="itemizedlist">
              <ul>
                <li class="listitem">
                  <p>
                    <a class="ulink" href="http://www.cert.org/">CERT</a>
                    (Computer Emergency Response Team)
                  </p>
                  <p>
                    CERT has a mailing list that publishes security alerts
                    concerning various operating systems and applications.
                    Subscription information is available at <a class="ulink"
                    href=
                    "http://www.us-cert.gov/cas/signup.html">http://www.us-cert.gov/cas/signup.html</a>.
                  </p>
                </li>
                <li class="listitem">
                  <p>
                    Bugtraq
                  </p>
                  <p>
                    Bugtraq is a full-disclosure computer security mailing
                    list. It publishes newly discovered security issues, and
                    occasionally potential fixes for them. Subscription
                    information is available at <a class="ulink" href=
                    "http://www.securityfocus.com/archive">http://www.securityfocus.com/archive</a>.
                  </p>
                </li>
              </ul>
            </div>
          </li>
          <li class="listitem">
            <p>
              Beyond Linux From Scratch
            </p>
            <p>
              The Beyond Linux From Scratch book covers installation
              procedures for a wide range of software beyond the scope of the
              LFS Book. The BLFS project is located at <a class="ulink" href=
              "http://www.linuxfromscratch.org/blfs/">http://www.linuxfromscratch.org/blfs/</a>.
            </p>
          </li>
          <li class="listitem">
            <p>
              LFS Hints
            </p>
            <p>
              The LFS Hints are a collection of educational documents
              submitted by volunteers in the LFS community. The hints are
              available at <a class="ulink" href=
              "http://www.linuxfromscratch.org/hints/list.html">http://www.linuxfromscratch.org/hints/list.html</a>.
            </p>
          </li>
          <li class="listitem">
            <p>
              Mailing lists
            </p>
            <p>
              There are several LFS mailing lists you may subscribe to if you
              are in need of help, want to stay current with the latest
              developments, want to contribute to the project, and more. See
              <a class="xref" href=
              "../chapter01/resources.html#ch-intro-maillists" title=
              "1.4.2.&nbsp;Mailing Lists">Chapter&nbsp;1 - Mailing Lists</a>
              for more information.
            </p>
          </li>
          <li class="listitem">
            <p>
              The Linux Documentation Project
            </p>
            <p>
              The goal of The Linux Documentation Project (TLDP) is to
              collaborate on all of the issues of Linux documentation. The
              TLDP features a large collection of HOWTOs, guides, and man
              pages. It is located at <a class="ulink" href=
              "http://www.tldp.org/">http://www.tldp.org/</a>.
            </p>
          </li>
        </ul>
<h1><a class="header" href="#appendices" id="appendices">Appendices</a></h1>
<h1><a class="header" href="#acronyms-and-terms" id="acronyms-and-terms">Acronyms and Terms</a></h1>
<table border="0" class="variablelist">
    <colgroup>
    <col align="left" valign="top" />
    <col />
    </colgroup>
    <tbody>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>ABI</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Application Binary Interface
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>ALFS</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Automated Linux From Scratch
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>API</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Application Programming Interface
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>ASCII</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            American Standard Code for Information Interchange
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>BIOS</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Basic Input/Output System
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>BLFS</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Beyond Linux From Scratch
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>BSD</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Berkeley Software Distribution
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>chroot</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            change root
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>CMOS</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Complementary Metal Oxide Semiconductor
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>COS</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Class Of Service
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>CPU</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Central Processing Unit
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>CRC</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Cyclic Redundancy Check
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>CVS</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Concurrent Versions System
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>DHCP</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Dynamic Host Configuration Protocol
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>DNS</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Domain Name Service
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>EGA</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Enhanced Graphics Adapter
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>ELF</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Executable and Linkable Format
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>EOF</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            End of File
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>EQN</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            equation
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>ext2</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            second extended file system
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>ext3</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            third extended file system
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>ext4</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            fourth extended file system
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>FAQ</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Frequently Asked Questions
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>FHS</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Filesystem Hierarchy Standard
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>FIFO</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            First-In, First Out
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>FQDN</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Fully Qualified Domain Name
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>FTP</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            File Transfer Protocol
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>GB</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Gigabytes
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>GCC</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            GNU Compiler Collection
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>GID</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Group Identifier
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>GMT</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Greenwich Mean Time
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>HTML</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Hypertext Markup Language
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>IDE</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Integrated Drive Electronics
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>IEEE</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Institute of Electrical and Electronic Engineers
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>IO</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Input/Output
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>IP</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Internet Protocol
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>IPC</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Inter-Process Communication
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>IRC</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Internet Relay Chat
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>ISO</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            International Organization for Standardization
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>ISP</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Internet Service Provider
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>KB</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Kilobytes
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>LED</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Light Emitting Diode
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>LFS</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Linux From Scratch
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>LSB</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Linux Standard Base
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>MB</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Megabytes
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>MBR</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Master Boot Record
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>MD5</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Message Digest 5
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>NIC</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Network Interface Card
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>NLS</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Native Language Support
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>NNTP</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Network News Transport Protocol
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>NPTL</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Native POSIX Threading Library
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>OSS</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Open Sound System
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>PCH</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Pre-Compiled Headers
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>PCRE</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Perl Compatible Regular Expression
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>PID</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Process Identifier
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>PTY</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            pseudo terminal
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>QOS</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Quality Of Service
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>RAM</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Random Access Memory
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>RPC</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Remote Procedure Call
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>RTC</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Real Time Clock
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>SBU</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Standard Build Unit
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>SCO</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            The Santa Cruz Operation
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>SHA1</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Secure-Hash Algorithm 1
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>TLDP</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            The Linux Documentation Project
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>TFTP</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Trivial File Transfer Protocol
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>TLS</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Thread-Local Storage
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>UID</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            User Identifier
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>umask</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            user file-creation mask
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>USB</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Universal Serial Bus
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>UTC</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Coordinated Universal Time
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>UUID</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Universally Unique Identifier
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>VC</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Virtual Console
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>VGA</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Video Graphics Array
        </p>
        </td>
    </tr>
    <tr>
        <td>
        <p>
            <span class="term"><span class=
            "bold"><strong>VT</strong></span></span>
        </p>
        </td>
        <td>
        <p>
            Virtual Terminal
        </p>
        </td>
    </tr>
    </tbody>
</table>
<h1><a class="header" href="#acknowledgments" id="acknowledgments">Acknowledgments</a></h1>
<p>We would like to thank the following people and organizations for their contributions to the Linux From Scratch Project.</p>
<ul>
<li>
<p><a href="10-Appendices/gerard@linuxfromscratch.org">Gerard Beekmans</a> &lt;gerard AT linuxfromscratch D0T org&gt; – LFS Creator</p>
</li>
<li>
<p><a href="10-Appendices/bdubbs@linuxfromscratch.org">Bruce Dubbs</a> &lt;bdubbs AT linuxfromscratch D0T org&gt; – LFS Managing Editor</p>
</li>
<li>
<p><a href="10-Appendices/jim@linuxfromscratch.org">Jim Gifford</a> &lt;jim AT linuxfromscratch D0T org&gt; – CLFS Project Co-Leader</p>
</li>
<li>
<p><a href="10-Appendices/pierre@linuxfromscratch.org">Pierre Labastie</a> &lt;pierre AT linuxfromscratch D0T org&gt; – BLFS Editor and ALFS Lead</p>
</li>
<li>
<p><a href="10-Appendices/dj@linuxfromscratch.org">DJ Lucas</a> &lt;dj AT linuxfromscratch D0T org&gt; – LFS and BLFS Editor</p>
</li>
<li>
<p><a href="10-Appendices/ken@linuxfromscratch.org">Ken Moffat</a> &lt;ken AT linuxfromscratch D0T org&gt; – BLFS Editor</p>
</li>
<li>
<p>Countless other people on the various LFS and BLFS mailing lists who helped make this book possible by giving their suggestions, testing the book, and submitting bug reports, instructions, and their experiences with installing various packages.</p>
</li>
</ul>
<h2><a class="header" href="#translators" id="translators">Translators</a></h2>
<ul>
<li>
<p><a href="10-Appendices/macana@macana-es.com">Manuel Canales Esparcia</a> &lt;macana AT macana-es D0T com&gt; – Spanish LFS translation project</p>
</li>
<li>
<p><a href="10-Appendices/johan@linuxfromscratch.org">Johan Lenglet</a> &lt;johan AT linuxfromscratch D0T org&gt; – French LFS translation project until 2008</p>
</li>
<li>
<p><a href="10-Appendices/jmengual@linuxfromscratch.org">Jean-Philippe Mengual</a> &lt;jmengual AT linuxfromscratch D0T org&gt; – French LFS translation project 2008-2016</p>
</li>
<li>
<p><a href="10-Appendices/jlepiller@linuxfromscratch.org">Julien Lepiller</a> &lt;jlepiller AT linuxfromscratch D0T org&gt; – French LFS translation project 2017-present</p>
</li>
<li>
<p><a href="10-Appendices/lizardo@linuxfromscratch.org">Anderson Lizardo</a> &lt;lizardo AT linuxfromscratch D0T org&gt; – Portuguese LFS translation project</p>
</li>
<li>
<p><a href="10-Appendices/tr@erdfunkstelle.de">Thomas Reitelbach</a> &lt;tr AT erdfunkstelle D0T de&gt; – German LFS translation project</p>
</li>
<li>
<p><a href="10-Appendices/info@linuxfromscratch.org.ru">Anton Maisak</a> &lt;info AT linuxfromscratch D0T org D0T ru&gt; – Russian LFS translation project</p>
</li>
<li>
<p><a href="10-Appendices/helen@linuxfromscratch.org.ru">Elena Shevcova</a> &lt;helen AT linuxfromscratch D0T org D0T ru&gt; – Russian LFS translation project</p>
</li>
</ul>
<h2><a class="header" href="#mirror-maintainers" id="mirror-maintainers">Mirror Maintainers</a></h2>
<h3><a class="header" href="#north-american-mirrors" id="north-american-mirrors">North American Mirrors</a></h3>
<ul>
<li>
<p><a href="10-Appendices/scott@osuosl.org">Scott Kveton</a> &lt;scott AT osuosl D0T org&gt; – lfs.oregonstate.edu mirror</p>
</li>
<li>
<p><a href="10-Appendices/lost@l-w.net">William Astle</a> &lt;lost AT l-w D0T net&gt; – ca.linuxfromscratch.org mirror</p>
</li>
<li>
<p><a href="10-Appendices/eujon.sellers@gmail.com">Eujon Sellers</a> &lt;jpolen@rackspace.com&gt; – lfs.introspeed.com mirror</p>
</li>
<li>
<p><a href="10-Appendices/justin@knierim.org">Justin Knierim</a> &lt;tim@idge.net&gt; – lfs-matrix.net mirror</p>
</li>
</ul>
<h3><a class="header" href="#south-american-mirrors" id="south-american-mirrors">South American Mirrors</a></h3>
<ul>
<li>
<p><a href="10-Appendices/manuel@linuxfromscratch.org">Manuel Canales Esparcia</a> &lt;manuel AT linuxfromscratch D0T org&gt; – lfsmirror.lfs-es.info mirror</p>
</li>
<li>
<p><a href="10-Appendices/lfalcon@thymbra.com">Luis Falcon</a> &lt;Luis Falcon&gt; – torredehanoi.org mirror</p>
</li>
</ul>
<h3><a class="header" href="#european-mirrors" id="european-mirrors">European Mirrors</a></h3>
<ul>
<li>
<p><a href="10-Appendices/guido@primerelay.net">Guido Passet</a> &lt;guido AT primerelay D0T net&gt; – nl.linuxfromscratch.org mirror</p>
</li>
<li>
<p><a href="10-Appendices/baafie@planet.nl">Bastiaan Jacques</a> &lt;baafie AT planet D0T nl&gt; – lfs.pagefault.net mirror</p>
</li>
<li>
<p><a href="10-Appendices/sven.cranshoff@lineo.be">Sven Cranshoff</a> &lt;sven D0T cranshoff AT lineo D0T be&gt; – lfs.lineo.be mirror</p>
</li>
<li>
<p>Scarlet Belgium – lfs.scarlet.be mirror</p>
</li>
<li>
<p><a href="10-Appendices/info@aliensoft.org">Sebastian Faulborn</a> &lt;info AT aliensoft D0T org&gt; – lfs.aliensoft.org mirror</p>
</li>
<li>
<p><a href="10-Appendices/stuart@dontuse.ms">Stuart Fox</a> &lt;stuart AT dontuse D0T ms&gt; – lfs.dontuse.ms mirror</p>
</li>
<li>
<p><a href="10-Appendices/admin@realhost.de">Ralf Uhlemann</a> &lt;admin AT realhost D0T de&gt; – lfs.oss-mirror.org mirror</p>
</li>
<li>
<p><a href="10-Appendices/Antonin.Sprinzl@tuwien.ac.at">Antonin Sprinzl</a> &lt;Antonin D0T Sprinzl AT tuwien D0T ac D0T at&gt; – at.linuxfromscratch.org mirror</p>
</li>
<li>
<p><a href="10-Appendices/fredan-lfs@fredan.org">Fredrik Danerklint</a> &lt;fredan-lfs AT fredan D0T org&gt; – se.linuxfromscratch.org mirror</p>
</li>
<li>
<p><a href="10-Appendices/franck@linuxpourtous.com">Franck</a> &lt;franck AT linuxpourtous D0T com&gt; – lfs.linuxpourtous.com mirror</p>
</li>
<li>
<p><a href="10-Appendices/baque@cict.fr">Philippe Baque</a> &lt;baque AT cict D0T fr&gt; – lfs.cict.fr mirror</p>
</li>
<li>
<p><a href="10-Appendices/gyouja@pilgrims.ru">Vitaly Chekasin</a> &lt;gyouja AT pilgrims D0T ru&gt; – lfs.pilgrims.ru mirror</p>
</li>
<li>
<p><a href="10-Appendices/kontakt@wankoo.org">Benjamin Heil</a> &lt;kontakt AT wankoo D0T org&gt; – lfs.wankoo.org mirror</p>
</li>
<li>
<p><a href="10-Appendices/info@linuxfromscratch.org.ru">Anton Maisak</a> &lt;info AT linuxfromscratch D0T org D0T ru&gt; – linuxfromscratch.org.ru mirror</p>
</li>
</ul>
<h3><a class="header" href="#asian-mirrors" id="asian-mirrors">Asian Mirrors</a></h3>
<ul>
<li>
<p><a href="10-Appendices/satit@wbac.ac.th">Satit Phermsawang</a> &lt;satit AT wbac D0T ac D0T th&gt; – lfs.phayoune.org mirror</p>
</li>
<li>
<p><a href="10-Appendices/info@shizu-net.jp">Shizunet Co.,Ltd.</a> &lt;info AT shizu-net D0T jp&gt; – lfs.mirror.shizu-net.jp mirror</p>
</li>
<li>
<p><a href="http://www.initworld.com/">Init World</a> &lt;http://www.initworld.com/&gt; – lfs.initworld.com mirror</p>
</li>
</ul>
<h3><a class="header" href="#australian-mirrors" id="australian-mirrors">Australian Mirrors</a></h3>
<ul>
<li><a href="10-Appendices/jason@dstc.edu.au">Jason Andrade</a> &lt;jason AT dstc D0T edu D0T au&gt; – au.linuxfromscratch.org mirror</li>
</ul>
<h2><a class="header" href="#former-project-team-members" id="former-project-team-members">Former Project Team Members</a></h2>
<ul>
<li>
<p><a href="10-Appendices/theladyskye@linuxfromscratch.org">Christine Barczak</a> &lt;theladyskye AT linuxfromscratch D0T org&gt; – LFS Book Editor</p>
</li>
<li>
<p>Archaic&lt;archaic@linuxfromscratch.org&gt; – LFS Technical Writer/Editor, HLFS Project Leader, BLFS Editor, Hints and Patches Project Maintainer</p>
</li>
<li>
<p>Matthew Burgess&lt;matthew AT linuxfromscratch D0T org&gt; – LFS Project Leader, LFS Technical Writer/Editor</p>
</li>
<li>
<p>Nathan Coulson&lt;nathan AT linuxfromscratch D0T org&gt; – LFS-Bootscripts Maintainer</p>
</li>
<li>
<p>Timothy Bauscher</p>
</li>
<li>
<p>Robert Briggs</p>
</li>
<li>
<p>Ian Chilton</p>
</li>
<li>
<p><a href="10-Appendices/jeroen@linuxfromscratch.org">Jeroen Coumans</a> &lt;jeroen AT linuxfromscratch D0T org&gt; – Website Developer, FAQ Maintainer</p>
</li>
<li>
<p><a href="10-Appendices/manuel@linuxfromscratch.org">Manuel Canales Esparcia</a> &lt;manuel AT linuxfromscratch D0T org&gt; – LFS/BLFS/HLFS XML and XSL Maintainer</p>
</li>
<li>
<p>Alex Groenewoud – LFS Technical Writer</p>
</li>
<li>
<p>Marc Heerdink</p>
</li>
<li>
<p><a href="10-Appendices/jhuntwork@linuxfromscratch.org">Jeremy Huntwork</a> &lt;jhuntwork AT linuxfromscratch D0T org&gt; – LFS Technical Writer, LFS LiveCD Maintainer</p>
</li>
<li>
<p><a href="10-Appendices/bryan@linuxfromscratch.org">Bryan Kadzban</a> &lt;bryan AT linuxfromscratch D0T org&gt; – LFS Technical Writer</p>
</li>
<li>
<p>Mark Hymers</p>
</li>
<li>
<p>Seth W. Klein – FAQ maintainer</p>
</li>
<li>
<p><a href="10-Appendices/nicholas@linuxfromscratch.org">Nicholas Leippe</a> &lt;nicholas AT linuxfromscratch D0T org&gt; – Wiki Maintainer</p>
</li>
<li>
<p><a href="10-Appendices/lizardo@linuxfromscratch.org">Anderson Lizardo</a> &lt;lizardo AT linuxfromscratch D0T org&gt; – Website Backend-Scripts Maintainer</p>
</li>
<li>
<p><a href="10-Appendices/randy@linuxfromscratch.org">Randy McMurchy</a> &lt;randy AT linuxfromscratch D0T org&gt; – BLFS Project Leader, LFS Editor</p>
</li>
<li>
<p><a href="10-Appendices/dnicholson@linuxfromscratch.org">Dan Nicholson</a> &lt;dnicholson AT linuxfromscratch D0T org&gt; – LFS and BLFS Editor</p>
</li>
<li>
<p><a href="10-Appendices/alexander@linuxfromscratch.org">Alexander E. Patrakov</a> &lt;alexander AT linuxfromscratch D0T org&gt; – LFS Technical Writer, LFS Internationalization Editor, LFS Live CD Maintainer</p>
</li>
<li>
<p>Simon Perreault</p>
</li>
<li>
<p><a href="10-Appendices/scot@linuxfromscratch.org">Scot Mc Pherson</a> &lt;scot AT linuxfromscratch D0T org&gt; – LFS NNTP Gateway Maintainer</p>
</li>
<li>
<p><a href="10-Appendices/renodr@linuxfromscratch.org">Douglas R. Reno</a> &lt;renodr AT linuxfromscratch D0T org&gt; – Systemd Editor</p>
</li>
<li>
<p><a href="10-Appendices/ryan@linuxfromscratch.org">Ryan Oliver</a> &lt;ryan AT linuxfromscratch D0T org&gt; – CLFS Project Co-Leader</p>
</li>
<li>
<p><a href="10-Appendices/gschafer@zip.com.au">Greg Schafer</a> &lt;gschafer AT zip D0T com D0T au&gt; – LFS Technical Writer and Architect of the Next Generation 64-bit-enabling Build Method</p>
</li>
<li>
<p>Jesse Tie-Ten-Quee – LFS Technical Writer</p>
</li>
<li>
<p><a href="10-Appendices/jwrober@linuxfromscratch.org">James Robertson</a> &lt;jwrober AT linuxfromscratch D0T org&gt; – Bugzilla Maintainer</p>
</li>
<li>
<p><a href="10-Appendices/tushar@linuxfromscratch.org">Tushar Teredesai</a> &lt;tushar AT linuxfromscratch D0T org&gt; – BLFS Book Editor, Hints and Patches Project Leader</p>
</li>
<li>
<p><a href="10-Appendices/jeremy@linuxfromscratch.org">Jeremy Utley</a> &lt;jeremy AT linuxfromscratch D0T org&gt; – LFS Technical Writer, Bugzilla Maintainer, LFS-Bootscripts Maintainer</p>
</li>
<li>
<p><a href="10-Appendices/zwinkles@gmail.com">Zack Winkles</a> &lt;zwinkles AT gmail D0T com&gt; – LFS Technical Writer</p>
</li>
</ul>
<h1><a class="header" href="#dependencies" id="dependencies">Dependencies</a></h1>
<p>Every package built in LFS relies on one or more other packages in order to build and install properly. Some packages even participate in circular dependencies, that is, the first package depends on the second which in turn depends on the first. Because of these dependencies, the order in which packages are built in LFS is very important. The purpose of this page is to document the dependencies of each package built in LFS.</p>
<p>For each package we build, we have listed three, and sometimes four, types of dependencies. The first lists what other packages need to be available in order to compile and install the package in question. The second lists what packages, in addition to those on the first list, need to be available in order to run the test suites. The third list of dependencies are packages that require this package to be built and installed in its final location before they are built and installed. In most cases, this is because these packages will hard code paths to binaries within their scripts. If not built in a certain order, this could result in paths of /tools/bin/[binary] being placed inside scripts installed to the final system. This is obviously not desirable.</p>
<p>The last list of dependencies are optional packages that are not addressed in LFS, but could be useful to the user. These packages may have additional mandatory or optional dependencies of their own. For these dependencies, the recommended practice is to install them after completion of the LFS book and then go back and rebuild the LFS package. In several cases, re-installation is addressed in BLFS.</p>
<h2>
    <a id="acl-dep" name="acl-dep"></a>Acl
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Attr, Bash, Binutils, Coreutils, GCC,
        Gettext, Grep, M4, Make, Perl, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Automake, Diffutils, Findutils, and
        Libtool</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Coreutils, Sed, Tar, and Vim</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="attr-dep" name="attr-dep"></a>Attr
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, GCC, Gettext,
        Grep, M4, Make, Perl, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Automake, Diffutils, Findutils, and
        Libtool</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Acl and Libcap</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="autoconf-dep" name="autoconf-dep"></a>Autoconf
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Coreutils, Grep, M4, Make, Perl, Sed,
        and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Automake, Diffutils, Findutils, GCC, and
        Libtool</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Automake</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">Emacs</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="automake-dep" name="automake-dep"></a>Automake
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Autoconf, Bash, Coreutils, Gettext, Grep,
        M4, Make, Perl, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Binutils, Bison, Bzip2, DejaGNU, Diffutils,
        Expect, Findutils, Flex, GCC, Gettext, Gzip, Libtool, and
        Tar</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="bash-dep" name="bash-dep"></a>Bash
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Bison, Coreutils,
        Diffutils, Gawk, GCC, Glibc, Grep, Make, Ncurses, Patch,
        Readline, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Shadow</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">Xorg</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="bc-dep" name="bc-dep"></a>Bc
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Bison, Coreutils, GCC,
        Glibc, Grep, Make, and Readline</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Gawk</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Linux Kernel</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="binutils-dep" name="binutils-dep"></a>Binutils
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Diffutils, File,
        Gawk, GCC, Glibc, Grep, Make, Perl, Sed, Texinfo and Zlib</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">DejaGNU and Expect</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="bison-dep" name="bison-dep"></a>Bison
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, GCC, Gettext,
        Glibc, Grep, M4, Make, Perl, and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Diffutils, Findutils, and Flex</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Kbd and Tar</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">Doxygen (test suite)</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="bzip2-dep" name="bzip2-dep"></a>Bzip2
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Diffutils, GCC,
        Glibc, Make, and Patch</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="check-dep" name="check-dep"></a>Check
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">GCC, Grep, Make, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="coreutils-dep" name="coreutils-dep"></a>Coreutils
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, GCC, Gettext,
        Glibc, GMP, Grep, Make, Patch, Perl, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Diffutils, E2fsprogs, Findutils, Shadow,
        and Util-linux</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Bash, Diffutils, Eudev, Findutils, and
        Man-DB</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">Perl Expect and IO:Tty modules (for test
        suite)</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="dejagnu-dep" name="dejagnu-dep"></a>DejaGNU
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Coreutils, Diffutils, GCC, Grep,
        Make, and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="diffutils-dep" name="diffutils-dep"></a>Diffutils
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Gawk, GCC,
        Gettext, Glibc, Grep, Make, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Perl</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="e2fsprogs-dep" name="e2fsprogs-dep"></a>E2fsprogs
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Diffutils, Gawk,
        GCC, Glibc, Grep, Gzip, Make, Sed, Texinfo, and Util-linux</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Procps-ng and Psmisc</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="eudev-dep" name="eudev-dep"></a>Eudev
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Gawk, GCC,
        Glibc, Grep, Gperf, Make, and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="expat-dep" name="expat-dep"></a>Expat
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Gawk, GCC,
        Glibc, Grep, Make, and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">XML::Parser</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="expect-dep" name="expect-dep"></a>Expect
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Diffutils, GCC,
        Glibc, Grep, Make, Patch, Sed, and Tcl</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="file-dep" name="file-dep"></a>File
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Diffutils, Gawk,
        GCC, Glibc, Grep, Make, Sed, and Zlib</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="findutils-dep" name="findutils-dep"></a>Findutils
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, GCC, Gettext,
        Glibc, Grep, Make, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">DejaGNU, Diffutils, and Expect</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="flex-dep" name="flex-dep"></a>Flex
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, GCC, Gettext,
        Glibc, Grep, M4, Make, Patch, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Bison and Gawk</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">IPRoute2, Kbd, and Man-DB</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="gawk-dep" name="gawk-dep"></a>Gawk
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, GCC, Gettext,
        Glibc, GMP, Grep, Make, MPFR, Patch, Readline, Sed, and
        Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Diffutils</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="gcc-dep" name="gcc-dep"></a>Gcc
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Diffutils,
        Findutils, Gawk, GCC, Gettext, Glibc, GMP, Grep, M4, Make, MPC,
        MPFR, Patch, Perl, Sed, Tar, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">DejaGNU, Expect, and Shadow</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody"><a class="ulink" href=
        "http://gcc.gnu.org/wiki/GNAT">GNAT</a> and <a class="ulink"
        href="https://repo.or.cz/isl.git">ISL</a></span>
        </div>
    </div>
    </div>
    <h2>
    <a id="gdbm" name="gdbm"></a>GDBM
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Diffutils, GCC,
        Grep, Make, and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="gettext-dep" name="gettext-dep"></a>Gettext
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Gawk, GCC,
        Glibc, Grep, Make, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Diffutils, Perl, and Tcl</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Automake</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="glibc-dep" name="glibc-dep"></a>Glibc
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Diffutils, Gawk,
        GCC, Gettext, Grep, Gzip, Linux API Headers, Make, Perl, Python,
        Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">File</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="gmp-dep" name="gmp-dep"></a>GMP
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Diffutils, Gawk,
        GCC, Glibc, Grep, M4, Make, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">MPFR and GCC</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="gperf-dep" name="gperf-dep"></a>Gperf
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, GCC, Glibc, and
        Make</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Diffutils and Expect</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="grep-dep" name="grep-dep"></a>Grep
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Diffutils, GCC,
        Gettext, Glibc, Grep, Make, Patch, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Gawk</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Man-DB</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">Pcre</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="groff-dep" name="groff-dep"></a>Groff
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Bison, Coreutils, Gawk,
        GCC, Glibc, Grep, Make, Patch, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">No test suite available</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Man-DB and Perl</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">GPL Ghostscript</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="grub-dep" name="grub-dep"></a>GRUB
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Bison, Coreutils,
        Diffutils, GCC, Gettext, Glibc, Grep, Make, Ncurses, Sed,
        Texinfo, and Xz</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="gzip-dep" name="gzip-dep"></a>Gzip
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, GCC, Glibc,
        Grep, Make, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Diffutils and Less</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Man-DB</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="iana-etc-dep" name="iana-etc-dep"></a>Iana-Etc
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Coreutils, Gawk, and Make</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">No test suite available</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Perl</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="inetutils-dep" name="inetutils-dep"></a>Inetutils
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, GCC, Glibc,
        Grep, Make, Ncurses, Patch, Sed, Texinfo, and Zlib</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">No test suite available</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Tar</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="intltool-dep" name="intltool-dep"></a>Intltool
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Gawk, Glibc, Make, Perl, Sed, and
        XML::Parser</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Perl</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="iproute2-dep" name="iproute2-dep"></a>IProute2
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Bison, Coreutils, Flex, GCC, Glibc,
        Make, and Linux API Headers</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">No test suite available</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="kbd-dep" name="kbd-dep"></a>Kbd
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Bison, Check, Coreutils,
        Flex, GCC, Gettext, Glibc, Gzip, Make, Patch, and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">No test suite available</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="kmod-dep" name="kmod-dep"></a>Kmod
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Bison, Coreutils, Flex,
        GCC, Gettext, Glibc, Gzip, Make, Sed, Xz-Utils, and Zlib</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">No test suite available</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Eudev</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="less-dep" name="less-dep"></a>Less
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Diffutils, GCC,
        Glibc, Grep, Make, Ncurses, and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">No test suite available</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Gzip</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">Pcre</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="libcap-dep" name="libcap-dep"></a>Libcap
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Attr, Bash, Binutils, Coreutils, GCC,
        Glibc, Perl, Make, and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">No test suite available</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">Linux-PAM</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="libelf-dep" name="libelf-dep"></a>Libelf
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, GCC, Glibc, and
        Make</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">No test suite available</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Linux Kernel</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="libffi-dep" name="libffi-dep"></a>Libffi
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, GCC, Glibc,
        Make, and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">DejaGnu</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Python</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="libpipeline-dep" name="libpipeline-dep"></a>Libpipeline
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Diffutils, Gawk,
        GCC, Glibc, Grep, Make, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Check</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Man-DB</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="libtool-dep" name="libtool-dep"></a>Libtool
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Diffutils, Gawk,
        GCC, Glibc, Grep, Make, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Autoconf, Automake, and Findutils</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="linux-dep" name="linux-dep"></a>Linux Kernel
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Bc, Binutils, Coreutils, Diffutils,
        Findutils, GCC, Glibc, Grep, Gzip, Kmod, Libelf, Make, Ncurses,
        OpenSSL, Perl, and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">No test suite available</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="m4-dep" name="m4-dep"></a>M4
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, GCC, Glibc,
        Grep, Make, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Diffutils</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Autoconf and Bison</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">libsigsegv</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="make-dep" name="make-dep"></a>Make
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, GCC, Gettext,
        Glibc, Grep, Make, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Perl and Procps-ng</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="man-db-dep" name="man-db-dep"></a>Man-DB
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Bzip2, Coreutils, Flex,
        GCC, GDBM, Gettext, Glibc, Grep, Groff, Gzip, Less, Libpipeline,
        Make, Sed, and Xz</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Util-linux</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="man-pages-dep" name="man-pages-dep"></a>Man-Pages
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Coreutils, and Make</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">No test suite available</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="meson-dep" name="meson-dep"></a>Meson
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Ninja and Python</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">No test suite available</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="mpc-dep" name="mpc-dep"></a>MPC
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Diffutils, Gawk,
        GCC, Glibc, Grep, GMP, Make, MPFR, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">GCC</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="mpfr-dep" name="mpfr-dep"></a>MPFR
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Diffutils, Gawk,
        GCC, Glibc, Grep, GMP, Make, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Gawk and GCC</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="ncurses-dep" name="ncurses-dep"></a>Ncurses
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Diffutils, Gawk,
        GCC, Glibc, Grep, Make, Patch, and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">No test suite available</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Bash, GRUB, Inetutils, Less, Procps-ng,
        Psmisc, Readline, Texinfo, Util-linux, and Vim</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="ninja-dep" name="ninja-dep"></a>Ninja
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Binutils, Coreutils, Gcc, and Python</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Meson</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">Asciidoc, Doxygen, Emacs, and re2c</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="openssl-dep" name="openssl-dep"></a>Openssl
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Binutils, Coreutils, Gcc, Make, and
        Perl</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Linux</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="patch-dep" name="patch-dep"></a>Patch
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, GCC, Glibc,
        Grep, Make, and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Diffutils</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">Ed</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="perl-dep" name="perl-dep"></a>Perl
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Gawk, GCC, GDBM,
        Glibc, Grep, Groff, Make, Sed, and Zlib</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Iana-Etc and Procps-ng</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Autoconf</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="pkgconfig-dep" name="pkgconfig-dep"></a>Pkg-config
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Gawk, GCC,
        Glibc, Grep, Make, Popt, and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Kmod</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="popt-dep" name="popt-dep"></a>Popt
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Gawk, GCC,
        Glibc, Grep, and Make</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Diffutils and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Pkg-config</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="procps-dep" name="procps-dep"></a>Procps-ng
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, GCC, Glibc,
        Make, and Ncurses</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">DejaGNU</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="psmisc-dep" name="psmisc-dep"></a>Psmisc
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, GCC, Gettext,
        Glibc, Grep, Make, Ncurses, and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">No test suite available</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="python-dep" name="python-dep"></a>Python
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, GCC, Gdbm,
        Gettext, Glibc, Grep, Libffi, Make, Ncurses, and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">GDB and Valgrind</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Ninja</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">Berkeley DB, OpenSSL, SQLite, and Tk</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="readline-dep" name="readline-dep"></a>Readline
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Gawk, GCC,
        Glibc, Grep, Make, Ncurses, Patch, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">No test suite available</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Bash and Gawk</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="sed-dep" name="sed-dep"></a>Sed
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, GCC, Gettext,
        Glibc, Grep, Make, Sed, and Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Diffutils and Gawk</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">E2fsprogs, File, Libtool, and Shadow</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="shadow-dep" name="shadow-dep"></a>Shadow
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Diffutils,
        Findutils, Gawk, GCC, Gettext, Glibc, Grep, Make, and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">No test suite available</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Coreutils</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">Acl, Attr, Cracklib, and PAM</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="sysklogd-dep" name="sysklogd-dep"></a>Sysklogd
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Binutils, Coreutils, GCC, Glibc, Make, and
        Patch</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">No test suite available</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="systemd-dep" name="systemd-dep"></a>Systemd
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Acl, Attr, Bash, Binutils, Coreutils,
        Diffutils, Expat, Gawk, GCC, Glibc, Gperf, Grep, Intltool,
        Libcap, Make, Sed, and Util-linux</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="sysvinit-dep" name="sysvinit-dep"></a>Sysvinit
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Binutils, Coreutils, GCC, Glibc, Make, and
        Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">No test suite available</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="tar-dep" name="tar-dep"></a>Tar
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Acl, Attr, Bash, Binutils, Bison,
        Coreutils, GCC, Gettext, Glibc, Grep, Inetutils, Make, Sed, and
        Texinfo</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Autoconf, Diffutils, Findutils, Gawk, and
        Gzip</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="tcl-dep" name="tcl-dep"></a>Tcl
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Diffutils, GCC,
        Glibc, Grep, Make, and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="texinfo-dep" name="texinfo-dep"></a>Texinfo
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, GCC, Gettext,
        Glibc, Grep, Make, Ncurses, Patch, and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="util-linux-dep" name="util-linux-dep"></a>Util-linux
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Diffutils,
        Eudev, Findutils, Gawk, GCC, Gettext, Glibc, Grep, Make, Ncurses,
        Sed, and Zlib</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody"><a class="ulink" href=
        "https://people.redhat.com/sgrubb/libcap-ng/">Libcap-ng</a></span>
        </div>
    </div>
    </div>
    <h2>
    <a id="vim-dep" name="vim-dep"></a>Vim
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Acl, Attr, Bash, Binutils, Coreutils,
        Diffutils, GCC, Glibc, Grep, Make, Ncurses, and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">Xorg, GTK+2, LessTif, Python, Tcl, Ruby,
        and GPM</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="xml-parser-dep" name="xml-parser-dep"></a>XML::Parser
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Expat, GCC,
        Glibc, Make, and Perl</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">Perl</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Intltool</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="xz-dep" name="xz-dep"></a>Xz
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, Diffutils, GCC,
        Glibc, and Make</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">Eudev, GRUB, Kmod, and Man-DB</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <h2>
    <a id="zlib-dep" name="zlib-dep"></a>Zlib
    </h2>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Installation depends on:</strong>
        <span class="segbody">Bash, Binutils, Coreutils, GCC, Glibc,
        Make, and Sed</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Test suite depends on:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Must be installed before:</strong>
        <span class="segbody">File, Kmod, Perl, and Util-linux</span>
        </div>
    </div>
    </div>
    <div class="segmentedlist">
    <div class="seglistitem">
        <div class="seg">
        <strong class="segtitle">Optional dependencies:</strong>
        <span class="segbody">None</span>
        </div>
    </div>
    </div>
</div>
<h1><a class="header" href="#lfs-licenses" id="lfs-licenses">LFS Licenses</a></h1>
<p>This book is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 2.0 License.</p>
<p>Computer instructions may be extracted from the book under the MIT License.</p>
<h1><a class="header" href="#creative-commons-license" id="creative-commons-license">Creative Commons License</a></h1>
<p>Creative Commons Legal Code</p>
<p>Attribution-NonCommercial-ShareAlike 2.0</p>
<blockquote>
<p><strong>Important</strong></p>
<blockquote>
<p>CREATIVE COMMONS CORPORATION IS NOT A LAW FIRM AND DOES NOT PROVIDE LEGAL SERVICES. DISTRIBUTION OF THIS LICENSE DOES NOT CREATE AN ATTORNEY-CLIENT RELATIONSHIP. CREATIVE COMMONS PROVIDES THIS INFORMATION ON AN &quot;AS-IS&quot; BASIS. CREATIVE COMMONS MAKES NO WARRANTIES REGARDING THE INFORMATION PROVIDED, AND DISCLAIMS LIABILITY FOR DAMAGES RESULTING FROM ITS USE.</p>
</blockquote>
</blockquote>
<p>
        THE WORK (AS DEFINED BELOW) IS PROVIDED UNDER THE TERMS OF THIS
        CREATIVE COMMONS PUBLIC LICENSE ("CCPL" OR "LICENSE"). THE WORK IS
        PROTECTED BY COPYRIGHT AND/OR OTHER APPLICABLE LAW. ANY USE OF THE
        WORK OTHER THAN AS AUTHORIZED UNDER THIS LICENSE OR COPYRIGHT LAW IS
        PROHIBITED.
      </p>
      <p>
        BY EXERCISING ANY RIGHTS TO THE WORK PROVIDED HERE, YOU ACCEPT AND
        AGREE TO BE BOUND BY THE TERMS OF THIS LICENSE. THE LICENSOR GRANTS
        YOU THE RIGHTS CONTAINED HERE IN CONSIDERATION OF YOUR ACCEPTANCE OF
        SUCH TERMS AND CONDITIONS.
      </p>
      <div class="orderedlist">
        <ol>
          <li class="listitem">
            <p>
              Definitions
            </p>
            <div class="orderedlist">
              <ol>
                <li class="listitem">
                  <p>
                    "Collective Work" means a work, such as a periodical
                    issue, anthology or encyclopedia, in which the Work in
                    its entirety in unmodified form, along with a number of
                    other contributions, constituting separate and
                    independent works in themselves, are assembled into a
                    collective whole. A work that constitutes a Collective
                    Work will not be considered a Derivative Work (as defined
                    below) for the purposes of this License.
                  </p>
                </li>
                <li class="listitem">
                  <p>
                    "Derivative Work" means a work based upon the Work or
                    upon the Work and other pre-existing works, such as a
                    translation, musical arrangement, dramatization,
                    fictionalization, motion picture version, sound
                    recording, art reproduction, abridgment, condensation, or
                    any other form in which the Work may be recast,
                    transformed, or adapted, except that a work that
                    constitutes a Collective Work will not be considered a
                    Derivative Work for the purpose of this License. For the
                    avoidance of doubt, where the Work is a musical
                    composition or sound recording, the synchronization of
                    the Work in timed-relation with a moving image
                    ("synching") will be considered a Derivative Work for the
                    purpose of this License.
                  </p>
                </li>
                <li class="listitem">
                  <p>
                    "Licensor" means the individual or entity that offers the
                    Work under the terms of this License.
                  </p>
                </li>
                <li class="listitem">
                  <p>
                    "Original Author" means the individual or entity who
                    created the Work.
                  </p>
                </li>
                <li class="listitem">
                  <p>
                    "Work" means the copyrightable work of authorship offered
                    under the terms of this License.
                  </p>
                </li>
                <li class="listitem">
                  <p>
                    "You" means an individual or entity exercising rights
                    under this License who has not previously violated the
                    terms of this License with respect to the Work, or who
                    has received express permission from the Licensor to
                    exercise rights under this License despite a previous
                    violation.
                  </p>
                </li>
                <li class="listitem">
                  <p>
                    "License Elements" means the following high-level license
                    attributes as selected by Licensor and indicated in the
                    title of this License: Attribution, Noncommercial,
                    ShareAlike.
                  </p>
                </li>
              </ol>
            </div>
          </li>
          <li class="listitem">
            <p>
              Fair Use Rights. Nothing in this license is intended to reduce,
              limit, or restrict any rights arising from fair use, first sale
              or other limitations on the exclusive rights of the copyright
              owner under copyright law or other applicable laws.
            </p>
          </li>
          <li class="listitem">
            <p>
              License Grant. Subject to the terms and conditions of this
              License, Licensor hereby grants You a worldwide, royalty-free,
              non-exclusive, perpetual (for the duration of the applicable
              copyright) license to exercise the rights in the Work as stated
              below:
            </p>
            <div class="orderedlist">
              <ol>
                <li class="listitem">
                  <p>
                    to reproduce the Work, to incorporate the Work into one
                    or more Collective Works, and to reproduce the Work as
                    incorporated in the Collective Works;
                  </p>
                </li>
                <li class="listitem">
                  <p>
                    to create and reproduce Derivative Works;
                  </p>
                </li>
                <li class="listitem">
                  <p>
                    to distribute copies or phonorecords of, display
                    publicly, perform publicly, and perform publicly by means
                    of a digital audio transmission the Work including as
                    incorporated in Collective Works;
                  </p>
                </li>
                <li class="listitem">
                  <p>
                    to distribute copies or phonorecords of, display
                    publicly, perform publicly, and perform publicly by means
                    of a digital audio transmission Derivative Works;
                  </p>
                </li>
              </ol>
            </div>
            <p>
              The above rights may be exercised in all media and formats
              whether now known or hereafter devised. The above rights
              include the right to make such modifications as are technically
              necessary to exercise the rights in other media and formats.
              All rights not expressly granted by Licensor are hereby
              reserved, including but not limited to the rights set forth in
              Sections 4(e) and 4(f).
            </p>
          </li>
          <li class="listitem">
            <p>
              Restrictions.The license granted in Section 3 above is
              expressly made subject to and limited by the following
              restrictions:
            </p>
            <div class="orderedlist">
              <ol>
                <li class="listitem">
                  <p>
                    You may distribute, publicly display, publicly perform,
                    or publicly digitally perform the Work only under the
                    terms of this License, and You must include a copy of, or
                    the Uniform Resource Identifier for, this License with
                    every copy or phonorecord of the Work You distribute,
                    publicly display, publicly perform, or publicly digitally
                    perform. You may not offer or impose any terms on the
                    Work that alter or restrict the terms of this License or
                    the recipients' exercise of the rights granted hereunder.
                    You may not sublicense the Work. You must keep intact all
                    notices that refer to this License and to the disclaimer
                    of warranties. You may not distribute, publicly display,
                    publicly perform, or publicly digitally perform the Work
                    with any technological measures that control access or
                    use of the Work in a manner inconsistent with the terms
                    of this License Agreement. The above applies to the Work
                    as incorporated in a Collective Work, but this does not
                    require the Collective Work apart from the Work itself to
                    be made subject to the terms of this License. If You
                    create a Collective Work, upon notice from any Licensor
                    You must, to the extent practicable, remove from the
                    Collective Work any reference to such Licensor or the
                    Original Author, as requested. If You create a Derivative
                    Work, upon notice from any Licensor You must, to the
                    extent practicable, remove from the Derivative Work any
                    reference to such Licensor or the Original Author, as
                    requested.
                  </p>
                </li>
                <li class="listitem">
                  <p>
                    You may distribute, publicly display, publicly perform,
                    or publicly digitally perform a Derivative Work only
                    under the terms of this License, a later version of this
                    License with the same License Elements as this License,
                    or a Creative Commons iCommons license that contains the
                    same License Elements as this License (e.g.
                    Attribution-NonCommercial-ShareAlike 2.0 Japan). You must
                    include a copy of, or the Uniform Resource Identifier
                    for, this License or other license specified in the
                    previous sentence with every copy or phonorecord of each
                    Derivative Work You distribute, publicly display,
                    publicly perform, or publicly digitally perform. You may
                    not offer or impose any terms on the Derivative Works
                    that alter or restrict the terms of this License or the
                    recipients' exercise of the rights granted hereunder, and
                    You must keep intact all notices that refer to this
                    License and to the disclaimer of warranties. You may not
                    distribute, publicly display, publicly perform, or
                    publicly digitally perform the Derivative Work with any
                    technological measures that control access or use of the
                    Work in a manner inconsistent with the terms of this
                    License Agreement. The above applies to the Derivative
                    Work as incorporated in a Collective Work, but this does
                    not require the Collective Work apart from the Derivative
                    Work itself to be made subject to the terms of this
                    License.
                  </p>
                </li>
                <li class="listitem">
                  <p>
                    You may not exercise any of the rights granted to You in
                    Section 3 above in any manner that is primarily intended
                    for or directed toward commercial advantage or private
                    monetary compensation. The exchange of the Work for other
                    copyrighted works by means of digital file-sharing or
                    otherwise shall not be considered to be intended for or
                    directed toward commercial advantage or private monetary
                    compensation, provided there is no payment of any
                    monetary compensation in connection with the exchange of
                    copyrighted works.
                  </p>
                </li>
                <li class="listitem">
                  <p>
                    If you distribute, publicly display, publicly perform, or
                    publicly digitally perform the Work or any Derivative
                    Works or Collective Works, You must keep intact all
                    copyright notices for the Work and give the Original
                    Author credit reasonable to the medium or means You are
                    utilizing by conveying the name (or pseudonym if
                    applicable) of the Original Author if supplied; the title
                    of the Work if supplied; to the extent reasonably
                    practicable, the Uniform Resource Identifier, if any,
                    that Licensor specifies to be associated with the Work,
                    unless such URI does not refer to the copyright notice or
                    licensing information for the Work; and in the case of a
                    Derivative Work, a credit identifying the use of the Work
                    in the Derivative Work (e.g., "French translation of the
                    Work by Original Author," or "Screenplay based on
                    original Work by Original Author"). Such credit may be
                    implemented in any reasonable manner; provided, however,
                    that in the case of a Derivative Work or Collective Work,
                    at a minimum such credit will appear where any other
                    comparable authorship credit appears and in a manner at
                    least as prominent as such other comparable authorship
                    credit.
                  </p>
                </li>
                <li class="listitem">
                  <p>
                    For the avoidance of doubt, where the Work is a musical
                    composition:
                  </p>
                  <div class="orderedlist">
                    <ol>
                      <li class="listitem">
                        <p>
                          Performance Royalties Under Blanket Licenses.
                          Licensor reserves the exclusive right to collect,
                          whether individually or via a performance rights
                          society (e.g. ASCAP, BMI, SESAC), royalties for the
                          public performance or public digital performance
                          (e.g. webcast) of the Work if that performance is
                          primarily intended for or directed toward
                          commercial advantage or private monetary
                          compensation.
                        </p>
                      </li>
                      <li class="listitem">
                        <p>
                          Mechanical Rights and Statutory Royalties. Licensor
                          reserves the exclusive right to collect, whether
                          individually or via a music rights agency or
                          designated agent (e.g. Harry Fox Agency), royalties
                          for any phonorecord You create from the Work
                          ("cover version") and distribute, subject to the
                          compulsory license created by 17 USC Section 115 of
                          the US Copyright Act (or the equivalent in other
                          jurisdictions), if Your distribution of such cover
                          version is primarily intended for or directed
                          toward commercial advantage or private monetary
                          compensation. 6. Webcasting Rights and Statutory
                          Royalties. For the avoidance of doubt, where the
                          Work is a sound recording, Licensor reserves the
                          exclusive right to collect, whether individually or
                          via a performance-rights society (e.g.
                          SoundExchange), royalties for the public digital
                          performance (e.g. webcast) of the Work, subject to
                          the compulsory license created by 17 USC Section
                          114 of the US Copyright Act (or the equivalent in
                          other jurisdictions), if Your public digital
                          performance is primarily intended for or directed
                          toward commercial advantage or private monetary
                          compensation.
                        </p>
                      </li>
                    </ol>
                  </div>
                </li>
                <li class="listitem">
                  <p>
                    Webcasting Rights and Statutory Royalties. For the
                    avoidance of doubt, where the Work is a sound recording,
                    Licensor reserves the exclusive right to collect, whether
                    individually or via a performance-rights society (e.g.
                    SoundExchange), royalties for the public digital
                    performance (e.g. webcast) of the Work, subject to the
                    compulsory license created by 17 USC Section 114 of the
                    US Copyright Act (or the equivalent in other
                    jurisdictions), if Your public digital performance is
                    primarily intended for or directed toward commercial
                    advantage or private monetary compensation.
                  </p>
                </li>
              </ol>
            </div>
          </li>
          <li class="listitem">
            <p>
              Representations, Warranties and Disclaimer
            </p>
            <p>
              UNLESS OTHERWISE MUTUALLY AGREED TO BY THE PARTIES IN WRITING,
              LICENSOR OFFERS THE WORK AS-IS AND MAKES NO REPRESENTATIONS OR
              WARRANTIES OF ANY KIND CONCERNING THE WORK, EXPRESS, IMPLIED,
              STATUTORY OR OTHERWISE, INCLUDING, WITHOUT LIMITATION,
              WARRANTIES OF TITLE, MERCHANTIBILITY, FITNESS FOR A PARTICULAR
              PURPOSE, NONINFRINGEMENT, OR THE ABSENCE OF LATENT OR OTHER
              DEFECTS, ACCURACY, OR THE PRESENCE OF ABSENCE OF ERRORS,
              WHETHER OR NOT DISCOVERABLE. SOME JURISDICTIONS DO NOT ALLOW
              THE EXCLUSION OF IMPLIED WARRANTIES, SO SUCH EXCLUSION MAY NOT
              APPLY TO YOU.
            </p>
          </li>
          <li class="listitem">
            <p>
              Limitation on Liability. EXCEPT TO THE EXTENT REQUIRED BY
              APPLICABLE LAW, IN NO EVENT WILL LICENSOR BE LIABLE TO YOU ON
              ANY LEGAL THEORY FOR ANY SPECIAL, INCIDENTAL, CONSEQUENTIAL,
              PUNITIVE OR EXEMPLARY DAMAGES ARISING OUT OF THIS LICENSE OR
              THE USE OF THE WORK, EVEN IF LICENSOR HAS BEEN ADVISED OF THE
              POSSIBILITY OF SUCH DAMAGES.
            </p>
          </li>
          <li class="listitem">
            <p>
              Termination
            </p>
            <div class="orderedlist">
              <ol>
                <li class="listitem">
                  <p>
                    This License and the rights granted hereunder will
                    terminate automatically upon any breach by You of the
                    terms of this License. Individuals or entities who have
                    received Derivative Works or Collective Works from You
                    under this License, however, will not have their licenses
                    terminated provided such individuals or entities remain
                    in full compliance with those licenses. Sections 1, 2, 5,
                    6, 7, and 8 will survive any termination of this License.
                  </p>
                </li>
                <li class="listitem">
                  <p>
                    Subject to the above terms and conditions, the license
                    granted here is perpetual (for the duration of the
                    applicable copyright in the Work). Notwithstanding the
                    above, Licensor reserves the right to release the Work
                    under different license terms or to stop distributing the
                    Work at any time; provided, however that any such
                    election will not serve to withdraw this License (or any
                    other license that has been, or is required to be,
                    granted under the terms of this License), and this
                    License will continue in full force and effect unless
                    terminated as stated above.
                  </p>
                </li>
              </ol>
            </div>
          </li>
          <li class="listitem">
            <p>
              Miscellaneous
            </p>
            <div class="orderedlist">
              <ol>
                <li class="listitem">
                  <p>
                    Each time You distribute or publicly digitally perform
                    the Work or a Collective Work, the Licensor offers to the
                    recipient a license to the Work on the same terms and
                    conditions as the license granted to You under this
                    License.
                  </p>
                </li>
                <li class="listitem">
                  <p>
                    Each time You distribute or publicly digitally perform a
                    Derivative Work, Licensor offers to the recipient a
                    license to the original Work on the same terms and
                    conditions as the license granted to You under this
                    License.
                  </p>
                </li>
                <li class="listitem">
                  <p>
                    If any provision of this License is invalid or
                    unenforceable under applicable law, it shall not affect
                    the validity or enforceability of the remainder of the
                    terms of this License, and without further action by the
                    parties to this agreement, such provision shall be
                    reformed to the minimum extent necessary to make such
                    provision valid and enforceable.
                  </p>
                </li>
                <li class="listitem">
                  <p>
                    No term or provision of this License shall be deemed
                    waived and no breach consented to unless such waiver or
                    consent shall be in writing and signed by the party to be
                    charged with such waiver or consent.
                  </p>
                </li>
                <li class="listitem">
                  <p>
                    This License constitutes the entire agreement between the
                    parties with respect to the Work licensed here. There are
                    no understandings, agreements or representations with
                    respect to the Work not specified here. Licensor shall
                    not be bound by any additional provisions that may appear
                    in any communication from You. This License may not be
                    modified without the mutual written agreement of the
                    Licensor and You.
                  </p>
                </li>
              </ol>
            </div>
          </li>
        </ol>
      </div>
<blockquote>
<p><strong>Important</strong></p>
<p>Creative Commons is not a party to this License, and makes no warranty whatsoever in connection with the Work. Creative Commons will not be liable to You or any party on any legal theory for any damages whatsoever, including without limitation any general, special, incidental or consequential damages arising in connection to this license. Notwithstanding the foregoing two (2) sentences, if Creative Commons has expressly identified itself as the Licensor hereunder, it shall have all rights and obligations of Licensor.</p>
<p>Except for the limited purpose of indicating to the public that the Work is licensed under the CCPL, neither party will use the trademark &quot;Creative Commons&quot; or any related trademark or logo of Creative Commons without the prior written consent of Creative Commons. Any permitted use will be in compliance with Creative Commons' then-current trademark usage guidelines, as may be published on its website or otherwise made available upon request from time to time.</p>
<p>Creative Commons may be contacted at http://creativecommons.org/.</p>
</blockquote>
<h1><a class="header" href="#the-mit-license" id="the-mit-license">The MIT License</a></h1>
<p>Copyright © 1999-2019 Gerard Beekmans</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &quot;Software&quot;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        
        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            var socket = new WebSocket("ws://localhost:3001");
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload(true); // force reload from server (not from cache)
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>
        

        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
